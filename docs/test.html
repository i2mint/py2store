
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>py2store.filesys &#8212; py2store 0.1.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-py2store.filesys">
<span id="py2store-filesys"></span><h1>py2store.filesys<a class="headerlink" href="#module-py2store.filesys" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.filesys:</p>
<p>File system access</p>
</section>
<section id="module-py2store.misc">
<span id="py2store-misc"></span><h1>py2store.misc<a class="headerlink" href="#module-py2store.misc" title="Permalink to this headline">¶</a></h1>
<p>Functions to read from and write to misc sources</p>
<dl class="py class">
<dt id="py2store.misc.MiscGetter">
<em class="property">class </em><code class="sig-prename descclassname">py2store.misc.</code><code class="sig-name descname">MiscGetter</code><span class="sig-paren">(</span><em class="sig-param">store=&lt;py2store.persisters.local_files.PathFormatPersister object&gt;</em>, <em class="sig-param">incoming_val_trans_for_key={'.bin': &lt;function identity_method&gt;</em>, <em class="sig-param">'.cnf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.conf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.config': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.csv': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.gz': &lt;function decompress&gt;</em>, <em class="sig-param">'.gzip': &lt;function decompress&gt;</em>, <em class="sig-param">'.ini': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.json': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pickle': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pkl': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.txt': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.zip': &lt;class 'py2store.slib.s_zipfile.FilesOfZip'&gt;}</em>, <em class="sig-param">dflt_incoming_val_trans=&lt;function identity_method&gt;</em>, <em class="sig-param">func_key=&lt;function MiscGetter.&lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/misc.html#MiscGetter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.misc.MiscGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>An object to write (and only write) to a store (default local files) with automatic deserialization
according to a property of the key (default: file extension).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">py2store.misc</span> <span class="kn">import</span> <span class="n">get_obj</span><span class="p">,</span> <span class="n">misc_objs_get</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pjoin</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">p</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">),</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">))</span>  <span class="c1"># putting a json file there, the normal way, so we can use it later</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">k</span> <span class="o">=</span> <span class="n">path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">get_obj</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>  <span class="c1"># if you&#39;d like to use a function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">t</span> <span class="o">==</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tt</span> <span class="o">=</span> <span class="n">misc_objs_get</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>  <span class="c1"># if you&#39;d like to use an object (note: can get, but nothing else (no list, set, del, etc))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">tt</span> <span class="o">==</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">{&#39;a&#39;: {&#39;b&#39;: {&#39;c&#39;: [1, 2, 3]}}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.misc.MiscGetterAndSetter">
<em class="property">class </em><code class="sig-prename descclassname">py2store.misc.</code><code class="sig-name descname">MiscGetterAndSetter</code><span class="sig-paren">(</span><em class="sig-param">store=&lt;py2store.persisters.local_files.PathFormatPersister object&gt;</em>, <em class="sig-param">incoming_val_trans_for_key={'.bin': &lt;function identity_method&gt;</em>, <em class="sig-param">'.cnf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.conf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.config': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.csv': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.gz': &lt;function decompress&gt;</em>, <em class="sig-param">'.gzip': &lt;function decompress&gt;</em>, <em class="sig-param">'.ini': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.json': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pickle': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pkl': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.txt': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.zip': &lt;class 'py2store.slib.s_zipfile.FilesOfZip'&gt;}</em>, <em class="sig-param">outgoing_val_trans_for_key={'.bin': &lt;function identity_method&gt;</em>, <em class="sig-param">'.cnf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.conf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.config': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.csv': &lt;function csv_fileobj&gt;</em>, <em class="sig-param">'.gz': &lt;function compress&gt;</em>, <em class="sig-param">'.gzip': &lt;function compress&gt;</em>, <em class="sig-param">'.ini': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.json': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pickle': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pkl': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.txt': &lt;function &lt;lambda&gt;&gt;}</em>, <em class="sig-param">dflt_incoming_val_trans=&lt;function identity_method&gt;</em>, <em class="sig-param">func_key=&lt;function MiscGetterAndSetter.&lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/misc.html#MiscGetterAndSetter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.misc.MiscGetterAndSetter" title="Permalink to this definition">¶</a></dt>
<dd><p>An object to read and write (and nothing else) to a store (default local) with automatic (de)serialization
according to a property of the key (default: file extension).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">py2store.misc</span> <span class="kn">import</span> <span class="n">set_obj</span><span class="p">,</span> <span class="n">misc_objs</span>  <span class="c1"># the function and the object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pjoin</span> <span class="o">=</span> <span class="k">lambda</span> <span class="o">*</span><span class="n">p</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~&#39;</span><span class="p">),</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.json&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s1">&#39;~/tmp.json&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">misc_objs</span><span class="p">[</span><span class="n">filepath</span><span class="p">]</span> <span class="o">==</span> <span class="n">d</span>  <span class="c1"># yep, it&#39;s there, and can be retrieved</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">))</span> <span class="o">==</span> <span class="n">d</span>  <span class="c1"># in case you don&#39;t believe it&#39;s an actual json file</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># using pickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.pkl&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.pkl&#39;</span><span class="p">)]</span> <span class="o">==</span> <span class="n">d</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># using txt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.txt&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="s1">&#39;hello world!&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.txt&#39;</span><span class="p">)]</span> <span class="o">==</span> <span class="s1">&#39;hello world!&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># using csv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.csv&#39;</span><span class="p">)]</span> <span class="o">==</span> <span class="p">[[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;3&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]]</span>  <span class="c1"># yeah, well, not numbers, but you deal with it</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># using bin</span>
<span class="gp">... </span><span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.bin&#39;</span><span class="p">)]</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;let us pretend these are bytes of an audio waveform&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">misc_objs</span><span class="p">[</span><span class="n">pjoin</span><span class="p">(</span><span class="s1">&#39;tmp.bin&#39;</span><span class="p">)]</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;let us pretend these are bytes of an audio waveform&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.misc.MiscReaderMixin">
<em class="property">class </em><code class="sig-prename descclassname">py2store.misc.</code><code class="sig-name descname">MiscReaderMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">incoming_val_trans_for_key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dflt_incoming_val_trans</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">func_key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/misc.html#MiscReaderMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.misc.MiscReaderMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to transform incoming vals according to the key their under.
Warning: If used as a subclass, this mixin should (in general) be placed before the store</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># make a reader that will wrap a dict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MiscReader</span><span class="p">(</span><span class="n">MiscReaderMixin</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">incoming_val_trans_for_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">dflt_incoming_val_trans</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">func_key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">dict</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">MiscReaderMixin</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">incoming_val_trans_for_key</span><span class="p">,</span> <span class="n">dflt_incoming_val_trans</span><span class="p">,</span> <span class="n">func_key</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">incoming_val_trans_for_key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">MiscReaderMixin</span><span class="o">.</span><span class="n">_incoming_val_trans_for_key</span><span class="p">,</span>  <span class="c1"># take the existing defaults...</span>
<span class="gp">... </span>    <span class="o">**</span><span class="p">{</span><span class="s1">&#39;.bin&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">[</span><span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="o">.</span><span class="n">decode</span><span class="p">()],</span> <span class="c1"># ... override how to handle the .bin extension</span>
<span class="gp">... </span>     <span class="s1">&#39;.reverse_this&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># add a new extension (and how to handle it)</span>
<span class="gp">... </span>    <span class="p">})</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;a.bin&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;abc123&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;a.reverse_this&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;abc123&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;a.csv&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;event,year</span><span class="se">\n</span><span class="s1"> Magna Carta,1215</span><span class="se">\n</span><span class="s1"> Guido,1956&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;a.txt&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;this is not a text&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;a.pkl&#39;</span><span class="p">:</span> <span class="n">pickle</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">map</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;a list&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}]),</span>
<span class="gp">... </span>    <span class="s1">&#39;a.json&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;str&quot;: &quot;field&quot;, &quot;int&quot;: 42, &quot;float&quot;: 3.14, &quot;array&quot;: [1, 2], &quot;nested&quot;: {&quot;a&quot;: 1, &quot;b&quot;: 2}}&#39;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">}</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">MiscReader</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">d</span><span class="p">,</span> <span class="n">incoming_val_trans_for_key</span><span class="o">=</span><span class="n">incoming_val_trans_for_key</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">[&#39;a.bin&#39;, &#39;a.reverse_this&#39;, &#39;a.csv&#39;, &#39;a.txt&#39;, &#39;a.pkl&#39;, &#39;a.json&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.bin&#39;</span><span class="p">]</span>
<span class="go">[97, 98, 99, 49, 50, 51]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.reverse_this&#39;</span><span class="p">]</span>
<span class="go">b&#39;321cba&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.csv&#39;</span><span class="p">]</span>
<span class="go">[[&#39;event&#39;, &#39;year&#39;], [&#39; Magna Carta&#39;, &#39;1215&#39;], [&#39; Guido&#39;, &#39;1956&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.pkl&#39;</span><span class="p">]</span>
<span class="go">[&#39;text&#39;, [&lt;class &#39;str&#39;&gt;, &lt;class &#39;map&#39;&gt;], {&#39;a list&#39;: [1, 2, 3]}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="s1">&#39;a.json&#39;</span><span class="p">]</span>
<span class="go">{&#39;str&#39;: &#39;field&#39;, &#39;int&#39;: 42, &#39;float&#39;: 3.14, &#39;array&#39;: [1, 2], &#39;nested&#39;: {&#39;a&#39;: 1, &#39;b&#39;: 2}}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.misc.MiscStoreMixin">
<em class="property">class </em><code class="sig-prename descclassname">py2store.misc.</code><code class="sig-name descname">MiscStoreMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">incoming_val_trans_for_key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">outgoing_val_trans_for_key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dflt_incoming_val_trans</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">dflt_outgoing_val_trans</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">func_key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/misc.html#MiscStoreMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.misc.MiscStoreMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin to transform incoming and outgoing vals according to the key their under.
Warning: If used as a subclass, this mixin should (in general) be placed before the store</p>
<p>See also: preset and postget args from wrap_kvs decorator from py2store.trans.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Make a class to wrap a dict with a layer that transforms written and read values</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MiscStore</span><span class="p">(</span><span class="n">MiscStoreMixin</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">incoming_val_trans_for_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outgoing_val_trans_for_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">dflt_incoming_val_trans</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dflt_outgoing_val_trans</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">func_key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">dict</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
<span class="gp">... </span>        <span class="n">MiscStoreMixin</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">incoming_val_trans_for_key</span><span class="p">,</span> <span class="n">outgoing_val_trans_for_key</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="n">dflt_incoming_val_trans</span><span class="p">,</span> <span class="n">dflt_outgoing_val_trans</span><span class="p">,</span> <span class="n">func_key</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">outgoing_val_trans_for_key</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">MiscStoreMixin</span><span class="o">.</span><span class="n">_outgoing_val_trans_for_key</span><span class="p">,</span>  <span class="c1"># take the existing defaults...</span>
<span class="gp">... </span>    <span class="o">**</span><span class="p">{</span><span class="s1">&#39;.bin&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">chr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="p">])</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span> <span class="c1"># ... override how to handle the .bin extension</span>
<span class="gp">... </span>       <span class="s1">&#39;.reverse_this&#39;</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># add a new extension (and how to handle it)</span>
<span class="gp">... </span>    <span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss</span> <span class="o">=</span> <span class="n">MiscStore</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># store starts empty</span>
<span class="gp">... </span>               <span class="n">incoming_val_trans_for_key</span><span class="o">=</span><span class="p">{},</span>  <span class="c1"># overriding incoming trans so we can see the raw data later</span>
<span class="gp">... </span>               <span class="n">outgoing_val_trans_for_key</span><span class="o">=</span><span class="n">outgoing_val_trans_for_key</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># here&#39;s what we&#39;re going to write in the store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_to_write</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>     <span class="s1">&#39;a.bin&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">97</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">49</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">51</span><span class="p">],</span>
<span class="gp">... </span>     <span class="s1">&#39;a.reverse_this&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;321cba&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;a.csv&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="s1">&#39;event&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39; Magna Carta&#39;</span><span class="p">,</span> <span class="s1">&#39;1215&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39; Guido&#39;</span><span class="p">,</span> <span class="s1">&#39;1956&#39;</span><span class="p">]],</span>
<span class="gp">... </span>     <span class="s1">&#39;a.txt&#39;</span><span class="p">:</span> <span class="s1">&#39;this is not a text&#39;</span><span class="p">,</span>
<span class="gp">... </span>     <span class="s1">&#39;a.pkl&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">map</span><span class="p">],</span> <span class="p">{</span><span class="s1">&#39;a list&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}],</span>
<span class="gp">... </span>     <span class="s1">&#39;a.json&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;str&#39;</span><span class="p">:</span> <span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="s1">&#39;int&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span> <span class="mf">3.14</span><span class="p">,</span> <span class="s1">&#39;array&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;nested&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># write this data in our store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data_to_write</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>    <span class="n">ss</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
<span class="go">[&#39;a.bin&#39;, &#39;a.reverse_this&#39;, &#39;a.csv&#39;, &#39;a.txt&#39;, &#39;a.pkl&#39;, &#39;a.json&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Looking at the contents (what was actually stored/written)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ss</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s1">&#39;a.pkl&#39;</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">else</span><span class="p">:</span>  <span class="c1"># need to verify pickle data differently, since printing contents is problematic in doctest</span>
<span class="gp">... </span>        <span class="k">assert</span> <span class="n">pickle</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">==</span> <span class="n">data_to_write</span><span class="p">[</span><span class="s1">&#39;a.pkl&#39;</span><span class="p">]</span>
<span class="go">a.bin: b&#39;abc123&#39;</span>
<span class="go">a.reverse_this: b&#39;abc123&#39;</span>
<span class="go">a.csv: b&#39;event,year\r\n Magna Carta,1215\r\n Guido,1956\r\n&#39;</span>
<span class="go">a.txt: b&#39;this is not a text&#39;</span>
<span class="go">a.json: b&#39;{&quot;str&quot;: &quot;field&quot;, &quot;int&quot;: 42, &quot;float&quot;: 3.14, &quot;array&quot;: [1, 2], &quot;nested&quot;: {&quot;a&quot;: 1, &quot;b&quot;: 2}}&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.misc.get_obj">
<code class="sig-prename descclassname">py2store.misc.</code><code class="sig-name descname">get_obj</code><span class="sig-paren">(</span><em class="sig-param">k</em>, <em class="sig-param">store=&lt;py2store.persisters.local_files.PathFormatPersister object&gt;</em>, <em class="sig-param">incoming_val_trans_for_key={'.bin': &lt;function identity_method&gt;</em>, <em class="sig-param">'.cnf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.conf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.config': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.csv': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.gz': &lt;function decompress&gt;</em>, <em class="sig-param">'.gzip': &lt;function decompress&gt;</em>, <em class="sig-param">'.ini': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.json': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pickle': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pkl': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.txt': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.zip': &lt;class 'py2store.slib.s_zipfile.FilesOfZip'&gt;}</em>, <em class="sig-param">dflt_incoming_val_trans=&lt;function identity_method&gt;</em>, <em class="sig-param">func_key=&lt;function &lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/misc.html#get_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.misc.get_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>A quick way to get an object, with default… everything (but the key, you know, a clue of what you want)</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.misc.set_obj">
<code class="sig-prename descclassname">py2store.misc.</code><code class="sig-name descname">set_obj</code><span class="sig-paren">(</span><em class="sig-param">k</em>, <em class="sig-param">v</em>, <em class="sig-param">store=&lt;py2store.persisters.local_files.PathFormatPersister object&gt;</em>, <em class="sig-param">outgoing_val_trans_for_key={'.bin': &lt;function identity_method&gt;</em>, <em class="sig-param">'.cnf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.conf': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.config': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.csv': &lt;function csv_fileobj&gt;</em>, <em class="sig-param">'.gz': &lt;function compress&gt;</em>, <em class="sig-param">'.gzip': &lt;function compress&gt;</em>, <em class="sig-param">'.ini': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.json': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pickle': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.pkl': &lt;function &lt;lambda&gt;&gt;</em>, <em class="sig-param">'.txt': &lt;function &lt;lambda&gt;&gt;}</em>, <em class="sig-param">func_key=&lt;function &lt;lambda&gt;&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/misc.html#set_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.misc.set_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>A quick way to get an object, with default… everything (but the key, you know, a clue of what you want)</p>
</dd></dl>

</section>
<section id="module-py2store.mixins">
<span id="py2store-mixins"></span><h1>py2store.mixins<a class="headerlink" href="#module-py2store.mixins" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.mixins:</p>
<p>Mixins</p>
</section>
<section id="module-py2store.test.util">
<span id="py2store-test-util"></span><h1>py2store.test.util<a class="headerlink" href="#module-py2store.test.util" title="Permalink to this headline">¶</a></h1>
<p>utils for testing</p>
<dl class="py function">
<dt id="py2store.test.util.random_dict_gen">
<code class="sig-prename descclassname">py2store.test.util.</code><code class="sig-name descname">random_dict_gen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fields</span><span class="o">=</span><span class="default_value">('a', 'b', 'c')</span></em>, <em class="sig-param"><span class="n">word_size_range</span><span class="o">=</span><span class="default_value">(1, 10)</span></em>, <em class="sig-param"><span class="n">alphabet</span><span class="o">=</span><span class="default_value">'abcdefghijklmnopqrstuvwxyz'</span></em>, <em class="sig-param"><span class="n">n</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/test/util.html#random_dict_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.test.util.random_dict_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Random dict (of strings) generator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fields</strong> – Field names for the random dicts</p></li>
<li><p><strong>word_size_range</strong> – An int, 2-tuple of ints, or list-like object that defines the choices of word sizes</p></li>
<li><p><strong>alphabet</strong> – A string or iterable defining the alphabet to draw from</p></li>
<li><p><strong>n</strong> – The number of elements the generator will yield</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Random dict (of strings) generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py2store.test.util.random_formatted_str_gen">
<code class="sig-prename descclassname">py2store.test.util.</code><code class="sig-name descname">random_formatted_str_gen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span><span class="o">=</span><span class="default_value">'root/{}/{}_{}.test'</span></em>, <em class="sig-param"><span class="n">word_size_range</span><span class="o">=</span><span class="default_value">(1, 10)</span></em>, <em class="sig-param"><span class="n">alphabet</span><span class="o">=</span><span class="default_value">'abcdefghijklmnopqrstuvwxyz'</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/test/util.html#random_formatted_str_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.test.util.random_formatted_str_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Random formatted string generator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format_string</strong> – A format string</p></li>
<li><p><strong>word_size_range</strong> – An int, 2-tuple of ints, or list-like object that defines the choices of word sizes</p></li>
<li><p><strong>alphabet</strong> – A string or iterable defining the alphabet to draw from</p></li>
<li><p><strong>n</strong> – The number of elements the generator will yield</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Yields random strings of the format defined by format_string</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p># &gt;&gt;&gt; list(random_formatted_str_gen(‘root/{}/{}_{}.test’, (2, 5), ‘abc’, n=5))
[(‘root/acba/bb_abc.test’,),</p>
<blockquote>
<div><p>(‘root/abcb/cbbc_ca.test’,),
(‘root/ac/ac_cc.test’,),
(‘root/aacc/ccbb_ab.test’,),
(‘root/aab/abb_cbab.test’,)]</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># The following will be made not random (by restricting the constraints to &quot;no choice&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># ... this is so that we get consistent outputs to assert for the doc test.</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example with automatic specification</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">random_formatted_str_gen</span><span class="p">(</span><span class="s1">&#39;root/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">_</span><span class="si">{}</span><span class="s1">.test&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="go">[(&#39;root/aaa/aaa_aaa.test&#39;,), (&#39;root/aaa/aaa_aaa.test&#39;,)]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example with manual specification</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">random_formatted_str_gen</span><span class="p">(</span><span class="s1">&#39;indexed field: </span><span class="si">{0}</span><span class="s1">: named field: </span><span class="si">{name}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
<span class="go">[(&#39;indexed field: zz: named field: zz&#39;,)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.test.util.random_string">
<code class="sig-prename descclassname">py2store.test.util.</code><code class="sig-name descname">random_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">length</span><span class="o">=</span><span class="default_value">7</span></em>, <em class="sig-param"><span class="n">alphabet</span><span class="o">=</span><span class="default_value">'abcdefghijklmnopqrstuvwxyz'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/test/util.html#random_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.test.util.random_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as random_word, but it optimized for strings
(5-10% faster for words of length 7, 25-30% faster for words of size 1000)</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.test.util.random_tuple_gen">
<code class="sig-prename descclassname">py2store.test.util.</code><code class="sig-name descname">random_tuple_gen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tuple_length</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">word_size_range</span><span class="o">=</span><span class="default_value">(1, 10)</span></em>, <em class="sig-param"><span class="n">alphabet</span><span class="o">=</span><span class="default_value">'abcdefghijklmnopqrstuvwxyz'</span></em>, <em class="sig-param"><span class="n">n</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/test/util.html#random_tuple_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.test.util.random_tuple_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Random tuple (of strings) generator</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tuple_length</strong> – The length of the tuples generated</p></li>
<li><p><strong>word_size_range</strong> – An int, 2-tuple of ints, or list-like object that defines the choices of word sizes</p></li>
<li><p><strong>alphabet</strong> – A string or iterable defining the alphabet to draw from</p></li>
<li><p><strong>n</strong> – The number of elements the generator will yield</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Random tuple (of strings) generator</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py2store.test.util.random_word">
<code class="sig-prename descclassname">py2store.test.util.</code><code class="sig-name descname">random_word</code><span class="sig-paren">(</span><em class="sig-param">length</em>, <em class="sig-param">alphabet</em>, <em class="sig-param">concat_func=&lt;built-in function add&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/test/util.html#random_word"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.test.util.random_word" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a random word by concatenating randomly drawn elements from alphabet together
:param length: Length of the word
:param alphabet: Alphabet to draw from
:param concat_func: The concatenation function (e.g. + for strings and lists)</p>
<p>Note: Repeated elements in alphabet will have more chances of being drawn.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A word (whose type depends on what concatenating elements from alphabet produces).</p>
</dd>
</dl>
<p>Not making this a proper doctest because I don’t know how to seed the global random temporarily
&gt;&gt;&gt; t = random_word(4, ‘abcde’);  # e.g. ‘acae’
&gt;&gt;&gt; t = random_word(5, [‘a’, ‘b’, ‘c’]);  # e.g. ‘cabba’
&gt;&gt;&gt; t = random_word(4, [[1, 2, 3], [40, 50], [600], [7000]]);  # e.g. [40, 50, 7000, 7000, 1, 2, 3]
&gt;&gt;&gt; t = random_word(4, [1, 2, 3, 4]);  # e.g. 13 (because adding numbers…)
&gt;&gt;&gt; # … sometimes it’s what you want:
&gt;&gt;&gt; t = random_word(4, [2 ** x for x in range(8)]);  # e.g. 105 (binary combination)
&gt;&gt;&gt; t = random_word(4, [1, 2, 3, 4], concat_func=lambda x, y: str(x) + str(y));  # e.g. ‘4213’
&gt;&gt;&gt; t = random_word(4, [1, 2, 3, 4], concat_func=lambda x, y: int(str(x) + str(y)));  # e.g. 3432</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.test.util.random_word_gen">
<code class="sig-prename descclassname">py2store.test.util.</code><code class="sig-name descname">random_word_gen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">word_size_range</span><span class="o">=</span><span class="default_value">(1, 10)</span></em>, <em class="sig-param"><span class="n">alphabet</span><span class="o">=</span><span class="default_value">'abcdefghijklmnopqrstuvwxyz'</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">100</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/test/util.html#random_word_gen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.test.util.random_word_gen" title="Permalink to this definition">¶</a></dt>
<dd><p>Random string generator
:param word_size_range: An int, 2-tuple of ints, or list-like object that defines the choices of word sizes
:param alphabet: A string or iterable defining the alphabet to draw from
:param n: The number of elements the generator will yield</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Random string generator</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="py2store-test-quick">
<h1>py2store.test.quick<a class="headerlink" href="#py2store-test-quick" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.test">
<span id="py2store-test"></span><h1>py2store.test<a class="headerlink" href="#module-py2store.test" title="Permalink to this headline">¶</a></h1>
<p>test files</p>
</section>
<section id="py2store-test-simple">
<h1>py2store.test.simple<a class="headerlink" href="#py2store-test-simple" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.test.scrap">
<span id="py2store-test-scrap"></span><h1>py2store.test.scrap<a class="headerlink" href="#module-py2store.test.scrap" title="Permalink to this headline">¶</a></h1>
<p>scrap code</p>
</section>
<section id="module-py2store.util">
<span id="py2store-util"></span><h1>py2store.util<a class="headerlink" href="#module-py2store.util" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.util:</p>
<p>General util objects</p>
</section>
<section id="module-py2store.ext.docx">
<span id="py2store-ext-docx"></span><h1>py2store.ext.docx<a class="headerlink" href="#module-py2store.ext.docx" title="Permalink to this headline">¶</a></h1>
<p>Simple access to docx (Word Doc) elements.</p>
</section>
<section id="module-py2store.ext.gitlab">
<span id="py2store-ext-gitlab"></span><h1>py2store.ext.gitlab<a class="headerlink" href="#module-py2store.ext.gitlab" title="Permalink to this headline">¶</a></h1>
<p>Stores to talk to gitlab, using requests.</p>
<p>Example:
<a href="#id1"><span class="problematic" id="id2">``</span></a>`
ogl = GitLabAccessor(base_url=”<a class="reference external" href="http://">http://</a>…”, project_name=None)</p>
<p>print(ogl.get_project_names())  # prints all project names
ogl.set_project(“PROJECT_NAME”)  # sets the project to “PROJECT_NAME”
print(</p>
<blockquote>
<div><p>ogl.get_branch_names()</p>
</div></blockquote>
<p>)  # gets the branch names of current project (as set previously)
print(</p>
<blockquote>
<div><p>ogl.get_branch(“master”)</p>
</div></blockquote>
<p>)  # gets a json of information about the master branch of current project.
<a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></p>
</section>
<section id="module-py2store.ext.hdf">
<span id="py2store-ext-hdf"></span><h1>py2store.ext.hdf<a class="headerlink" href="#module-py2store.ext.hdf" title="Permalink to this headline">¶</a></h1>
<p>a data object layer for HDF files</p>
</section>
<section id="module-py2store.ext">
<span id="py2store-ext"></span><h1>py2store.ext<a class="headerlink" href="#module-py2store.ext" title="Permalink to this headline">¶</a></h1>
<p>py2store Extensions, Add-ons, etc.
We kept py2store purely dependency-less, using only built-ins for everything but storage system connectors.</p>
<p>That said, in order to provide the user with more power, and show him/her how py2store tools can be used to build
powerful data accessors, we provide specialized modules that do require more than builtins. These dependencies are
not listed in the setup.py module, but we wrap their imports with informative ImportError handlers.</p>
</section>
<section id="module-py2store.ext.matlab">
<span id="py2store-ext-matlab"></span><h1>py2store.ext.matlab<a class="headerlink" href="#module-py2store.ext.matlab" title="Permalink to this headline">¶</a></h1>
<p>a data object layer for matlab</p>
</section>
<section id="py2store-ext-kaggle">
<h1>py2store.ext.kaggle<a class="headerlink" href="#py2store-ext-kaggle" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-ext-module-imports">
<h1>py2store.ext.module_imports<a class="headerlink" href="#py2store-ext-module-imports" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-ext-audio">
<h1>py2store.ext.audio<a class="headerlink" href="#py2store-ext-audio" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.ext.github">
<span id="py2store-ext-github"></span><h1>py2store.ext.github<a class="headerlink" href="#module-py2store.ext.github" title="Permalink to this headline">¶</a></h1>
<p>a data object layer for github</p>
</section>
<section id="module-py2store.ext.dataframes">
<span id="py2store-ext-dataframes"></span><h1>py2store.ext.dataframes<a class="headerlink" href="#module-py2store.ext.dataframes" title="Permalink to this headline">¶</a></h1>
<p>Data as <cite>pandas.DataFrame</cite> from various sources</p>
</section>
<section id="module-py2store.access">
<span id="py2store-access"></span><h1>py2store.access<a class="headerlink" href="#module-py2store.access" title="Permalink to this headline">¶</a></h1>
<p>Utils to load stores from store specifications.
Includes the logic to allow configurations (and defaults) to be parametrized by external environmental
variables and files.</p>
<p>Every data-sourced problem has it’s problem-relevant stores. Once you get your stores right, along with the
right access credentials, indexing, serialization, caching, filtering etc. you’d like to be able to name, save
and/or share this specification, and easily get access to it later on.</p>
<p>Here are tools to help you out.</p>
<p>There are two main key-value stores: One for configurations the user wants to reuse, and the other for the user’s
desired defaults. Both have the same structure:</p>
<blockquote>
<div><ul class="simple">
<li><p>first level key: Name of the resource (should be a valid python variable name)</p></li>
<li><p>The reminder is more or less free form (until the day we lay out some schemas for this)</p></li>
</ul>
</div></blockquote>
<p>The system will look for the specification of user_configs and user_defaults in a json file.
The filepath to this json file can specified in environment variables</p>
<blockquote>
<div><p>PY2STORE_CONFIGS_JSON_FILEPATH and PY2STORE_DEFAULTS_JSON_FILEPATH</p>
</div></blockquote>
<p>respectively.
By default, they are:</p>
<blockquote>
<div><p>~/.py2store_configs.json and ~/.py2store_defaults.json</p>
</div></blockquote>
<p>respectively.</p>
<dl class="py function">
<dt id="py2store.access.compose">
<code class="sig-prename descclassname">py2store.access.</code><code class="sig-name descname">compose</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">functions</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/access.html#compose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.access.compose" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a function that is the composition of the input functions</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.access.dflt_func_loader">
<code class="sig-prename descclassname">py2store.access.</code><code class="sig-name descname">dflt_func_loader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">f</span></em><span class="sig-paren">)</span> &#x2192; callable<a class="reference internal" href="_modules/py2store/access.html#dflt_func_loader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.access.dflt_func_loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads and returns the function referenced by f,
which could be a callable or a DOTPATH_TO_MODULE.FUNC_NAME dotpath string to one, or a pipeline of these</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.access.dotpath_to_func">
<code class="sig-prename descclassname">py2store.access.</code><code class="sig-name descname">dotpath_to_func</code><span class="sig-paren">(</span><em class="sig-param">f: (&lt;class 'str'&gt;</em>, <em class="sig-param">&lt;built-in function callable&gt;)</em><span class="sig-paren">)</span> &#x2192; callable<a class="reference internal" href="_modules/py2store/access.html#dotpath_to_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.access.dotpath_to_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads and returns the function referenced by f,
which could be a callable or a DOTPATH_TO_MODULE.FUNC_NAME dotpath string to one.</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.access.dotpath_to_obj">
<code class="sig-prename descclassname">py2store.access.</code><code class="sig-name descname">dotpath_to_obj</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dotpath</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/access.html#dotpath_to_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.access.dotpath_to_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads and returns the object referenced by the string DOTPATH_TO_MODULE.OBJ_NAME</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.access.fakit">
<code class="sig-prename descclassname">py2store.access.</code><code class="sig-name descname">fakit</code><span class="sig-paren">(</span><em class="sig-param">fak</em>, <em class="sig-param">func_loader=&lt;function dflt_func_loader&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/access.html#fakit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.access.fakit" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute a fak with given f, a, k and function loader.</p>
<p>Essentially returns func_loader(f)(<a href="#id7"><span class="problematic" id="id8">*</span></a>a, <a href="#id9"><span class="problematic" id="id10">**</span></a>k)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fak</strong> – A (f, a, k) specification. Could be a tuple or a dict (with ‘f’, ‘a’, ‘k’ keys). All but f are optional.</p></li>
<li><p><strong>func_loader</strong> – A function returning a function. This is where you specify any validation of func specification f,
and/or how to get a callable from it.</p></li>
</ul>
</dd>
</dl>
<p>Returns: A python object.</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.access.getenv">
<code class="sig-prename descclassname">py2store.access.</code><code class="sig-name descname">getenv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/access.html#getenv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.access.getenv" title="Permalink to this definition">¶</a></dt>
<dd><p>Like os.getenv, but removes a suffix r character if present (problem with some env var systems)</p>
</dd></dl>

</section>
<section id="module-py2store.__init__">
<span id="py2store-init"></span><h1>py2store.__init__<a class="headerlink" href="#module-py2store.__init__" title="Permalink to this headline">¶</a></h1>
<p>Your portal to many Data Object Layer goodies</p>
<dl class="py function">
<dt id="py2store.__init__.ihead">
<code class="sig-prename descclassname">py2store.__init__.</code><code class="sig-name descname">ihead</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/__init__.html#ihead"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.__init__.ihead" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first item of an iterable, or a list of the first n items</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.__init__.kvhead">
<code class="sig-prename descclassname">py2store.__init__.</code><code class="sig-name descname">kvhead</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/__init__.html#kvhead"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.__init__.kvhead" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the first item of a kv store, or a list of the first n items</p>
</dd></dl>

</section>
<section id="module-py2store.stores.s3_store">
<span id="py2store-stores-s3-store"></span><h1>py2store.stores.s3_store<a class="headerlink" href="#module-py2store.stores.s3_store" title="Permalink to this headline">¶</a></h1>
<p>Forwards to s3dol.s3_store</p>
</section>
<section id="py2store-stores-delegation-stores">
<h1>py2store.stores.delegation_stores<a class="headerlink" href="#py2store-stores-delegation-stores" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.stores.sql_w_sqlalchemy">
<span id="py2store-stores-sql-w-sqlalchemy"></span><h1>py2store.stores.sql_w_sqlalchemy<a class="headerlink" href="#module-py2store.stores.sql_w_sqlalchemy" title="Permalink to this headline">¶</a></h1>
<p>Forwards to sqldol</p>
</section>
<section id="py2store-stores-arangodb-store">
<h1>py2store.stores.arangodb_store<a class="headerlink" href="#py2store-stores-arangodb-store" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.stores.dropbox_store">
<span id="py2store-stores-dropbox-store"></span><h1>py2store.stores.dropbox_store<a class="headerlink" href="#module-py2store.stores.dropbox_store" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dropboxdol</p>
</section>
<section id="module-py2store.stores.local_store">
<span id="py2store-stores-local-store"></span><h1>py2store.stores.local_store<a class="headerlink" href="#module-py2store.stores.local_store" title="Permalink to this headline">¶</a></h1>
<p>stores to operate on local files</p>
<dl class="py class">
<dt id="py2store.stores.local_store.AutoMkDirsOnSetitemMixin">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">AutoMkDirsOnSetitemMixin</code><a class="reference internal" href="_modules/py2store/stores/local_store.html#AutoMkDirsOnSetitemMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.AutoMkDirsOnSetitemMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin that will automatically create directories on setitem, when missing.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.AutoMkPathformatMixin">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">AutoMkPathformatMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#AutoMkPathformatMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.AutoMkPathformatMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin that will choose a path_format if none given</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.DirStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">DirStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rootdir</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#DirStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.DirStore" title="Permalink to this definition">¶</a></dt>
<dd><p>A store for local directories.
Keys are directory names and values are subdirectory DirStores.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">py2store</span> <span class="kn">import</span> <span class="vm">__file__</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">DirStore</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">set</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">issuperset</span><span class="p">({</span><span class="s1">&#39;stores&#39;</span><span class="p">,</span> <span class="s1">&#39;persisters&#39;</span><span class="p">,</span> <span class="s1">&#39;serializers&#39;</span><span class="p">,</span> <span class="s1">&#39;key_mappers&#39;</span><span class="p">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.LocalBinaryStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">LocalBinaryStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#LocalBinaryStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.LocalBinaryStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store for binary data</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.LocalJsonStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">LocalJsonStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#LocalJsonStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.LocalJsonStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store for text dataData is assumed to be a JSON string, and is loaded with json.loads and dumped with json.dumps</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.LocalPickleStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">LocalPickleStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fix_imports</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">protocol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pickle_encoding</span><span class="o">=</span><span class="default_value">'ASCII'</span></em>, <em class="sig-param"><span class="n">pickle_errors</span><span class="o">=</span><span class="default_value">'strict'</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">open_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#LocalPickleStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.LocalPickleStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store with pickle serialization</p>
</dd></dl>

<dl class="py attribute">
<dt id="py2store.stores.local_store.LocalStore">
<code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">LocalStore</code><a class="headerlink" href="#py2store.stores.local_store.LocalStore" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#py2store.stores.local_store.QuickPickleStore" title="py2store.stores.local_store.QuickPickleStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">py2store.stores.local_store.QuickPickleStore</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.LocalTextStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">LocalTextStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#LocalTextStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.LocalTextStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store for text data</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.MakeMissingDirsStoreMixin">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">MakeMissingDirsStoreMixin</code><a class="reference internal" href="_modules/py2store/stores/local_store.html#MakeMissingDirsStoreMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.MakeMissingDirsStoreMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Will make a local file store automatically create the directories needed to create a file.
Should be placed before the concrete perisister in the mro but in such a manner so that it receives full paths.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.PathFormatStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">PathFormatStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">inf</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">open_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#PathFormatStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.PathFormatStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local file store using templated relative paths.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">gettempdir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">write_to_key</span><span class="p">(</span><span class="n">fullpath_of_relative_path</span><span class="p">,</span> <span class="n">relative_path</span><span class="p">,</span> <span class="n">content</span><span class="p">):</span>  <span class="c1"># a function to write content in files</span>
<span class="gp">... </span>   <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath_of_relative_path</span><span class="p">(</span><span class="n">relative_path</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
<span class="gp">... </span>       <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Preparation: Make a temporary rootdir and write two files in it</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rootdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">gettempdir</span><span class="p">(),</span> <span class="s1">&#39;path_format_store_test&#39;</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># recreate directory (remove existing files, delete directory, and re-create it)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">fullpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fullpath</span><span class="p">):</span>
<span class="gp">... </span>        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">rootdir</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath_of</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>  <span class="c1"># a function to get a fullpath from a relative one</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and make two files in this new dir, with some content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># point the obj source to the rootdir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">PathFormatStore</span><span class="p">(</span><span class="n">path_format</span><span class="o">=</span><span class="n">rootdir</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assert things...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">s</span><span class="o">.</span><span class="n">_prefix</span> <span class="o">==</span> <span class="n">rootdir</span>  <span class="c1"># the _rootdir is the one given in constructor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">s</span><span class="p">[</span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)]</span> <span class="o">==</span> <span class="s1">&#39;foo&#39;</span>  <span class="c1"># (the filepath for) &#39;a&#39; contains &#39;foo&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># two files under rootdir (as long as the OS didn&#39;t create it&#39;s own under the hood)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)]</span>  <span class="c1"># there&#39;s two files in s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">s</span>  <span class="c1"># rootdir/a is in s</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;not_there&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">s</span>  <span class="c1"># rootdir/not_there is not in s</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;not_there&#39;</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span>  <span class="c1"># rootdir/not_there is not in s</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)]</span>  <span class="c1"># the keys (filepaths) of s</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span> <span class="c1"># the values of s (contents of files)</span>
<span class="go">[&#39;bar&#39;, &#39;foo&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">items</span><span class="p">())</span> <span class="o">==</span> <span class="p">[(</span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="s1">&#39;foo&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">filepath_of</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="s1">&#39;bar&#39;</span><span class="p">)]</span>  <span class="c1"># the (path, content) items</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;this key is not there&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>  <span class="c1"># trying to get the val of a non-existing key returns None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;this key is not there&#39;</span><span class="p">,</span> <span class="s1">&#39;some default value&#39;</span><span class="p">)</span>  <span class="c1"># ... or whatever you say</span>
<span class="go">&#39;some default value&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># add more files to the same folder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;this.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;that.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;blah&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;the_other.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;bloo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># see that you now have 5 files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and these files contain values:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="go">[&#39;bar&#39;, &#39;blah&#39;, &#39;bloo&#39;, &#39;foo&#39;, &#39;this&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># but if we make an obj source to only take files whose extension is &#39;.txt&#39;...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">PathFormatStore</span><span class="p">(</span><span class="n">path_format</span><span class="o">=</span><span class="n">rootdir</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.txt&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rootdir_2</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">gettempdir</span><span class="p">(),</span> <span class="s1">&#39;obj_source_test_2&#39;</span><span class="p">)</span> <span class="c1"># get another rootdir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">rootdir_2</span><span class="p">):</span>
<span class="gp">... </span>   <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">rootdir_2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath_of_2</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir_2</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># and make two files in this new dir, with some content</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;this.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;that.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;blah&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_to_key</span><span class="p">(</span><span class="n">filepath_of</span><span class="p">,</span> <span class="s1">&#39;the_other.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;bloo&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss</span> <span class="o">=</span> <span class="n">PathFormatStore</span><span class="p">(</span><span class="n">path_format</span><span class="o">=</span><span class="n">rootdir_2</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{}</span><span class="s1">.txt&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">s</span> <span class="o">!=</span> <span class="n">ss</span>  <span class="c1"># though pointing to identical content, o and oo are not equal since the paths are not equal!</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.PathFormatStoreWithPrefix">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">PathFormatStoreWithPrefix</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#PathFormatStoreWithPrefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.PathFormatStoreWithPrefix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="py2store.stores.local_store.PickleStore">
<code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">PickleStore</code><a class="headerlink" href="#py2store.stores.local_store.PickleStore" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#py2store.stores.local_store.LocalPickleStore" title="py2store.stores.local_store.LocalPickleStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">py2store.stores.local_store.LocalPickleStore</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.QuickBinaryStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">QuickBinaryStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#QuickBinaryStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.QuickBinaryStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store for binary data with default temp root and auto dir generation on write.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.QuickJsonStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">QuickJsonStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#QuickJsonStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.QuickJsonStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store for text data with default temp root and auto dir generation on write.Data is assumed to be a JSON string, and is loaded with json.loads and dumped with json.dumps</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.QuickLocalStoreMixin">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">QuickLocalStoreMixin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#QuickLocalStoreMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.QuickLocalStoreMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>A mixin that will choose a path_format if none given,
and will automatically create directories on setitem, when missing.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.QuickPickleStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">QuickPickleStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#QuickPickleStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.QuickPickleStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store with pickle serialization with default temp root and auto dir generation on write.</p>
</dd></dl>

<dl class="py attribute">
<dt id="py2store.stores.local_store.QuickStore">
<code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">QuickStore</code><a class="headerlink" href="#py2store.stores.local_store.QuickStore" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#py2store.stores.local_store.QuickPickleStore" title="py2store.stores.local_store.QuickPickleStore"><code class="xref py py-class docutils literal notranslate"><span class="pre">py2store.stores.local_store.QuickPickleStore</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.QuickTextStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">QuickTextStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#QuickTextStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.QuickTextStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Local files store for text data with default temp root and auto dir generation on write.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.RelativeDirPathFormatKeys">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">RelativeDirPathFormatKeys</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#RelativeDirPathFormatKeys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.RelativeDirPathFormatKeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.stores.local_store.RelativePathFormatStore2">
<em class="property">class </em><code class="sig-prename descclassname">py2store.stores.local_store.</code><code class="sig-name descname">RelativePathFormatStore2</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/stores/local_store.html#RelativePathFormatStore2"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.stores.local_store.RelativePathFormatStore2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-py2store.stores">
<span id="py2store-stores"></span><h1>py2store.stores<a class="headerlink" href="#module-py2store.stores" title="Permalink to this headline">¶</a></h1>
<p>a package of various stores</p>
</section>
<section id="py2store-stores-couchdb-store">
<h1>py2store.stores.couchdb_store<a class="headerlink" href="#py2store-stores-couchdb-store" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-stores-mongo-store">
<h1>py2store.stores.mongo_store<a class="headerlink" href="#py2store-stores-mongo-store" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.core">
<span id="py2store-core"></span><h1>py2store.core<a class="headerlink" href="#module-py2store.core" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.core:</p>
<p>Core tools</p>
</section>
<section id="module-py2store.utils.uri_utils">
<span id="py2store-utils-uri-utils"></span><h1>py2store.utils.uri_utils<a class="headerlink" href="#module-py2store.utils.uri_utils" title="Permalink to this headline">¶</a></h1>
<p>utils to work with URIs</p>
<dl class="py function">
<dt id="py2store.utils.uri_utils.build_uri">
<code class="sig-prename descclassname">py2store.utils.uri_utils.</code><code class="sig-name descname">build_uri</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">scheme</span></em>, <em class="sig-param"><span class="n">database</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">username</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">password</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">host</span><span class="o">=</span><span class="default_value">'localhost'</span></em>, <em class="sig-param"><span class="n">port</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/uri_utils.html#build_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.uri_utils.build_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse of <cite>parse_uri</cite> function.
Builds a URI string from provided params.</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.uri_utils.parse_uri">
<code class="sig-prename descclassname">py2store.utils.uri_utils.</code><code class="sig-name descname">parse_uri</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">uri</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/uri_utils.html#parse_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.uri_utils.parse_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses DB URI string into a dict of params.
:param uri: string formatted as: “scheme://username:password&#64;host:port/database”
:return: a dict with these params parsed.</p>
</dd></dl>

</section>
<section id="module-py2store.utils.explicit">
<span id="py2store-utils-explicit"></span><h1>py2store.utils.explicit<a class="headerlink" href="#module-py2store.utils.explicit" title="Permalink to this headline">¶</a></h1>
<p>utils to make stores based on a the input data itself</p>
<dl class="py class">
<dt id="py2store.utils.explicit.ExplicitKeymapReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.explicit.</code><code class="sig-name descname">ExplicitKeymapReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store</span></em>, <em class="sig-param"><span class="n">key_of_id</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">id_of_key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/explicit.html#ExplicitKeymapReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.explicit.ExplicitKeymapReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a store (instance) so that it gets it’s keys from an explicit iterable of keys.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">id_of_key</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss</span> <span class="o">=</span> <span class="n">ExplicitKeymapReader</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">id_of_key</span><span class="o">=</span><span class="n">id_of_key</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
<span class="go">[&#39;A&#39;, &#39;C&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">]</span>  <span class="c1"># will look up &#39;C&#39;, find &#39;c&#39;, and call the store on that.</span>
<span class="go">3</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.explicit.ExplicitKeys">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.explicit.</code><code class="sig-name descname">ExplicitKeys</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key_collection</span><span class="p">:</span> <span class="n">Collection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/explicit.html#ExplicitKeys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.explicit.ExplicitKeys" title="Permalink to this definition">¶</a></dt>
<dd><p>py2store.base.Keys implementation that gets it’s keys explicitly from a collection given at initialization time.
The key_collection must be a collections.abc.Collection (such as list, tuple, set, etc.)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">keys</span> <span class="o">=</span> <span class="n">ExplicitKeys</span><span class="p">(</span><span class="n">key_collection</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;alice&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;foo&#39;</span> <span class="ow">in</span> <span class="n">keys</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;not there&#39;</span> <span class="ow">in</span> <span class="n">keys</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
<span class="go">[&#39;foo&#39;, &#39;bar&#39;, &#39;alice&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.explicit.ExplicitKeysSource">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.explicit.</code><code class="sig-name descname">ExplicitKeysSource</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key_collection</span><span class="p">:</span> <span class="n">Collection</span></em>, <em class="sig-param"><span class="n">_obj_of_key</span><span class="p">:</span> <span class="n">Callable</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/explicit.html#ExplicitKeysSource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.explicit.ExplicitKeysSource" title="Permalink to this definition">¶</a></dt>
<dd><p>An object source that uses an explicit keys collection and a specified function to read contents for a key.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.explicit.ExplicitKeysStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.explicit.</code><code class="sig-name descname">ExplicitKeysStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store</span></em>, <em class="sig-param"><span class="n">key_collection</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/explicit.html#ExplicitKeysStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.explicit.ExplicitKeysStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap a store (instance) so that it gets it’s keys from an explicit iterable of keys.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss</span> <span class="o">=</span> <span class="n">ExplicitKeysStore</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
<span class="go">[&#39;d&#39;, &#39;a&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ss</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="go">[4, 1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">(&#39;d&#39;, 4)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.explicit.ExplicitKeysWithPrefixRelativization">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.explicit.</code><code class="sig-name descname">ExplicitKeysWithPrefixRelativization</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key_collection</span></em>, <em class="sig-param"><span class="n">_prefix</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/explicit.html#ExplicitKeysWithPrefixRelativization"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.explicit.ExplicitKeysWithPrefixRelativization" title="Permalink to this definition">¶</a></dt>
<dd><p>py2store.base.Keys implementation that gets it’s keys explicitly from a collection given at initialization time.
The key_collection must be a collections.abc.Collection (such as list, tuple, set, etc.)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">py2store.base</span> <span class="kn">import</span> <span class="n">Store</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">ExplicitKeysWithPrefixRelativization</span><span class="p">(</span><span class="n">key_collection</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;/root/of/foo&#39;</span><span class="p">,</span> <span class="s1">&#39;/root/of/bar&#39;</span><span class="p">,</span> <span class="s1">&#39;/root/for/alice&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">keys</span> <span class="o">=</span> <span class="n">Store</span><span class="p">(</span><span class="n">store</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;of/foo&#39;</span> <span class="ow">in</span> <span class="n">keys</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;not there&#39;</span> <span class="ow">in</span> <span class="n">keys</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
<span class="go">[&#39;of/foo&#39;, &#39;of/bar&#39;, &#39;for/alice&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.explicit.ObjReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.explicit.</code><code class="sig-name descname">ObjReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">_obj_of_key</span><span class="p">:</span> <span class="n">Callable</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/explicit.html#ObjReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.explicit.ObjReader" title="Permalink to this definition">¶</a></dt>
<dd><p>A reader that uses a specified function to get the contents for a given key.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># define a contents_of_key that reads stuff from a dict</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="mi">42</span><span class="p">:</span> <span class="s2">&quot;everything&quot;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">read_dict</span><span class="p">(</span><span class="n">k</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pr</span> <span class="o">=</span> <span class="n">ObjReader</span><span class="p">(</span><span class="n">_obj_of_key</span><span class="o">=</span><span class="n">read_dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pr</span><span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">]</span>
<span class="go">&#39;bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pr</span><span class="p">[</span><span class="mi">42</span><span class="p">]</span>
<span class="go">&#39;everything&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># define contents_of_key that reads stuff from a file given it&#39;s path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pr</span> <span class="o">=</span> <span class="n">ObjReader</span><span class="p">(</span><span class="n">_obj_of_key</span><span class="o">=</span><span class="n">read_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">file_where_this_code_is</span> <span class="o">=</span> <span class="vm">__file__</span>  <span class="c1"># it should be THIS file you&#39;re reading right now!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">pr</span><span class="p">[</span><span class="n">file_where_this_code_is</span><span class="p">][</span><span class="mi">62</span><span class="p">:</span><span class="mi">155</span><span class="p">])</span>  <span class="c1"># print some characters of this file</span>
<span class="go">from collections.abc import Mapping</span>
<span class="go">from typing import Callable, Collection as CollectionType</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.explicit.invertible_maps">
<code class="sig-prename descclassname">py2store.utils.explicit.</code><code class="sig-name descname">invertible_maps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mapping</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">inv_mapping</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/explicit.html#invertible_maps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.explicit.invertible_maps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns two maps that are inverse of each other.
Raises an AssertionError iif both maps are None, or if the maps are not inverse of each other</p>
<p>Get a pair of invertible maps
&gt;&gt;&gt; invertible_maps({1: 11, 2: 22})
({1: 11, 2: 22}, {11: 1, 22: 2})
&gt;&gt;&gt; invertible_maps(None, {11: 1, 22: 2})
({1: 11, 2: 22}, {11: 1, 22: 2})</p>
<p>If two maps are given and invertible, you just get them back
&gt;&gt;&gt; invertible_maps({1: 11, 2: 22}, {11: 1, 22: 2})
({1: 11, 2: 22}, {11: 1, 22: 2})</p>
<p>Or if they’re not invertible
&gt;&gt;&gt; invertible_maps({1: 11, 2: 22}, {11: 1, 22: ‘ha, not what you expected!’})
Traceback (most recent call last):</p>
<blockquote>
<div><p>…</p>
</div></blockquote>
<p>AssertionError: mapping and inv_mapping are not inverse of each other!</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">invertible_maps</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  <span class="c">...</span>
<span class="gr">ValueError</span>: <span class="n">You need to specify one or both maps</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.utils.timeseries_caching">
<span id="py2store-utils-timeseries-caching"></span><h1>py2store.utils.timeseries_caching<a class="headerlink" href="#module-py2store.utils.timeseries_caching" title="Permalink to this headline">¶</a></h1>
<p>Tools to cache time-series data.</p>
<dl class="py class">
<dt id="py2store.utils.timeseries_caching.RegularTimeseriesCache">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.timeseries_caching.</code><code class="sig-name descname">RegularTimeseriesCache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data_rate</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">time_rate</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">maxlen</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/timeseries_caching.html#RegularTimeseriesCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.timeseries_caching.RegularTimeseriesCache" title="Permalink to this definition">¶</a></dt>
<dd><p>A type that pretends to be a (possibly very large) list, but where contents of the list are populated as they are
needed. Further, the indexing of the list can be overwritten for the convenience of the user.</p>
<p>The canonical application is where we have segments of continuous waveform indexed by utc microseconds timestamps.</p>
<p>It is convenient to be able to read segments of this waveform as if it was one big waveform (handling the
discontinuities gracefully), and have the choice of using (relative or absolute) integer indices or utc indices.</p>
</dd></dl>

</section>
<section id="py2store-utils-attr-dict-py-attr-dict">
<h1>py2store.utils.attr_dict.py.attr_dict<a class="headerlink" href="#py2store-utils-attr-dict-py-attr-dict" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-utils-attr-dict-py">
<h1>py2store.utils.attr_dict.py<a class="headerlink" href="#py2store-utils-attr-dict-py" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.utils.cumul_aggreg_write">
<span id="py2store-utils-cumul-aggreg-write"></span><h1>py2store.utils.cumul_aggreg_write<a class="headerlink" href="#module-py2store.utils.cumul_aggreg_write" title="Permalink to this headline">¶</a></h1>
<p>utils for bulk writing – accumulate, aggregate and write when some condition is met</p>
<dl class="py class">
<dt id="py2store.utils.cumul_aggreg_write.CumulAggregWrite">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.cumul_aggreg_write.</code><code class="sig-name descname">CumulAggregWrite</code><span class="sig-paren">(</span><em class="sig-param">store</em>, <em class="sig-param">cache_to_kv=&lt;function mk_kv_from_keygen.&lt;locals&gt;.aggregate&gt;</em>, <em class="sig-param">mk_cache=&lt;class 'list'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cumul_aggreg_write.html#CumulAggregWrite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cumul_aggreg_write.CumulAggregWrite" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.utils.cumul_aggreg_write.CumulAggregWriteKvItems">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.cumul_aggreg_write.</code><code class="sig-name descname">CumulAggregWriteKvItems</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cumul_aggreg_write.html#CumulAggregWriteKvItems"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cumul_aggreg_write.CumulAggregWriteKvItems" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.utils.cumul_aggreg_write.CumulAggregWriteWithAutoFlush">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.cumul_aggreg_write.</code><code class="sig-name descname">CumulAggregWriteWithAutoFlush</code><span class="sig-paren">(</span><em class="sig-param">store</em>, <em class="sig-param">cache_to_kv=&lt;function mk_kv_from_keygen.&lt;locals&gt;.aggregate&gt;</em>, <em class="sig-param">mk_cache=&lt;class 'list'&gt;</em>, <em class="sig-param">flush_cache_condition=&lt;function condition_flush_on_every_write&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cumul_aggreg_write.html#CumulAggregWriteWithAutoFlush"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cumul_aggreg_write.CumulAggregWriteWithAutoFlush" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="py2store.utils.cumul_aggreg_write.condition_flush_on_every_write">
<code class="sig-prename descclassname">py2store.utils.cumul_aggreg_write.</code><code class="sig-name descname">condition_flush_on_every_write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cache</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cumul_aggreg_write.html#condition_flush_on_every_write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cumul_aggreg_write.condition_flush_on_every_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean function used as flush_cache_condition to anytime the cache is non-empty</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.cumul_aggreg_write.mk_group_aggregator">
<code class="sig-prename descclassname">py2store.utils.cumul_aggreg_write.</code><code class="sig-name descname">mk_group_aggregator</code><span class="sig-paren">(</span><em class="sig-param">item_to_kv</em>, <em class="sig-param">aggregator_op=&lt;built-in function add&gt;</em>, <em class="sig-param">initial=&lt;py2store.utils.cumul_aggreg_write.NoInitial object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cumul_aggreg_write.html#mk_group_aggregator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cumul_aggreg_write.mk_group_aggregator" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a generator transforming function that will
(a) make a key for each given item,
(b) group all items according to the key</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_to_kv</strong> – </p></li>
<li><p><strong>aggregator_op</strong> – </p></li>
<li><p><strong>initial</strong> – </p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collect words (as a csv string), grouped by the lower case of the first letter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ag</span> <span class="o">=</span> <span class="n">mk_group_aggregator</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">item</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">aggregator_op</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ag</span><span class="p">([</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;bananna&#39;</span><span class="p">,</span> <span class="s1">&#39;Airplane&#39;</span><span class="p">]))</span>
<span class="go">[(&#39;a&#39;, &#39;apple, Airplane&#39;), (&#39;b&#39;, &#39;bananna&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collect (and concatinate)  characters according to their ascii value modulo 3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ag</span> <span class="o">=</span> <span class="n">mk_group_aggregator</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;thing&#39;</span><span class="p">]),</span>
<span class="gp">... </span>                         <span class="n">aggregator_op</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="p">[</span><span class="n">y</span><span class="p">],</span>
<span class="gp">... </span>                         <span class="n">initial</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ag</span><span class="p">([{</span><span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;thing&#39;</span><span class="p">:</span> <span class="s1">&#39;new&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="s1">&#39;thing&#39;</span><span class="p">:</span> <span class="s1">&#39;every&#39;</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;thing&#39;</span><span class="p">:</span> <span class="s1">&#39;just born&#39;</span><span class="p">}]))</span>
<span class="go">[(0, [&#39;new&#39;, &#39;just born&#39;]), (42, [&#39;every&#39;])]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.cumul_aggreg_write.mk_group_aggregator_with_key_func">
<code class="sig-prename descclassname">py2store.utils.cumul_aggreg_write.</code><code class="sig-name descname">mk_group_aggregator_with_key_func</code><span class="sig-paren">(</span><em class="sig-param">item_to_key</em>, <em class="sig-param">aggregator_op=&lt;built-in function add&gt;</em>, <em class="sig-param">initial=&lt;py2store.utils.cumul_aggreg_write.NoInitial object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cumul_aggreg_write.html#mk_group_aggregator_with_key_func"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cumul_aggreg_write.mk_group_aggregator_with_key_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a generator transforming function that will
(a) make a key for each given item,
(b) group all items according to the key</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>item_to_key</strong> – Function that takes an item of the generator and outputs the key that should be used to group items</p></li>
<li><p><strong>aggregator_op</strong> – The aggregation binary function that is used to aggregate two items together.
The function is used as is by the functools.reduce, applied to the sequence of items that were collected for
a given group</p></li>
<li><p><strong>initial</strong> – The “empty” element to start the reduce (aggregation) with, if necessary.</p></li>
</ul>
</dd>
</dl>
<p>Returns:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collect words (as a csv string), grouped by the lower case of the first letter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ag</span> <span class="o">=</span> <span class="n">mk_group_aggregator_with_key_func</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
<span class="gp">... </span>                         <span class="n">aggregator_op</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ag</span><span class="p">([</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;bananna&#39;</span><span class="p">,</span> <span class="s1">&#39;Airplane&#39;</span><span class="p">]))</span>
<span class="go">[(&#39;a&#39;, &#39;apple, Airplane&#39;), (&#39;b&#39;, &#39;bananna&#39;)]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Collect (and concatenate) characters according to their ascii value modulo 3</span>
<span class="gp">... </span><span class="n">ag</span> <span class="o">=</span> <span class="n">mk_group_aggregator_with_key_func</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">%</span> <span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ag</span><span class="p">(</span><span class="s1">&#39;abcdefghijklmnop&#39;</span><span class="p">))</span>
<span class="go">[(1, &#39;adgjmp&#39;), (2, &#39;behkn&#39;), (0, &#39;cfilo&#39;)]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># sum all even and odd number separately</span>
<span class="gp">... </span><span class="n">ag</span> <span class="o">=</span> <span class="n">mk_group_aggregator_with_key_func</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="p">(</span><span class="n">item</span> <span class="o">%</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ag</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>  <span class="c1"># sum of evens is 6, and sum of odds is 9</span>
<span class="go">[(1, 9), (0, 6)]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># if we wanted to collect all odds and evens, we&#39;d need a different aggregator and initial</span>
<span class="gp">... </span><span class="n">ag</span> <span class="o">=</span> <span class="n">mk_group_aggregator_with_key_func</span><span class="p">(</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="p">(</span><span class="n">item</span> <span class="o">%</span> <span class="mi">2</span><span class="p">),</span> <span class="n">aggregator_op</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="p">[</span><span class="n">y</span><span class="p">],</span> <span class="n">initial</span><span class="o">=</span><span class="p">[])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">ag</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]))</span>
<span class="go">[(1, [1, 3, 5]), (0, [2, 4])]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.utils">
<span id="py2store-utils"></span><h1>py2store.utils<a class="headerlink" href="#module-py2store.utils" title="Permalink to this headline">¶</a></h1>
<p>general utils</p>
</section>
<section id="module-py2store.utils.cache_descriptors">
<span id="py2store-utils-cache-descriptors"></span><h1>py2store.utils.cache_descriptors<a class="headerlink" href="#module-py2store.utils.cache_descriptors" title="Permalink to this headline">¶</a></h1>
<p>descriptors to cache data</p>
<dl class="py function">
<dt id="py2store.utils.cache_descriptors.CachedProperty">
<code class="sig-prename descclassname">py2store.utils.cache_descriptors.</code><code class="sig-name descname">CachedProperty</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cache_descriptors.html#CachedProperty"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cache_descriptors.CachedProperty" title="Permalink to this definition">¶</a></dt>
<dd><p>CachedProperties.
This is usable directly as a decorator when given names, or when not. Any of these patterns
will work:
* <code class="docutils literal notranslate"><span class="pre">&#64;CachedProperty</span></code>
* <code class="docutils literal notranslate"><span class="pre">&#64;CachedProperty()</span></code>
* <code class="docutils literal notranslate"><span class="pre">&#64;CachedProperty('n','n2')</span></code>
* def thing(self: …; thing = CachedProperty(thing)
* def thing(self: …; thing = CachedProperty(thing, ‘n’)</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.cache_descriptors.Lazy">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.cache_descriptors.</code><code class="sig-name descname">Lazy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cache_descriptors.html#Lazy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cache_descriptors.Lazy" title="Permalink to this definition">¶</a></dt>
<dd><p>Lazy Attributes.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.cache_descriptors.cachedIn">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.cache_descriptors.</code><code class="sig-name descname">cachedIn</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attribute_name</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/cache_descriptors.html#cachedIn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.cache_descriptors.cachedIn" title="Permalink to this definition">¶</a></dt>
<dd><p>Cached property with given cache attribute.</p>
</dd></dl>

</section>
<section id="module-py2store.utils.appendable">
<span id="py2store-utils-appendable"></span><h1>py2store.utils.appendable<a class="headerlink" href="#module-py2store.utils.appendable" title="Permalink to this headline">¶</a></h1>
<p>utils to make add append and extend functionality to KV stores</p>
</section>
<section id="module-py2store.utils.affine_conversion">
<span id="py2store-utils-affine-conversion"></span><h1>py2store.utils.affine_conversion<a class="headerlink" href="#module-py2store.utils.affine_conversion" title="Permalink to this headline">¶</a></h1>
<p>utils to carry out affine transformations (of indices)</p>
<dl class="py class">
<dt id="py2store.utils.affine_conversion.AffineConverter">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.affine_conversion.</code><code class="sig-name descname">AffineConverter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/affine_conversion.html#AffineConverter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.affine_conversion.AffineConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>Getting a callable that will perform an affine conversion.
Note, it does it as</p>
<blockquote>
<div><p>(val - offset) * scale</p>
</div></blockquote>
<p>(Note slope-intercept style (though there is the .from_slope_and_intercept constructor method for that)</p>
<dl class="simple">
<dt>Inverse is available through the inv method, performing:</dt><dd><p>val / scale + offset</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">convert</span> <span class="o">=</span> <span class="n">AffineConverter</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">-0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">4.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">9.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">convert</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="mf">4.5</span><span class="p">)</span>
<span class="go">10.0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.affine_conversion.get_affine_converter_and_inverse">
<code class="sig-prename descclassname">py2store.utils.affine_conversion.</code><code class="sig-name descname">get_affine_converter_and_inverse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">scale</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">source_type_cast</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">target_type_cast</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/affine_conversion.html#get_affine_converter_and_inverse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.affine_conversion.get_affine_converter_and_inverse" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Getting two affine functions with given scale and offset, that are inverse of each other. Namely (for input val):</dt><dd><p>(val - offset) * scale and val / scale + offset</p>
</dd>
</dl>
<p>Note this is not “slope intercept” style!!</p>
<p>The source_type_cast and target_type_case (optional), allow the user to specify if these transformations need to
be further cast to a given type.
:param scale:
:param offset:
:param source_type_cast: function to apply to input
:param target_type_cast: function to apply to output
:return: Two single val functions: affine_converter, inverse_affine_converter</p>
<p>Note: Code is a lot more complex than the basic operations it performs. The reason was a worry of efficiency since
the functions that are returned are intended to be used in long loops.</p>
<p>See also: ocore.utils.conversion.AffineConverter</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">affine_converter</span><span class="p">,</span> <span class="n">inverse_affine_converter</span> <span class="o">=</span> <span class="n">get_affine_converter_and_inverse</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">affine_converter</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">-0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">affine_converter</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">4.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inverse_affine_converter</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="go">9.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inverse_affine_converter</span><span class="p">(</span><span class="mf">4.5</span><span class="p">)</span>
<span class="go">10.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">affine_converter</span><span class="p">,</span> <span class="n">inverse_affine_converter</span> <span class="o">=</span> <span class="n">get_affine_converter_and_inverse</span><span class="p">(</span>
<span class="gp">... </span>                                                <span class="n">offset</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">target_type_cast</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">affine_converter</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.utils.signatures">
<span id="py2store-utils-signatures"></span><h1>py2store.utils.signatures<a class="headerlink" href="#module-py2store.utils.signatures" title="Permalink to this headline">¶</a></h1>
<p>Deprecated: Forwards to py2store.signatures</p>
</section>
<section id="module-py2store.utils.sliceable">
<span id="py2store-utils-sliceable"></span><h1>py2store.utils.sliceable<a class="headerlink" href="#module-py2store.utils.sliceable" title="Permalink to this headline">¶</a></h1>
<p>utils to add sliceable functionality to stores</p>
<dl class="py class">
<dt id="py2store.utils.sliceable.iSliceStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.sliceable.</code><code class="sig-name descname">iSliceStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">store</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/sliceable.html#iSliceStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.sliceable.iSliceStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a store to make a reader that acts as if the store was a list (with integer keys, and that can be sliced).
I say “list”, but it should be noted that the behavior is more that of range, that outputs an element of the list
when keying with an integer, but returns an iterable object (a range) if sliced.</p>
<p>Here, a map object is returned when the sliceable store is sliced.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">:</span> <span class="s1">&#39;world&#39;</span><span class="p">,</span> <span class="s1">&#39;alice&#39;</span><span class="p">:</span> <span class="s1">&#39;bob&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliceable_s</span> <span class="o">=</span> <span class="n">iSliceStore</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sliceable_s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;world&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">sliceable_s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">])</span>
<span class="go">[&#39;bar&#39;, &#39;world&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">sliceable_s</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:])</span>
<span class="go">[&#39;world&#39;, &#39;bob&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">sliceable_s</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="go">[&#39;bar&#39;, &#39;world&#39;]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.utils.mappify">
<span id="py2store-utils-mappify"></span><h1>py2store.utils.mappify<a class="headerlink" href="#module-py2store.utils.mappify" title="Permalink to this headline">¶</a></h1>
<p>Utils to wrap any object into a mapping interface</p>
<dl class="py class">
<dt id="py2store.utils.mappify.LeafMappify">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.mappify.</code><code class="sig-name descname">LeafMappify</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">node_types=(&lt;class 'dict'&gt;</em>, <em class="sig-param">)</em>, <em class="sig-param">key_concat=&lt;function Mappify.&lt;lambda&gt;&gt;</em>, <em class="sig-param">names_of_literals=()</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/mappify.html#LeafMappify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.mappify.LeafMappify" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict-like interface to glom. Here, only leaf keys are taken into account.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;simple&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;is&#39;</span><span class="p">:</span> <span class="s1">&#39;nested&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;is&#39;</span><span class="p">:</span> <span class="s1">&#39;nested&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">:</span> <span class="s1">&#39;has&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">LeafMappify</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b.is&#39;</span><span class="p">,</span> <span class="s1">&#39;c.is&#39;</span><span class="p">,</span> <span class="s1">&#39;c.and&#39;</span><span class="p">,</span> <span class="s1">&#39;c.a&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;simple&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;b.is&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;nested&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;c.a&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">a: simple</span>
<span class="go">b.is: nested</span>
<span class="go">c.is: nested</span>
<span class="go">c.and: has</span>
<span class="go">c.a: [1, 2, 3]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.mappify.Mappify">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.mappify.</code><code class="sig-name descname">Mappify</code><span class="sig-paren">(</span><em class="sig-param">target</em>, <em class="sig-param">node_types=(&lt;class 'dict'&gt;</em>, <em class="sig-param">)</em>, <em class="sig-param">key_concat=&lt;function Mappify.&lt;lambda&gt;&gt;</em>, <em class="sig-param">names_of_literals=()</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/mappify.html#Mappify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.mappify.Mappify" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;simple&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;is&#39;</span><span class="p">:</span> <span class="s1">&#39;nested&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;is&#39;</span><span class="p">:</span> <span class="s1">&#39;nested&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">:</span> <span class="s1">&#39;has&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">Mappify</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b.is&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c.is&#39;</span><span class="p">,</span> <span class="s1">&#39;c.and&#39;</span><span class="p">,</span> <span class="s1">&#39;c.a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;simple&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;b.is&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;nested&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">g</span><span class="p">[</span><span class="s1">&#39;c.a&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">a: simple</span>
<span class="go">b.is: nested</span>
<span class="go">b: {&#39;is&#39;: &#39;nested&#39;}</span>
<span class="go">c.is: nested</span>
<span class="go">c.and: has</span>
<span class="go">c.a: [1, 2, 3]</span>
<span class="go">c: {&#39;is&#39;: &#39;nested&#39;, &#39;and&#39;: &#39;has&#39;, &#39;a&#39;: [1, 2, 3]}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.utils.glom">
<span id="py2store-utils-glom"></span><h1>py2store.utils.glom<a class="headerlink" href="#module-py2store.utils.glom" title="Permalink to this headline">¶</a></h1>
<p><em>glom is a util to extract stuff from nested structures.</em>
It’s one of those excellent utils that I’ve written many times, but never got quite right.
Mahmoud Hashemi got it right.</p>
<dl class="field-list simple">
<dt class="field-odd">BEGIN LICENSE</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>Copyright (c) 2018, Mahmoud Hashemi</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<blockquote>
<div><ul class="simple">
<li><p>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</p></li>
<li><p>Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials provided
with the distribution.</p></li>
<li><p>The names of the contributors may not be used to endorse or
promote products derived from this software without specific
prior written permission.</p></li>
</ul>
</div></blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
“AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<dl class="field-list simple">
<dt class="field-odd">END LICENSE</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>Now, at the time of writing this, I’ve already transformed it to bend it to my liking.
At some point it may become something else, but I wanted there to be a trace of what my seed was.
Though I can’t promise I’ll maintain the same functionality as I transform this module, here’s
a tutorial on how to use it in it’s original form:</p>
<blockquote>
<div><p><a class="reference external" href="https://glom.readthedocs.io/en/latest/">https://glom.readthedocs.io/en/latest/</a></p>
</div></blockquote>
<p>I only took the main (core) module from the glom project.
Here’s the original docs of this glom module.</p>
<p>If there was ever a Python example of “big things come in small
packages”, <code class="docutils literal notranslate"><span class="pre">glom</span></code> might be it.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">glom</span></code> package has one central entrypoint,
<code class="xref py py-func docutils literal notranslate"><span class="pre">glom.glom()</span></code>. Everything else in the package revolves around that
one function.</p>
<p>A couple of conventional terms you’ll see repeated many times below:</p>
<ul class="simple">
<li><p><strong>target</strong> - glom is built to work on any data, so we simply
refer to the object being accessed as the <em>“target”</em></p></li>
<li><p><strong>spec</strong> - <em>(aka “glomspec”, short for specification)</em> The
accompanying template used to specify the structure of the return
value.</p></li>
</ul>
<p>Now that you know the terms, let’s take a look around glom’s powerful
semantics.</p>
<dl class="py class">
<dt id="py2store.utils.glom.Auto">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Auto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Auto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to Auto mode (the default)</p>
<p>TODO: this seems like it should be a sub-class of class Spec() –
if Spec() could help define the interface for new “modes” or dialects
that would also help make match mode feel less duct-taped on</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Call">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Call</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Call" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> specifies when a target should be passed to a function,
<em>func</em>.</p>
<p><a class="reference internal" href="#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> is similar to <code class="xref py py-func docutils literal notranslate"><span class="pre">partial()</span></code> in that
it is no more powerful than <code class="docutils literal notranslate"><span class="pre">lambda</span></code> or other functions, but
it is designed to be more readable, with a better <code class="docutils literal notranslate"><span class="pre">repr</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>callable</em>) – a function or other callable to be called with
the target</p>
</dd>
</dl>
<p><a class="reference internal" href="#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> combines well with <code class="xref py py-attr docutils literal notranslate"><span class="pre">T</span></code> to construct objects. For
instance, to generate a dict and then pass it to a constructor:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
<span class="gp">... </span>       <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="n">attr</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;attr&#39;</span><span class="p">:</span> <span class="mf">3.14</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Call</span><span class="p">(</span><span class="n">ExampleClass</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">T</span><span class="p">))</span><span class="o">.</span><span class="n">attr</span>
<span class="go">3.14</span>
</pre></div>
</div>
<p>This does the same as <code class="docutils literal notranslate"><span class="pre">glom(target,</span> <span class="pre">lambda</span> <span class="pre">target:</span>
<span class="pre">ExampleClass(**target))</span></code>, but it’s easy to see which one reads
better.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Call</span></code> is mostly for functions. Use a <code class="xref py py-attr docutils literal notranslate"><span class="pre">T</span></code> object
if you need to call a method.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> has a successor with a fuller-featured API, new
in 19.3.0: the <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> specifier type.</p>
</div>
<dl class="py method">
<dt id="py2store.utils.glom.Call.glomit">
<code class="sig-name descname">glomit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span></em>, <em class="sig-param"><span class="n">scope</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Call.glomit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Call.glomit" title="Permalink to this definition">¶</a></dt>
<dd><p>run against the current target</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Check">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Check</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span><span class="o">=</span><span class="default_value">T</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check objects are used to make assertions about the target data,
and either pass through the data or raise exceptions if there is a
problem.</p>
<p>If any check condition fails, a <code class="xref py py-class docutils literal notranslate"><span class="pre">CheckError</span></code> is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – a sub-spec to extract the data to which other assertions will
be checked (defaults to applying checks to the target itself)</p></li>
<li><p><strong>type</strong> – a type or sequence of types to be checked for exact match</p></li>
<li><p><strong>equal_to</strong> – a value to be checked for equality match (“==”)</p></li>
<li><p><strong>validate</strong> – a callable or list of callables, each representing a
check condition. If one or more return False or raise an
exception, the Check will fail.</p></li>
<li><p><strong>instance_of</strong> – a type or sequence of types to be checked with isinstance()</p></li>
<li><p><strong>one_of</strong> – an iterable of values, any of which can match the target (“in”)</p></li>
<li><p><strong>default</strong> – an optional default value to replace the value when the check fails
(if default is not specified, GlomCheckError will be raised)</p></li>
</ul>
</dd>
</dl>
<p>Aside from <em>spec</em>, all arguments are keyword arguments. Each
argument, except for <em>default</em>, represent a check
condition. Multiple checks can be passed, and if all check
conditions are left unset, Check defaults to performing a basic
truthy check on the value.</p>
</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.CheckError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">CheckError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msgs</span></em>, <em class="sig-param"><span class="n">check</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#CheckError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.CheckError" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype is raised when target data fails to
pass a <a class="reference internal" href="#py2store.utils.glom.Check" title="py2store.utils.glom.Check"><code class="xref py py-class docutils literal notranslate"><span class="pre">Check</span></code></a>’s specified validation.</p>
<p>An uncaught <code class="docutils literal notranslate"><span class="pre">CheckError</span></code> looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="n">Check</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">))})</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.CheckError</span>: <span class="n">target at path [&#39;a.b&#39;] failed check, got error: &quot;expected type to be &#39;int&#39;, found type &#39;str&#39;&quot;</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">Check</span></code> contains more than one condition, there may be
more than one error message. The string rendition of the
<code class="docutils literal notranslate"><span class="pre">CheckError</span></code> will include all messages.</p>
<p>You can also catch the <code class="docutils literal notranslate"><span class="pre">CheckError</span></code> and programmatically access
messages through the <code class="docutils literal notranslate"><span class="pre">msgs</span></code> attribute on the <code class="docutils literal notranslate"><span class="pre">CheckError</span></code>
instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of 2018-07-05 (glom v18.2.0), the validation subsystem is
still very new. Exact error message formatting may be enhanced
in future releases.</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Coalesce">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Coalesce</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">subspecs</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Coalesce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Coalesce" title="Permalink to this definition">¶</a></dt>
<dd><p>Coalesce objects specify fallback behavior for a list of
subspecs.</p>
<p>Subspecs are passed as positional arguments, and keyword arguments
control defaults. Each subspec is evaluated in turn, and if none
match, a <a class="reference internal" href="#py2store.utils.glom.CoalesceError" title="py2store.utils.glom.CoalesceError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CoalesceError</span></code></a> is raised, or a default is returned,
depending on the options used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation may seem very familar if you have experience with
<a class="reference external" href="https://en.wikipedia.org/w/index.php?title=Null_(SQL)&amp;oldid=833093792#COALESCE">SQL</a> or even <a class="reference external" href="https://en.wikipedia.org/w/index.php?title=Null_coalescing_operator&amp;oldid=839493322#C#">C# and others</a>.</p>
</div>
<p>In practice, this fallback behavior’s simplicity is only surpassed
by its utility:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">))</span>
<span class="go">&#39;d&#39;</span>
</pre></div>
</div>
<p>glom tries to get <code class="docutils literal notranslate"><span class="pre">'a'</span></code> from <code class="docutils literal notranslate"><span class="pre">target</span></code>, but gets a
KeyError. Rather than raise a <code class="xref py py-exc docutils literal notranslate"><span class="pre">PathAccessError</span></code> as usual,
glom <em>coalesces</em> into the next subspec, <code class="docutils literal notranslate"><span class="pre">'b'</span></code>. The process
repeats until it gets to <code class="docutils literal notranslate"><span class="pre">'c'</span></code>, which returns our value,
<code class="docutils literal notranslate"><span class="pre">'d'</span></code>. If our value weren’t present, we’d see:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">))</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.CoalesceError</span>: <span class="n">no valid values found. Tried (&#39;a&#39;, &#39;b&#39;) and got (PathAccessError, PathAccessError) (at path [])</span>
</pre></div>
</div>
<p>Same process, but because <code class="docutils literal notranslate"><span class="pre">target</span></code> is empty, we get a
<a class="reference internal" href="#py2store.utils.glom.CoalesceError" title="py2store.utils.glom.CoalesceError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CoalesceError</span></code></a>. If we want to avoid an exception, and we
know which value we want by default, we can set <em>default</em>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;d-fault&#39;</span><span class="p">)</span>
<span class="go">&#39;d-fault&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">'a'</span></code>, <code class="docutils literal notranslate"><span class="pre">'b'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'c'</span></code> weren’t present so we got <code class="docutils literal notranslate"><span class="pre">'d-fault'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subspecs</strong> – One or more glommable subspecs</p></li>
<li><p><strong>default</strong> – A value to return if no subspec results in a valid value</p></li>
<li><p><strong>default_factory</strong> – A callable whose result will be returned as a default</p></li>
<li><p><strong>skip</strong> – A value, tuple of values, or predicate function
representing values to ignore</p></li>
<li><p><strong>skip_exc</strong> – An exception or tuple of exception types to catch and
move on to the next subspec. Defaults to <a class="reference internal" href="#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a>, the
parent type of all glom runtime exceptions.</p></li>
</ul>
</dd>
</dl>
<p>If all subspecs produce skipped values or exceptions, a
<a class="reference internal" href="#py2store.utils.glom.CoalesceError" title="py2store.utils.glom.CoalesceError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CoalesceError</span></code></a> will be raised. For more examples, check out
the <span class="xref std std-doc">tutorial</span>, which makes extensive use of Coalesce.</p>
</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.CoalesceError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">CoalesceError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coal_obj</span></em>, <em class="sig-param"><span class="n">skipped</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#CoalesceError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.CoalesceError" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype is raised from within a
<a class="reference internal" href="#py2store.utils.glom.Coalesce" title="py2store.utils.glom.Coalesce"><code class="xref py py-class docutils literal notranslate"><span class="pre">Coalesce</span></code></a> spec’s processing, when none of the subspecs
match and no default is provided.</p>
<p>The exception object itself keeps track of several values which
may be useful for processing:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coal_obj</strong> (<a class="reference internal" href="#py2store.utils.glom.Coalesce" title="py2store.utils.glom.Coalesce"><em>Coalesce</em></a>) – The original failing spec, see
<a class="reference internal" href="#py2store.utils.glom.Coalesce" title="py2store.utils.glom.Coalesce"><code class="xref py py-class docutils literal notranslate"><span class="pre">Coalesce</span></code></a>’s docs for details.</p></li>
<li><p><strong>skipped</strong> (<em>list</em>) – A list of ignored values and exceptions, in the
order that their respective subspecs appear in the original
<em>coal_obj</em>.</p></li>
<li><p><strong>path</strong> – Like many GlomErrors, this exception knows the path at
which it occurred.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">))</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.CoalesceError</span>: <span class="n">no valid values found. Tried (&#39;a&#39;, &#39;b&#39;) and got (PathAccessError, PathAccessError) ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Fill">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Fill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Fill"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Fill" title="Permalink to this definition">¶</a></dt>
<dd><p>A specifier type which switches to glom into “fill-mode”. For the
spec contained within the Fill, glom will only interpret explicit
specifier types (including T objects). Whereas the default mode
has special interpretations for each of these builtins, fill-mode
takes a lighter touch, making Fill great for “filling out” Python
literals, like tuples, dicts, sets, and lists.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Fill</span><span class="p">((</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">(4, 0)</span>
</pre></div>
</div>
<p>As you can see, glom’s usual built-in tuple item chaining behavior
has switched into a simple tuple constructor.</p>
<p>(Sidenote for Lisp fans: Fill is like glom’s quasi-quoting.)</p>
</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.GlomError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">GlomError</code><a class="reference internal" href="_modules/py2store/utils/glom.html#GlomError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.GlomError" title="Permalink to this definition">¶</a></dt>
<dd><p>The base exception for all the errors that might be raised from
<a class="reference internal" href="#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> processing logic.</p>
<p>By default, exceptions raised from within functions passed to glom
(e.g., <code class="docutils literal notranslate"><span class="pre">len</span></code>, <code class="docutils literal notranslate"><span class="pre">sum</span></code>, any <code class="docutils literal notranslate"><span class="pre">lambda</span></code>) will not be wrapped in a
GlomError.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Glommer">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Glommer</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Glommer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Glommer" title="Permalink to this definition">¶</a></dt>
<dd><p>All the wholesome goodness that it takes to make glom work. This
type mostly serves to encapsulate the type registration context so
that advanced uses of glom don’t need to worry about stepping on
each other’s toes.</p>
<p>Glommer objects are lightweight and, once instantiated, provide
the <a class="reference internal" href="#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> method we know and love:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glommer</span> <span class="o">=</span> <span class="n">Glommer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glommer</span><span class="o">.</span><span class="n">glom</span><span class="p">({},</span> <span class="s1">&#39;a.b.c&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="go">&#39;d&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Glommer</span><span class="p">()</span><span class="o">.</span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))},</span> <span class="p">(</span><span class="s1">&#39;vals&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">))</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Instances also provide <a class="reference internal" href="#py2store.utils.glom.Glommer.register" title="py2store.utils.glom.Glommer.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> method for
localized control over type handling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>register_default_types</strong> (<em>bool</em>) – Whether or not to enable the
handling behaviors of the default <a class="reference internal" href="#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a>. These
default actions include dict access, list and iterable
iteration, and generic object attribute access. Defaults to
True.</p>
</dd>
</dl>
<dl class="py method">
<dt id="py2store.utils.glom.Glommer.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_type</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Glommer.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Glommer.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register <em>target_type</em> so <code class="xref py py-meth docutils literal notranslate"><span class="pre">glom()</span></code> will
know how to handle instances of that type as targets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_type</strong> (<em>type</em>) – A type expected to appear in a glom()
call target</p></li>
<li><p><strong>get</strong> (<em>callable</em>) – A function which takes a target object and
a name, acting as a default accessor. Defaults to
<code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code>.</p></li>
<li><p><strong>iterate</strong> (<em>callable</em>) – A function which takes a target object
and returns an iterator. Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">iter()</span></code> if
<em>target_type</em> appears to be iterable.</p></li>
<li><p><strong>exact</strong> (<em>bool</em>) – Whether or not to match instances of subtypes
of <em>target_type</em>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The module-level <a class="reference internal" href="#py2store.utils.glom.register" title="py2store.utils.glom.register"><code class="xref py py-func docutils literal notranslate"><span class="pre">register()</span></code></a> function affects the
module-level <a class="reference internal" href="#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> function’s behavior. If this
global effect is undesirable for your application, or
you’re implementing a library, consider instantiating a
<a class="reference internal" href="#py2store.utils.glom.Glommer" title="py2store.utils.glom.Glommer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Glommer</span></code></a> instance, and using the
<a class="reference internal" href="#py2store.utils.glom.Glommer.register" title="py2store.utils.glom.Glommer.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Glommer.glom()</span></code>
methods instead.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Inspect">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Inspect</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Inspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> specifier type provides a way to get
visibility into glom’s evaluation of a specification, enabling
debugging of those tricky problems that may arise with unexpected
data.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> can be inserted into an existing spec in one of two
ways. First, as a wrapper around the spec in question, or second,
as an argument-less placeholder wherever a spec could be.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> supports several modes, controlled by
keyword arguments. Its default, no-argument mode, simply echos the
state of the glom at the point where it appears:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val</span> <span class="o">=</span> <span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Inspect</span><span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">))</span>  <span class="c1"># wrapping a spec</span>
<span class="go">---</span>
<span class="go">path:   [&#39;a.b&#39;]</span>
<span class="go">target: {&#39;a&#39;: {&#39;b&#39;: {}}}</span>
<span class="go">output: {}</span>
<span class="go">---</span>
</pre></div>
</div>
<p>Debugging behavior aside, <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> has no effect on
values in the target, spec, or result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>echo</strong> (<em>bool</em>) – Whether to print the path, target, and output of
each inspected glom. Defaults to True.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Whether or not the Inspect should be applied
at every level, at or below the spec that it wraps. Defaults
to False.</p></li>
<li><p><strong>breakpoint</strong> (<em>bool</em>) – This flag controls whether a debugging prompt
should appear before evaluating each inspected spec. Can also
take a callable. Defaults to False.</p></li>
<li><p><strong>post_mortem</strong> (<em>bool</em>) – This flag controls whether exceptions
should be caught and interactively debugged with <code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code> on
inspected specs.</p></li>
</ul>
</dd>
</dl>
<p>All arguments above are keyword-only to avoid overlap with a
wrapped spec.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just like <code class="docutils literal notranslate"><span class="pre">pdb.set_trace()</span></code>, be careful about leaving stray
<code class="docutils literal notranslate"><span class="pre">Inspect()</span></code> instances in production glom specs.</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Invoke">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Invoke</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Invoke"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifier type designed for easy invocation of callables from glom.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>callable</em>) – A function or other callable object.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">Invoke</span></code> is similar to <code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code>, but with the
ability to set up a “templated” call which interleaves constants and
glom specs.</p>
<p>For example, the following creates a spec which can be used to
check if targets are integers:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_int</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">is_int</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>And this composes like any other glom spec:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="nb">object</span><span class="p">(),</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="p">[</span><span class="n">is_int</span><span class="p">])</span>
<span class="go">[True, False, True]</span>
</pre></div>
</div>
<p>Another example, mixing positional and keyword arguments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">sorted</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;20&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">[&#39;20&#39;, &#39;10&#39;, &#39;5&#39;, &#39;1&#39;]</span>
</pre></div>
</div>
<p>Invoke also helps with evaluating zero-argument functions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="p">{},</span> <span class="n">spec</span><span class="o">=</span><span class="n">Invoke</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
<span class="go">0</span>
</pre></div>
</div>
<p>(A trivial example, but from timestamps to UUIDs, zero-arg calls do come up!)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Invoke</span></code> is mostly for functions, object construction, and callable
objects. For calling methods, consider the <code class="xref py py-attr docutils literal notranslate"><span class="pre">T</span></code> object.</p>
</div>
<dl class="py method">
<dt id="py2store.utils.glom.Invoke.constants">
<code class="sig-name descname">constants</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Invoke.constants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.constants" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> spec, with the provided positional
and keyword argument values stored for passing to the
underlying function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="nb">range</span><span class="p">,</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
<p>Subsequent positional arguments are appended:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="nb">range</span><span class="p">,</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[2, 4, 6, 8]</span>
</pre></div>
</div>
<p>Keyword arguments also work as one might expect:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">round_2</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">round</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="mf">3.14159</span><span class="p">,</span> <span class="n">round_2</span><span class="p">)</span>
<span class="go">3.14</span>
</pre></div>
</div>
<p><a class="reference internal" href="#py2store.utils.glom.Invoke.constants" title="py2store.utils.glom.Invoke.constants"><code class="xref py py-meth docutils literal notranslate"><span class="pre">constants()</span></code></a> and other <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a>
methods may be called multiple times, just remember that every
call returns a new spec.</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Invoke.specfunc">
<em class="property">classmethod </em><code class="sig-name descname">specfunc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Invoke.specfunc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.specfunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> instance where the function is
indicated by a spec.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="o">.</span><span class="n">specfunc</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;func&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">},</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Invoke.specs">
<code class="sig-name descname">specs</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Invoke.specs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.specs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> spec, with the provided positional
and keyword arguments stored to be interpreted as specs, with
the results passed to the underlying function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
<p>Subsequent positional arguments are appended:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[2, 4, 6, 8]</span>
</pre></div>
</div>
<p>Keyword arguments also work as one might expect:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">multiply</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times_3</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">multiply</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span> <span class="n">times_3</span><span class="p">)</span>
<span class="go">15</span>
</pre></div>
</div>
<p><a class="reference internal" href="#py2store.utils.glom.Invoke.specs" title="py2store.utils.glom.Invoke.specs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">specs()</span></code></a> and other <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a>
methods may be called multiple times, just remember that every
call returns a new spec.</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Invoke.star">
<code class="sig-name descname">star</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Invoke.star"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.star" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> spec, with <em>args</em> and/or <em>kwargs</em>
specs set to be “starred” or “star-starred” (respectively)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os.path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">)</span><span class="o">.</span><span class="n">star</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">&#39;path/to/dir&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>spec</em>) – A spec to be evaluated and “starred” into the
underlying function.</p></li>
<li><p><strong>kwargs</strong> (<em>spec</em>) – A spec to be evaluated and “star-starred” into
the underlying function.</p></li>
</ul>
</dd>
</dl>
<p>One or both of the above arguments should be set.</p>
<p>The <a class="reference internal" href="#py2store.utils.glom.Invoke.star" title="py2store.utils.glom.Invoke.star"><code class="xref py py-meth docutils literal notranslate"><span class="pre">star()</span></code></a>, like other <a class="reference internal" href="#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a>
methods, may be called multiple times. The <em>args</em> and <em>kwargs</em>
will be stacked in the order in which they are provided.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Let">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Let</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Let"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Let" title="Permalink to this definition">¶</a></dt>
<dd><p>This specifier type assigns variables to the scope.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">(</span><span class="n">Let</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]),</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">S</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">{&#39;val&#39;: 9}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Literal">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Literal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Literal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Literal" title="Permalink to this definition">¶</a></dt>
<dd><p>Literal objects specify literal values in rare cases when part of
the spec should not be interpreted as a glommable
subspec. Wherever a Literal object is encountered in a spec, it is
replaced with its wrapped <em>value</em> in the output.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="s1">&#39;readability&#39;</span><span class="p">:</span> <span class="n">Literal</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">))</span>
<span class="go">{&#39;a&#39;: &#39;c&#39;, &#39;readability&#39;: &#39;counts&#39;}</span>
</pre></div>
</div>
<p>Instead of accessing <code class="docutils literal notranslate"><span class="pre">'counts'</span></code> as a key like it did with
<code class="docutils literal notranslate"><span class="pre">'a.b'</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code> just unwrapped the literal and
included the value.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code> takes one argument, the literal value that should appear
in the glom output.</p>
<p>This could also be achieved with a callable, e.g., <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span>
<span class="pre">'literal_string'</span></code> in the spec, but using a <code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code>
object adds explicitness, code clarity, and a clean <code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code>.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Path">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Path</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">path_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path objects specify explicit paths when the default
<code class="docutils literal notranslate"><span class="pre">'a.b.c'</span></code>-style general access syntax won’t work or isn’t
desirable. Use this to wrap ints, datetimes, and other valid
keys, as well as strings with dots that shouldn’t be expanded.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d.e&#39;</span><span class="p">:</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d.e&#39;</span><span class="p">))</span>
<span class="go">&#39;f&#39;</span>
</pre></div>
</div>
<p>Paths can be used to join together other Path objects, as
well as <code class="xref py py-data docutils literal notranslate"><span class="pre">T</span></code> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="go">T[&#39;a&#39;][&#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">))</span>
<span class="go">Path(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;)</span>
</pre></div>
</div>
<p>Paths also support indexing and slicing, with each access
returning a new Path object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">Path(&#39;a&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
<span class="go">Path(1, 2)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="py2store.utils.glom.Path.from_t">
<code class="sig-name descname">from_t</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Path.from_t"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.from_t" title="Permalink to this definition">¶</a></dt>
<dd><p>return the same path but starting from T</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Path.from_text">
<em class="property">classmethod </em><code class="sig-name descname">from_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Path.from_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.from_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a Path from .-delimited text:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">)</span>
<span class="go">Path(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Path.items">
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Path.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of (operation, value) pairs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">T</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">((&#39;.&#39;, &#39;a&#39;), (&#39;.&#39;, &#39;b&#39;), (&#39;P&#39;, &#39;c&#39;), (&#39;[&#39;, &#39;d&#39;))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Path.values">
<code class="sig-name descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Path.values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of values referenced in this path.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">T</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.PathAccessError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">PathAccessError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exc</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">part_idx</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#PathAccessError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.PathAccessError" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype represents a failure to access an
attribute as dictated by the spec. The most commonly-seen error
when using glom, it maintains a copy of the original exception and
produces a readable error message for easy debugging.</p>
<p>If you see this error, you may want to:</p>
<blockquote>
<div><ul class="simple">
<li><p>Check the target data is accurate using <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code></p></li>
<li><p>Catch the exception and return a semantically meaningful error message</p></li>
<li><p>Use <code class="xref py py-class docutils literal notranslate"><span class="pre">glom.Coalesce</span></code> to specify a default</p></li>
<li><p>Use the top-level <code class="docutils literal notranslate"><span class="pre">default</span></code> kwarg on <code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></p></li>
</ul>
</div></blockquote>
<p>In any case, be glad you got this error and not the one it was
wrapping!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exc</strong> (<em>Exception</em>) – The error that arose when we tried to access
<em>path</em>. Typically an instance of KeyError, AttributeError,
IndexError, or TypeError, and sometimes others.</p></li>
<li><p><strong>path</strong> (<a class="reference internal" href="#py2store.utils.glom.Path" title="py2store.utils.glom.Path"><em>Path</em></a>) – The full Path glom was in the middle of accessing
when the error occurred.</p></li>
<li><p><strong>part_idx</strong> (<em>int</em>) – The index of the part of the <em>path</em> that caused
the error.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.b.c&#39;</span><span class="p">)</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.PathAccessError</span>: <span class="n">could not access &#39;c&#39;, part 2 of Path(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), got error: ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Spec">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Spec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span></em>, <em class="sig-param"><span class="n">scope</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#Spec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Spec objects serve three purposes, here they are, roughly ordered
by utility:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>As a form of compiled or “curried” glom call, similar to
Python’s built-in <code class="xref py py-func docutils literal notranslate"><span class="pre">re.compile()</span></code>.</p></li>
<li><p>A marker as an object as representing a spec rather than a
literal value in certain cases where that might be ambiguous.</p></li>
<li><p>A way to update the scope within another Spec.</p></li>
</ol>
</div></blockquote>
<p>In the second usage, Spec objects are the complement to
<code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code>, wrapping a value and marking that it
should be interpreted as a glom spec, rather than a literal value.
This is useful in places where it would be interpreted as a value
by default. (Such as T[key], Call(func) where key and func are
assumed to be literal values and not specs.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – The glom spec.</p></li>
<li><p><strong>scope</strong> (<em>dict</em>) – additional values to add to the scope when
evaluating this Spec</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.TType">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">TType</code><a class="reference internal" href="_modules/py2store/utils/glom.html#TType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TType" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">T</span></code>, short for “target”. A singleton object that enables
object-oriented expression of a glom specification.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">T</span></code> is a singleton, and does not need to be constructed.</p>
</div>
<p>Basically, think of <code class="docutils literal notranslate"><span class="pre">T</span></code> as your data’s stunt double. Everything
that you do to <code class="docutils literal notranslate"><span class="pre">T</span></code> will be recorded and executed during the
<a class="reference internal" href="#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> call. Take this example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">&#39;d&#39;</span>
</pre></div>
</div>
<p>So far, we’ve relied on the <code class="docutils literal notranslate"><span class="pre">'a.b.c'</span></code>-style shorthand for
access, or used the <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> objects, but if you want
to explicitly do attribute and key lookups, look no further than
<code class="docutils literal notranslate"><span class="pre">T</span></code>.</p>
<p>But T doesn’t stop with unambiguous access. You can also call
methods and perform almost any action you would with a normal
object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="nb">list</span><span class="p">))</span>  <span class="c1"># reviewed below</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">[(&#39;c&#39;, &#39;d&#39;)]</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">T</span></code> object can go anywhere in the spec. As seen in the example
above, we access <code class="docutils literal notranslate"><span class="pre">'a'</span></code>, use a <code class="docutils literal notranslate"><span class="pre">T</span></code> to get <code class="docutils literal notranslate"><span class="pre">'b'</span></code> and iterate
over its <code class="docutils literal notranslate"><span class="pre">items</span></code>, turning them into a <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>You can even use <code class="docutils literal notranslate"><span class="pre">T</span></code> with <code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code> to construct objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
<span class="gp">... </span>       <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="n">attr</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;attr&#39;</span><span class="p">:</span> <span class="mf">3.14</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Call</span><span class="p">(</span><span class="n">ExampleClass</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">T</span><span class="p">))</span><span class="o">.</span><span class="n">attr</span>
<span class="go">3.14</span>
</pre></div>
</div>
<p>On a further note, while <code class="docutils literal notranslate"><span class="pre">lambda</span></code> works great in glom specs, and
can be very handy at times, <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code>
eliminate the need for the vast majority of <code class="docutils literal notranslate"><span class="pre">lambda</span></code> usage with
glom.</p>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">lambda</span></code> and other functions, <code class="docutils literal notranslate"><span class="pre">T</span></code> roundtrips
beautifully and transparently:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">](</span><span class="s1">&#39;success&#39;</span><span class="p">)</span>
<span class="go">T[&#39;a&#39;].b[&#39;c&#39;](&#39;success&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">T</span></code>-related access errors raise a <code class="xref py py-exc docutils literal notranslate"><span class="pre">PathAccessError</span></code>
during the <code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code> call.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While <code class="docutils literal notranslate"><span class="pre">T</span></code> is clearly useful, powerful, and here to stay, its
semantics are still being refined. Currently, operations beyond
method calls and attribute/item access are considered
experimental and should not be relied upon.</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.TargetRegistry">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">TargetRegistry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">register_default_types</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#TargetRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TargetRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>responsible for registration of target types for iteration
and attribute walking</p>
<dl class="py method">
<dt id="py2store.utils.glom.TargetRegistry.get_handler">
<code class="sig-name descname">get_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op</span></em>, <em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">raise_exc</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#TargetRegistry.get_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TargetRegistry.get_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>for an operation and object <strong>instance</strong>, obj, return the
closest-matching handler function, raising UnregisteredTarget
if no handler can be found for <em>obj</em> (or False if
raise_exc=False)</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.TargetRegistry.register_op">
<code class="sig-name descname">register_op</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op_name</span></em>, <em class="sig-param"><span class="n">auto_func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exact</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#TargetRegistry.register_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TargetRegistry.register_op" title="Permalink to this definition">¶</a></dt>
<dd><p>add operations beyond the builtins (‘get’ and ‘iterate’ at the time
of writing).</p>
<p>auto_func is a function that when passed a type, returns a
handler associated with op_name if it’s supported, or False if
it’s not.</p>
<p>See glom.core.register_op() for the global version used by
extensions.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.UnregisteredTarget">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">UnregisteredTarget</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op</span></em>, <em class="sig-param"><span class="n">target_type</span></em>, <em class="sig-param"><span class="n">type_map</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#UnregisteredTarget"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.UnregisteredTarget" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype is raised when a spec calls for an
unsupported action on a target type. For instance, trying to
iterate on an non-iterable target:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="nb">object</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">])</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.UnregisteredTarget</span>: <span class="n">target type &#39;object&#39; not registered for &#39;iterate&#39;, expected one of registered types: (...)</span>
</pre></div>
</div>
<p>It should be noted that this is a pretty uncommon occurrence in
production glom usage. See the <span class="xref std std-ref">setup-and-registration</span>
section for details on how to avoid this error.</p>
<p>An UnregisteredTarget takes and tracks a few values:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op</strong> (<em>str</em>) – The name of the operation being performed (‘get’ or ‘iterate’)</p></li>
<li><p><strong>target_type</strong> (<em>type</em>) – The type of the target being processed.</p></li>
<li><p><strong>type_map</strong> (<em>dict</em>) – A mapping of target types that do support this operation</p></li>
<li><p><strong>path</strong> – The path at which the error occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.glom">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">glom</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span></em>, <em class="sig-param"><span class="n">spec</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#glom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.glom" title="Permalink to this definition">¶</a></dt>
<dd><p>Access or construct a value from a given <em>target</em> based on the
specification declared by <em>spec</em>.</p>
<p>Accessing nested data, aka deep-get:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.b&#39;</span><span class="p">)</span>
<span class="go">&#39;c&#39;</span>
</pre></div>
</div>
<p>Here the <em>spec</em> was just a string denoting a path,
<code class="docutils literal notranslate"><span class="pre">'a.b.</span></code>. As simple as it should be. The next example shows
how to use nested data to access many fields at once, and make
a new nested structure.</p>
<p>Constructing, or restructuring more-complicated nested data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;e&#39;</span><span class="p">},</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;a.d&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: &#39;c&#39;, &#39;d&#39;: &#39;e&#39;, &#39;h&#39;: [0, 2, 4]}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">glom</span></code> also takes a keyword-argument, <em>default</em>. When set,
if a <code class="docutils literal notranslate"><span class="pre">glom</span></code> operation fails with a <a class="reference internal" href="#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a>, the
<em>default</em> will be returned, very much like
<code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.get()</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.xx&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;nada&#39;</span><span class="p">)</span>
<span class="go">&#39;nada&#39;</span>
</pre></div>
</div>
<p>The <em>skip_exc</em> keyword argument controls which errors should
be ignored.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({},</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">100.0</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skip_exc</span><span class="o">=</span><span class="ne">ZeroDivisionError</span><span class="p">)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>object</em>) – the object on which the glom will operate.</p></li>
<li><p><strong>spec</strong> (<em>object</em>) – Specification of the output object in the form
of a dict, list, tuple, string, other glom construct, or
any composition of these.</p></li>
<li><p><strong>default</strong> (<em>object</em>) – An optional default to return in the case
an exception, specified by <em>skip_exc</em>, is raised.</p></li>
<li><p><strong>skip_exc</strong> (<em>Exception</em>) – An optional exception or tuple of
exceptions to ignore and return <em>default</em> (None if
omitted). If <em>skip_exc</em> and <em>default</em> are both not set,
glom raises errors through.</p></li>
<li><p><strong>scope</strong> (<em>dict</em>) – Additional data that can be accessed
via S inside the glom-spec.</p></li>
</ul>
</dd>
</dl>
<p>It’s a small API with big functionality, and glom’s power is
only surpassed by its intuitiveness. Give it a whirl!</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.is_iterable">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">is_iterable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#is_iterable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.is_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar in nature to <code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code>, <code class="docutils literal notranslate"><span class="pre">is_iterable</span></code> returns
<code class="docutils literal notranslate"><span class="pre">True</span></code> if an object is <a href="#id31"><span class="problematic" id="id32">`iterable`_</span></a>, <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.
&gt;&gt;&gt; is_iterable([])
True
&gt;&gt;&gt; is_iterable(1)
False</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.make_sentinel">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">make_sentinel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'_MISSING'</span></em>, <em class="sig-param"><span class="n">var_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#make_sentinel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.make_sentinel" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a new <strong>instance</strong> of a new class, suitable for
usage as a “sentinel”, a kind of singleton often used to indicate
a value is missing when <code class="docutils literal notranslate"><span class="pre">None</span></code> is a valid input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the Sentinel</p></li>
<li><p><strong>var_name</strong> (<em>str</em>) – Set this name to the name of the variable in
its respective module enable pickleability.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_sentinel</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;_MISSING&#39;</span><span class="p">)</span>
<span class="go">_MISSING</span>
</pre></div>
</div>
<p>The most common use cases here in boltons are as default values
for optional function arguments, partly because of its
less-confusing appearance in automatically generated
documentation. Sentinels also function well as placeholders in queues
and linked lists.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By design, additional calls to <code class="docutils literal notranslate"><span class="pre">make_sentinel</span></code> with the same
values will not produce equivalent objects.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.register">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_type</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register <em>target_type</em> so <code class="xref py py-meth docutils literal notranslate"><span class="pre">glom()</span></code> will
know how to handle instances of that type as targets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_type</strong> (<em>type</em>) – A type expected to appear in a glom()
call target</p></li>
<li><p><strong>get</strong> (<em>callable</em>) – A function which takes a target object and
a name, acting as a default accessor. Defaults to
<code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code>.</p></li>
<li><p><strong>iterate</strong> (<em>callable</em>) – A function which takes a target object
and returns an iterator. Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">iter()</span></code> if
<em>target_type</em> appears to be iterable.</p></li>
<li><p><strong>exact</strong> (<em>bool</em>) – Whether or not to match instances of subtypes
of <em>target_type</em>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The module-level <a class="reference internal" href="#py2store.utils.glom.register" title="py2store.utils.glom.register"><code class="xref py py-func docutils literal notranslate"><span class="pre">register()</span></code></a> function affects the
module-level <a class="reference internal" href="#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> function’s behavior. If this
global effect is undesirable for your application, or
you’re implementing a library, consider instantiating a
<a class="reference internal" href="#py2store.utils.glom.Glommer" title="py2store.utils.glom.Glommer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Glommer</span></code></a> instance, and using the
<a class="reference internal" href="#py2store.utils.glom.Glommer.register" title="py2store.utils.glom.Glommer.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Glommer.glom()</span></code>
methods instead.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.register_op">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">register_op</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op_name</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/utils/glom.html#register_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.register_op" title="Permalink to this definition">¶</a></dt>
<dd><p>For extension authors needing to add operations beyond the builtin
‘get’ and ‘iterate’ to the default scope. See TargetRegistry for more details.</p>
</dd></dl>

</section>
<section id="py2store-persisters-sql-w-odbc">
<h1>py2store.persisters.sql_w_odbc<a class="headerlink" href="#py2store-persisters-sql-w-odbc" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-dynamodb-w-boto3">
<h1>py2store.persisters.dynamodb_w_boto3<a class="headerlink" href="#py2store-persisters-dynamodb-w-boto3" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-couchdb-w-couchdb">
<h1>py2store.persisters.couchdb_w_couchdb<a class="headerlink" href="#py2store-persisters-couchdb-w-couchdb" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-ftp-persister">
<h1>py2store.persisters.ftp_persister<a class="headerlink" href="#py2store-persisters-ftp-persister" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-dropbox-w-urllib">
<h1>py2store.persisters.dropbox_w_urllib<a class="headerlink" href="#py2store-persisters-dropbox-w-urllib" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-google-drive-in-progress">
<h1>py2store.persisters._google_drive_in_progress<a class="headerlink" href="#py2store-persisters-google-drive-in-progress" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.persisters.dropbox_w_dropbox">
<span id="py2store-persisters-dropbox-w-dropbox"></span><h1>py2store.persisters.dropbox_w_dropbox<a class="headerlink" href="#module-py2store.persisters.dropbox_w_dropbox" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dropboxdol</p>
</section>
<section id="module-py2store.persisters.redis_w_redis">
<span id="py2store-persisters-redis-w-redis"></span><h1>py2store.persisters.redis_w_redis<a class="headerlink" href="#module-py2store.persisters.redis_w_redis" title="Permalink to this headline">¶</a></h1>
<p>Forwards to redisdol</p>
</section>
<section id="module-py2store.persisters.sql_w_sqlalchemy">
<span id="py2store-persisters-sql-w-sqlalchemy"></span><h1>py2store.persisters.sql_w_sqlalchemy<a class="headerlink" href="#module-py2store.persisters.sql_w_sqlalchemy" title="Permalink to this headline">¶</a></h1>
<p>Forwards to sqldol</p>
</section>
<section id="module-py2store.persisters.new_s3">
<span id="py2store-persisters-new-s3"></span><h1>py2store.persisters.new_s3<a class="headerlink" href="#module-py2store.persisters.new_s3" title="Permalink to this headline">¶</a></h1>
<p>Forwards to s3dol.new_s3</p>
</section>
<section id="module-py2store.persisters">
<span id="py2store-persisters"></span><h1>py2store.persisters<a class="headerlink" href="#module-py2store.persisters" title="Permalink to this headline">¶</a></h1>
<p>base persisters – now all forwarding to separate libraries</p>
</section>
<section id="py2store-persisters-dropbox-w-requests">
<h1>py2store.persisters.dropbox_w_requests<a class="headerlink" href="#py2store-persisters-dropbox-w-requests" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.persisters.w_aiofile">
<span id="py2store-persisters-w-aiofile"></span><h1>py2store.persisters.w_aiofile<a class="headerlink" href="#module-py2store.persisters.w_aiofile" title="Permalink to this headline">¶</a></h1>
<p>Forwards to aiofiledol</p>
</section>
<section id="module-py2store.persisters.local_files">
<span id="py2store-persisters-local-files"></span><h1>py2store.persisters.local_files<a class="headerlink" href="#module-py2store.persisters.local_files" title="Permalink to this headline">¶</a></h1>
<p>base classes to work with local files</p>
<dl class="py class">
<dt id="py2store.persisters.local_files.DirReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">DirReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rootdir</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#DirReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.DirReader" title="Permalink to this definition">¶</a></dt>
<dd><p>KV Reader whose keys (AND VALUES) are directory full paths of the subdirectories of rootdir.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.DirpathFormatKeys">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">DirpathFormatKeys</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">inf</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#DirpathFormatKeys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.DirpathFormatKeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.FileReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">FileReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rootdir</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#FileReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.FileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>KV Reader whose keys are paths and values are:
- Another FileReader if a path points to a directory
- The bytes of the file if the path points to a file.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.FilepathFormatKeys">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">FilepathFormatKeys</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span><span class="p">:</span> <span class="n">str</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">inf</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#FilepathFormatKeys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.FilepathFormatKeys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py exception">
<dt id="py2store.persisters.local_files.FolderNotFoundError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">FolderNotFoundError</code><a class="reference internal" href="_modules/py2store/persisters/local_files.html#FolderNotFoundError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.FolderNotFoundError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.LocalFileRWD">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">LocalFileRWD</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">open_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#LocalFileRWD"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.LocalFileRWD" title="Permalink to this definition">¶</a></dt>
<dd><p>A class providing get, set and delete functionality using local files as the storage backend.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.LocalFileStreamGetter">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">LocalFileStreamGetter</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">open_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#LocalFileStreamGetter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.LocalFileStreamGetter" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to get stream objects of local open files.
The class can only get keys, and only to read, write (destructive or append).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">mkdtemp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rootdir</span> <span class="o">=</span> <span class="n">mkdtemp</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">appendable_stream</span> <span class="o">=</span> <span class="n">LocalFileStreamGetter</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;a+&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">reader</span> <span class="o">=</span> <span class="n">PathFormatPersister</span><span class="p">(</span><span class="n">rootdir</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filepath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rootdir</span><span class="p">,</span> <span class="s1">&#39;tmp.txt&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">appendable_stream</span><span class="p">[</span><span class="n">filepath</span><span class="p">]</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">reader</span><span class="p">[</span><span class="n">filepath</span><span class="p">])</span>
<span class="go">hello</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">appendable_stream</span><span class="p">[</span><span class="n">filepath</span><span class="p">]</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39; world&#39;</span><span class="p">)</span>
<span class="go">6</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">reader</span><span class="p">[</span><span class="n">filepath</span><span class="p">])</span>
<span class="go">hello world</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.PathFormatPersister">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">PathFormatPersister</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_format</span></em>, <em class="sig-param"><span class="n">max_levels</span><span class="p">:</span> <span class="n">int</span> <span class="o">=</span> <span class="default_value">inf</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">open_kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#PathFormatPersister"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.PathFormatPersister" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.PrefixedDirpathsRecursive">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">PrefixedDirpathsRecursive</code><a class="reference internal" href="_modules/py2store/persisters/local_files.html#PrefixedDirpathsRecursive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.PrefixedDirpathsRecursive" title="Permalink to this definition">¶</a></dt>
<dd><p>Keys collection for local files, where the keys are full filepaths RECURSIVELY under a given root dir _prefix.
This mixin adds iteration (__iter__), length (__len__), and containment (__contains__(k)).</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.PrefixedFilepaths">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">PrefixedFilepaths</code><a class="reference internal" href="_modules/py2store/persisters/local_files.html#PrefixedFilepaths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.PrefixedFilepaths" title="Permalink to this definition">¶</a></dt>
<dd><p>Keys collection for local files, where the keys are full filepaths DIRECTLY under a given root dir _prefix.
This mixin adds iteration (__iter__), length (__len__), and containment (__contains__(k)).</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.persisters.local_files.PrefixedFilepathsRecursive">
<em class="property">class </em><code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">PrefixedFilepathsRecursive</code><a class="reference internal" href="_modules/py2store/persisters/local_files.html#PrefixedFilepathsRecursive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.PrefixedFilepathsRecursive" title="Permalink to this definition">¶</a></dt>
<dd><p>Keys collection for local files, where the keys are full filepaths RECURSIVELY under a given root dir _prefix.
This mixin adds iteration (__iter__), length (__len__), and containment (__contains__(k)).</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.persisters.local_files.ensure_slash_suffix">
<code class="sig-prename descclassname">py2store.persisters.local_files.</code><code class="sig-name descname">ensure_slash_suffix</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span><span class="p">:</span> <span class="n">str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/persisters/local_files.html#ensure_slash_suffix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.persisters.local_files.ensure_slash_suffix" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a file separation (/ or ) at the end of path str, if not already present.</p>
</dd></dl>

</section>
<section id="py2store-persisters-arangodb-w-pyarango">
<h1>py2store.persisters.arangodb_w_pyarango<a class="headerlink" href="#py2store-persisters-arangodb-w-pyarango" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-cassandra-in-progress">
<h1>py2store.persisters._cassandra_in_progress<a class="headerlink" href="#py2store-persisters-cassandra-in-progress" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-couchdb-in-progress">
<h1>py2store.persisters._couchdb_in_progress<a class="headerlink" href="#py2store-persisters-couchdb-in-progress" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.persisters.s3_w_boto3">
<span id="py2store-persisters-s3-w-boto3"></span><h1>py2store.persisters.s3_w_boto3<a class="headerlink" href="#module-py2store.persisters.s3_w_boto3" title="Permalink to this headline">¶</a></h1>
<p>Forwards to s3dol.s3_w_boto3</p>
</section>
<section id="py2store-persisters-postgres-w-psycopg2-in-progress">
<h1>py2store.persisters._postgres_w_psycopg2_in_progress<a class="headerlink" href="#py2store-persisters-postgres-w-psycopg2-in-progress" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-ssh-persister">
<h1>py2store.persisters.ssh_persister<a class="headerlink" href="#py2store-persisters-ssh-persister" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-persisters-mongo-w-pymongo">
<h1>py2store.persisters.mongo_w_pymongo<a class="headerlink" href="#py2store-persisters-mongo-w-pymongo" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.persisters.googledrive_w_pydrive">
<span id="py2store-persisters-googledrive-w-pydrive"></span><h1>py2store.persisters.googledrive_w_pydrive<a class="headerlink" href="#module-py2store.persisters.googledrive_w_pydrive" title="Permalink to this headline">¶</a></h1>
<p>Forwards to pydrivedol</p>
</section>
<section id="module-py2store.sources">
<span id="py2store-sources"></span><h1>py2store.sources<a class="headerlink" href="#module-py2store.sources" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.sources:</p>
<p>This module contains key-value views of disparate sources.</p>
</section>
<section id="module-py2store.dig">
<span id="py2store-dig"></span><h1>py2store.dig<a class="headerlink" href="#module-py2store.dig" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.dig:</p>
<p>Layers introspection</p>
</section>
<section id="module-py2store.serializers.pickled">
<span id="py2store-serializers-pickled"></span><h1>py2store.serializers.pickled<a class="headerlink" href="#module-py2store.serializers.pickled" title="Permalink to this headline">¶</a></h1>
<p>functions to pickle objects</p>
<dl class="py function">
<dt id="py2store.serializers.pickled.mk_marshal_rw_funcs">
<code class="sig-prename descclassname">py2store.serializers.pickled.</code><code class="sig-name descname">mk_marshal_rw_funcs</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/serializers/pickled.html#mk_marshal_rw_funcs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.serializers.pickled.mk_marshal_rw_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a reader and writer using marshal. That is, a pair of parametrized loads and dumps</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">read</span><span class="p">,</span> <span class="n">write</span> <span class="o">=</span> <span class="n">mk_marshal_rw_funcs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;simple&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;more&#39;</span><span class="p">,</span> <span class="s1">&#39;complex&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">serialized_d</span> <span class="o">=</span> <span class="n">write</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deserialized_d</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">serialized_d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">deserialized_d</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.serializers.pickled.mk_pickle_rw_funcs">
<code class="sig-prename descclassname">py2store.serializers.pickled.</code><code class="sig-name descname">mk_pickle_rw_funcs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fix_imports</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">protocol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">pickle_encoding</span><span class="o">=</span><span class="default_value">'ASCII'</span></em>, <em class="sig-param"><span class="n">pickle_errors</span><span class="o">=</span><span class="default_value">'strict'</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/serializers/pickled.html#mk_pickle_rw_funcs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.serializers.pickled.mk_pickle_rw_funcs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a reader and writer using pickle. That is, a pair of parametrized loads and dumps</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">read</span><span class="p">,</span> <span class="n">write</span> <span class="o">=</span> <span class="n">mk_pickle_rw_funcs</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;simple&#39;</span><span class="p">,</span> <span class="s1">&#39;and&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="sa">b</span><span class="s1">&#39;more&#39;</span><span class="p">,</span> <span class="s1">&#39;complex&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.2</span><span class="p">,</span> <span class="nb">dict</span><span class="p">]}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">serialized_d</span> <span class="o">=</span> <span class="n">write</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deserialized_d</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">serialized_d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">deserialized_d</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="py2store-serializers-jsonization">
<h1>py2store.serializers.jsonization<a class="headerlink" href="#py2store-serializers-jsonization" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.serializers">
<span id="py2store-serializers"></span><h1>py2store.serializers<a class="headerlink" href="#module-py2store.serializers" title="Permalink to this headline">¶</a></h1>
<p>a package of serializers</p>
</section>
<section id="py2store-serializers-sequential">
<h1>py2store.serializers.sequential<a class="headerlink" href="#py2store-serializers-sequential" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-serializers-regular-panel-data">
<h1>py2store.serializers.regular_panel_data<a class="headerlink" href="#py2store-serializers-regular-panel-data" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-serializers-audio">
<h1>py2store.serializers.audio<a class="headerlink" href="#py2store-serializers-audio" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.caching">
<span id="py2store-caching"></span><h1>py2store.caching<a class="headerlink" href="#module-py2store.caching" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.caching:</p>
<p>Tools to add caching layers to stores.</p>
</section>
<section id="py2store-scrap">
<h1>py2store.scrap<a class="headerlink" href="#py2store-scrap" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-scrap-new-gen-local">
<h1>py2store.scrap.new_gen_local<a class="headerlink" href="#py2store-scrap-new-gen-local" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.examples.write_caches">
<span id="py2store-examples-write-caches"></span><h1>py2store.examples.write_caches<a class="headerlink" href="#module-py2store.examples.write_caches" title="Permalink to this headline">¶</a></h1>
<p>stores that implement various write caching algorithms</p>
<dl class="py function">
<dt id="py2store.examples.write_caches.timestamp_on_cache_and_concatenate_all_values">
<code class="sig-prename descclassname">py2store.examples.write_caches.</code><code class="sig-name descname">timestamp_on_cache_and_concatenate_all_values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/examples/write_caches.html#timestamp_on_cache_and_concatenate_all_values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.examples.write_caches.timestamp_on_cache_and_concatenate_all_values" title="Permalink to this definition">¶</a></dt>
<dd><p>The cache timestamps (with system clock) every item on insertion (append) and uses the min timestamp as
a key for storage.</p>
</dd></dl>

</section>
<section id="module-py2store.examples">
<span id="py2store-examples"></span><h1>py2store.examples<a class="headerlink" href="#module-py2store.examples" title="Permalink to this headline">¶</a></h1>
<p>modules demoing various uses of py2store</p>
</section>
<section id="module-py2store.examples.python_code_stats">
<span id="py2store-examples-python-code-stats"></span><h1>py2store.examples.python_code_stats<a class="headerlink" href="#module-py2store.examples.python_code_stats" title="Permalink to this headline">¶</a></h1>
<p>Note: Moved to umpyre (pip install umpyre)</p>
<p>Get stats about packages. Your own, or other’s.
Things like…</p>
<p># &gt;&gt;&gt; import collections
# &gt;&gt;&gt; modules_info_df(collections)
#                       lines  empty_lines  …  num_of_functions  num_of_classes
# collections.__init__   1273          189  …                 1               9
# collections.abc           3            1  …                 0              25
# &lt;BLANKLINE&gt;
# [2 rows x 7 columns]
# &gt;&gt;&gt; modules_info_df_stats(collections.abc)
# lines                      1276.000000
# empty_lines                 190.000000
# comment_lines                73.000000
# docs_lines                  133.000000
# function_lines              138.000000
# num_of_functions              1.000000
# num_of_classes               34.000000
# empty_lines_ratio             0.148903
# comment_lines_ratio           0.057210
# function_lines_ratio          0.108150
# mean_lines_per_function     138.000000
# dtype: float64
# &gt;&gt;&gt; stats_of([‘urllib’, ‘json’, ‘collections’])
#                               urllib         json  collections
# empty_lines_ratio           0.157034     0.136818     0.148903
# comment_lines_ratio         0.074142     0.038432     0.057210
# function_lines_ratio        0.213907     0.449654     0.108150
# mean_lines_per_function    13.463768    41.785714   138.000000
# lines                    4343.000000  1301.000000  1276.000000
# empty_lines               682.000000   178.000000   190.000000
# comment_lines             322.000000    50.000000    73.000000
# docs_lines                425.000000   218.000000   133.000000
# function_lines            929.000000   585.000000   138.000000
# num_of_functions           69.000000    14.000000     1.000000
# num_of_classes             55.000000     3.000000    34.000000</p>
</section>
<section id="module-py2store.examples.kv_walking">
<span id="py2store-examples-kv-walking"></span><h1>py2store.examples.kv_walking<a class="headerlink" href="#module-py2store.examples.kv_walking" title="Permalink to this headline">¶</a></h1>
<p>walking through kv stores</p>
<dl class="py class">
<dt id="py2store.examples.kv_walking.SrcReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.examples.kv_walking.</code><code class="sig-name descname">SrcReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">src</span></em>, <em class="sig-param"><span class="n">src_to_keys</span></em>, <em class="sig-param"><span class="n">key_to_obj</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/examples/kv_walking.html#SrcReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.examples.kv_walking.SrcReader" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="py2store.examples.kv_walking.SrcReader.update_keys_cache">
<code class="sig-name descname">update_keys_cache</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#py2store.examples.kv_walking.SrcReader.update_keys_cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the _keys_cache by calling its {} method</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="py2store.examples.kv_walking.conjunction">
<code class="sig-prename descclassname">py2store.examples.kv_walking.</code><code class="sig-name descname">conjunction</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/examples/kv_walking.html#conjunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.examples.kv_walking.conjunction" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">will</span> <span class="pre">be</span> <span class="pre">equal</span> <span class="pre">to</span>
<span class="pre">`</span></code>
func_1(<a href="#id11"><span class="problematic" id="id12">*</span></a>args, <a href="#id13"><span class="problematic" id="id14">**</span></a>kwargs) &amp; … &amp; func_n(<a href="#id15"><span class="problematic" id="id16">*</span></a>args, <a href="#id17"><span class="problematic" id="id18">**</span></a>kwargs)
<a href="#id19"><span class="problematic" id="id20">``</span></a>`
for all <cite>args, kwargs</cite>.</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.examples.kv_walking.kv_walk">
<code class="sig-prename descclassname">py2store.examples.kv_walking.</code><code class="sig-name descname">kv_walk</code><span class="sig-paren">(</span><em class="sig-param">v: collections.abc.Mapping</em>, <em class="sig-param">yield_func=&lt;function asis&gt;</em>, <em class="sig-param">walk_filt=&lt;function val_is_mapping&gt;</em>, <em class="sig-param">pkv_to_pv=&lt;function tuple_keypath_and_val&gt;</em>, <em class="sig-param">p=()</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/examples/kv_walking.html#kv_walk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.examples.kv_walking.kv_walk" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>v</strong> – </p></li>
<li><p><strong>yield_func</strong> – (pp, k, vv) -&gt; what ever you want the gen to yield</p></li>
<li><p><strong>walk_filt</strong> – (p, k, vv) -&gt; (bool) whether to explore the nested structure v further</p></li>
<li><p><strong>pkv_to_pv</strong> – (p, k, v) -&gt; (pp, vv)
where pp is a form of p + k (update of the path with the new node k)
and vv is the value that will be used by both walk_filt and yield_func</p></li>
<li><p><strong>p</strong> – The path to v</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kv_walk</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
<span class="go">[((&#39;a&#39;,), &#39;a&#39;, 1), ((&#39;b&#39;,), &#39;b&#39;, {&#39;c&#39;: 2, &#39;d&#39;: 3}), ((&#39;b&#39;, &#39;c&#39;), &#39;c&#39;, 2), ((&#39;b&#39;, &#39;d&#39;), &#39;d&#39;, 3)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kv_walk</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;b.c&#39;, &#39;b.d&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">kv_walk</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">p</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p</span><span class="p">)))</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;b.c&#39;, &#39;b.d&#39;]</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.my">
<span id="py2store-my"></span><h1>py2store.my<a class="headerlink" href="#module-py2store.my" title="Permalink to this headline">¶</a></h1>
<p>functionalities meant to be configurable</p>
</section>
<section id="module-py2store.my.grabbers">
<span id="py2store-my-grabbers"></span><h1>py2store.my.grabbers<a class="headerlink" href="#module-py2store.my.grabbers" title="Permalink to this headline">¶</a></h1>
<p>define stores (and functions) so they give you data as you want it, depending on the extension</p>
</section>
<section id="module-py2store.trans">
<span id="py2store-trans"></span><h1>py2store.trans<a class="headerlink" href="#module-py2store.trans" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.trans:</p>
<p>Transformation/wrapping tools</p>
</section>
<section id="module-py2store.key_mappers.str_utils">
<span id="py2store-key-mappers-str-utils"></span><h1>py2store.key_mappers.str_utils<a class="headerlink" href="#module-py2store.key_mappers.str_utils" title="Permalink to this headline">¶</a></h1>
<p>utils from strings</p>
<dl class="py function">
<dt id="py2store.key_mappers.str_utils.args_and_kwargs_indices">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">args_and_kwargs_indices</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#args_and_kwargs_indices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.args_and_kwargs_indices" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the sets of indices and names used in manual specification of format strings, or None, None if auto spec.
:param format_string: A format string (i.e. a string with {…} to mark parameter placement and formatting</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None, None if format_string is an automatic specification
set_of_indices_used, set_of_fields_used if it is a manual specification</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">format_string</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> (no 1) </span><span class="si">{2}</span><span class="s1">, </span><span class="si">{see}</span><span class="s1"> this, </span><span class="si">{0}</span><span class="s1"> is a duplicate (appeared before) and </span><span class="si">{name}</span><span class="s1"> is string-named&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">args_and_kwargs_indices</span><span class="p">(</span><span class="n">format_string</span><span class="p">)</span> <span class="o">==</span> <span class="p">({</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;see&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_string</span> <span class="o">=</span> <span class="s1">&#39;This is a format string with only automatic field specification: </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1"> etc.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">args_and_kwargs_indices</span><span class="p">(</span><span class="n">format_string</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="nb">set</span><span class="p">(),</span> <span class="nb">set</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.auto_field_format_str">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">auto_field_format_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#auto_field_format_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.auto_field_format_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an auto field version of the format_str</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>format_str</strong> – A format string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A transformed format_str that has no names {inside} {formatting} {braces}.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auto_field_format_str</span><span class="p">(</span><span class="s1">&#39;R/</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{one}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{two}</span><span class="s1">/T&#39;</span><span class="p">)</span>
<span class="go">&#39;R/{}/{}/{}/{}/T&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.compile_str_from_parsed">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">compile_str_from_parsed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parsed</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#compile_str_from_parsed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.compile_str_from_parsed" title="Permalink to this definition">¶</a></dt>
<dd><p>The (quasi-)inverse of string.Formatter.parse.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parsed</strong> – iterator of (literal_text, field_name, format_spec, conversion) tuples,</p></li>
<li><p><strong>yield by string.Formatter.parse</strong> (<em>as</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A format string that would produce such a parsed input.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span>  <span class="s2">&quot;ROOT/</span><span class="si">{}</span><span class="s2">/</span><span class="si">{0!r}</span><span class="s2">/{1!i:format}/hello</span><span class="si">{:0.02f}</span><span class="s2">TAIL&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">compile_str_from_parsed</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">Formatter</span><span class="p">()</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="o">==</span> <span class="n">s</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or, if you want to see more details...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parsed</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">Formatter</span><span class="p">()</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parsed</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">(&#39;ROOT/&#39;, &#39;&#39;, &#39;&#39;, None)</span>
<span class="go">(&#39;/&#39;, &#39;0&#39;, &#39;&#39;, &#39;r&#39;)</span>
<span class="go">(&#39;/&#39;, &#39;1&#39;, &#39;format&#39;, &#39;i&#39;)</span>
<span class="go">(&#39;/hello&#39;, &#39;&#39;, &#39;0.02f&#39;, None)</span>
<span class="go">(&#39;TAIL&#39;, None, None, None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compile_str_from_parsed</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
<span class="go">&#39;ROOT/{}/{0!r}/{1!i:format}/hello{:0.02f}TAIL&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.format_params_in_str_format">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">format_params_in_str_format</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#format_params_in_str_format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.format_params_in_str_format" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the “parameter” indices/names of the format_string</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>format_string</strong> – A format string (i.e. a string with {…} to mark parameter placement and formatting</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of parameter indices used in the format string, in the order they appear, with repetition.
Parameter indices could be integers, strings, or None (to denote “automatic field numbering”.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">format_string</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0}</span><span class="s1"> (no 1) </span><span class="si">{2}</span><span class="s1">, and </span><span class="si">{0}</span><span class="s1"> is a duplicate, </span><span class="si">{}</span><span class="s1"> is unnamed and </span><span class="si">{name}</span><span class="s1"> is string-named&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">format_params_in_str_format</span><span class="p">(</span><span class="n">format_string</span><span class="p">)</span>
<span class="go">[0, 2, 0, None, &#39;name&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.get_explicit_positions">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">get_explicit_positions</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parsed_str_format</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#get_explicit_positions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.get_explicit_positions" title="Permalink to this definition">¶</a></dt>
<dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parsed</span> <span class="o">=</span> <span class="n">parse_str_format</span><span class="p">(</span><span class="s2">&quot;all/</span><span class="si">{}</span><span class="s2">/is/</span><span class="si">{2}</span><span class="s2">/position/</span><span class="si">{except}{this}{0}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_explicit_positions</span><span class="p">(</span><span class="n">parsed</span><span class="p">)</span>
<span class="go">{0, 2}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.is_automatic_format_params">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">is_automatic_format_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_params</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#is_automatic_format_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.is_automatic_format_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Says if the format_params is from an automatic specification
See Also: is_manual_format_params and is_hybrid_format_params</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.is_automatic_format_string">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">is_automatic_format_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#is_automatic_format_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.is_automatic_format_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Says if the format_string is uses automatic specification
See Also: is_manual_format_params
&gt;&gt;&gt; is_automatic_format_string(‘Manual: indices: {1} {2}, named: {named} {fields}’)
False
&gt;&gt;&gt; is_automatic_format_string(‘Auto: only un-indexed and un-named: {} {}…’)
True
&gt;&gt;&gt; is_automatic_format_string(‘Hybrid: at least a {}, and a {0} or a {name}’)
False
&gt;&gt;&gt; is_manual_format_string(‘No formatting is both manual and automatic formatting!’)
True</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.is_hybrid_format_params">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">is_hybrid_format_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_params</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#is_hybrid_format_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.is_hybrid_format_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Says if the format_params is from a hybrid of auto and manual.
Note: Hybrid specifications are considered non-valid and can’t be formatted with format_string.format(…).
Yet, it can be useful for flexibility of expression (but will need to be resolved to be used).
See Also: is_manual_format_params and is_automatic_format_params</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.is_hybrid_format_string">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">is_hybrid_format_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#is_hybrid_format_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.is_hybrid_format_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Says if the format_params is from a hybrid of auto and manual.
Note: Hybrid specifications are considered non-valid and can’t be formatted with format_string.format(…).
Yet, it can be useful for flexibility of expression (but will need to be resolved to be used).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_hybrid_format_string</span><span class="p">(</span><span class="s1">&#39;Manual: indices: </span><span class="si">{1}</span><span class="s1"> </span><span class="si">{2}</span><span class="s1">, named: </span><span class="si">{named}</span><span class="s1"> </span><span class="si">{fields}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_hybrid_format_string</span><span class="p">(</span><span class="s1">&#39;Auto: only un-indexed and un-named: </span><span class="si">{}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">...&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_hybrid_format_string</span><span class="p">(</span><span class="s1">&#39;Hybrid: at least a </span><span class="si">{}</span><span class="s1">, and a </span><span class="si">{0}</span><span class="s1"> or a </span><span class="si">{name}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">is_manual_format_string</span><span class="p">(</span><span class="s1">&#39;No formatting is both manual and automatic formatting (so hybrid is both)!&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.is_manual_format_params">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">is_manual_format_params</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_params</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#is_manual_format_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.is_manual_format_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Says if the format_params is from a manual specification
See Also: is_automatic_format_params</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.is_manual_format_string">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">is_manual_format_string</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#is_manual_format_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.is_manual_format_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Says if the format_string uses a manual specification
See Also: is_automatic_format_string and
&gt;&gt;&gt; is_manual_format_string(‘Manual: indices: {1} {2}, named: {named} {fields}’)
True
&gt;&gt;&gt; is_manual_format_string(‘Auto: only un-indexed and un-named: {} {}…’)
False
&gt;&gt;&gt; is_manual_format_string(‘Hybrid: at least a {}, and a {0} or a {name}’)
False
&gt;&gt;&gt; is_manual_format_string(‘No formatting is both manual and automatic formatting!’)
True</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.manual_field_format_str">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">manual_field_format_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_str</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#manual_field_format_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.manual_field_format_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an auto field version of the format_str</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>format_str</strong> – A format string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A transformed format_str that has no names {inside} {formatting} {braces}.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">auto_field_format_str</span><span class="p">(</span><span class="s1">&#39;R/</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{one}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{two}</span><span class="s1">/T&#39;</span><span class="p">)</span>
<span class="go">&#39;R/{}/{}/{}/{}/T&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.n_format_params_in_str_format">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">n_format_params_in_str_format</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_string</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#n_format_params_in_str_format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.n_format_params_in_str_format" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of parameters</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.str_utils.name_fields_in_format_str">
<code class="sig-prename descclassname">py2store.key_mappers.str_utils.</code><code class="sig-name descname">name_fields_in_format_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format_str</span></em>, <em class="sig-param"><span class="n">field_names</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/str_utils.html#name_fields_in_format_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.str_utils.name_fields_in_format_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a manual field version of the format_str</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>format_str</strong> – A format string</p></li>
<li><p><strong>names</strong> – An iterable that produces enough strings to fill all of format_str fields</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A transformed format_str</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">name_fields_in_format_str</span><span class="p">(</span><span class="s1">&#39;R/</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{one}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/</span><span class="si">{two}</span><span class="s1">/T&#39;</span><span class="p">)</span>
<span class="go">&#39;R/{0}/{1}/{2}/{3}/T&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Note here that we use the field name to inject a field format as well</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">name_fields_in_format_str</span><span class="p">(</span><span class="s1">&#39;R/</span><span class="si">{foo}</span><span class="s1">/</span><span class="si">{0}</span><span class="s1">/</span><span class="si">{}</span><span class="s1">/T&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;42&#39;</span><span class="p">,</span> <span class="s1">&#39;hi:03.0f&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">])</span>
<span class="go">&#39;R/{42}/{hi:03.0f}/{world}/T&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.key_mappers.tuples">
<span id="py2store-key-mappers-tuples"></span><h1>py2store.key_mappers.tuples<a class="headerlink" href="#module-py2store.key_mappers.tuples" title="Permalink to this headline">¶</a></h1>
<p>Tools to map tuple-structured keys.
That is, converting from any of the following kinds of keys:</p>
<blockquote>
<div><ul class="simple">
<li><p>tuples (or list-like)</p></li>
<li><p>dicts</p></li>
<li><p>formatted/templated strings</p></li>
<li><p>dsv (Delimiter-Separated Values)</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt id="py2store.key_mappers.tuples.dsv_of_list">
<code class="sig-prename descclassname">py2store.key_mappers.tuples.</code><code class="sig-name descname">dsv_of_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">','</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/tuples.html#dsv_of_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.tuples.dsv_of_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Converting a list of strings to a dsv (delimiter-separated values) string.</p>
<p>Note that unlike most key mappers, there is no schema imposing size here. If you wish to impose a size
validation, do so externally (we suggest using a decorator for that).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – A list of component strings</p></li>
<li><p><strong>sep</strong> – The delimiter text used to separate a string into a list of component strings</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The delimiter-separated values (dsv) string for the input tuple</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dsv_of_list</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="go">&#39;a brown fox&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsv_of_list</span><span class="p">((</span><span class="s1">&#39;jumps&#39;</span><span class="p">,</span> <span class="s1">&#39;over&#39;</span><span class="p">),</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>  <span class="c1"># for filepaths (and see that tuple inputs work too!)</span>
<span class="go">&#39;jumps/over&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsv_of_list</span><span class="p">([</span><span class="s1">&#39;Sat&#39;</span><span class="p">,</span> <span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;1983&#39;</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>  <span class="c1"># csv: the usual delimiter-separated values format</span>
<span class="go">&#39;Sat,Jan,1,1983&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsv_of_list</span><span class="p">([</span><span class="s1">&#39;First&#39;</span><span class="p">,</span> <span class="s1">&#39;Last&#39;</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;:::&#39;</span><span class="p">)</span>  <span class="c1"># a longer delimiter</span>
<span class="go">&#39;First:::Last&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsv_of_list</span><span class="p">([</span><span class="s1">&#39;singleton&#39;</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>  <span class="c1"># when the list has only one element</span>
<span class="go">&#39;singleton&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dsv_of_list</span><span class="p">([],</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>  <span class="c1"># when the list is empty</span>
<span class="go">&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.tuples.list_of_dsv">
<code class="sig-prename descclassname">py2store.key_mappers.tuples.</code><code class="sig-name descname">list_of_dsv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">','</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/tuples.html#list_of_dsv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.tuples.list_of_dsv" title="Permalink to this definition">¶</a></dt>
<dd><p>Converting a dsv (delimiter-separated values) string to the list of it’s components.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>d</strong> – A (delimiter-separated values) string</p></li>
<li><p><strong>sep</strong> – The delimiter text used to separate the string into a list of component strings</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of component strings corresponding to the input delimiter-separated values (dsv) string</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_dsv</span><span class="p">(</span><span class="s1">&#39;a brown fox&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="go">[&#39;a&#39;, &#39;brown&#39;, &#39;fox&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">tuple</span><span class="p">(</span><span class="n">list_of_dsv</span><span class="p">(</span><span class="s1">&#39;jumps/over&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">))</span>  <span class="c1"># for filepaths</span>
<span class="go">(&#39;jumps&#39;, &#39;over&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_dsv</span><span class="p">(</span><span class="s1">&#39;Sat,Jan,1,1983&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>  <span class="c1"># csv: the usual delimiter-separated values format</span>
<span class="go">[&#39;Sat&#39;, &#39;Jan&#39;, &#39;1&#39;, &#39;1983&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_dsv</span><span class="p">(</span><span class="s1">&#39;First:::Last&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;:::&#39;</span><span class="p">)</span>  <span class="c1"># a longer delimiter</span>
<span class="go">[&#39;First&#39;, &#39;Last&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_dsv</span><span class="p">(</span><span class="s1">&#39;singleton&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>  <span class="c1"># when the list has only one element</span>
<span class="go">[&#39;singleton&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">list_of_dsv</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;@&#39;</span><span class="p">)</span>  <span class="c1"># when the string is empty</span>
<span class="go">[]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.tuples.mk_obj_of_str">
<code class="sig-prename descclassname">py2store.key_mappers.tuples.</code><code class="sig-name descname">mk_obj_of_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">constructor</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/tuples.html#mk_obj_of_str"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.tuples.mk_obj_of_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a function that transforms a string to an object. The factory making inverses of what mk_str_from_obj makes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>constructor</strong> – The function (or class) that will be used to make objects from the <a href="#id21"><span class="problematic" id="id22">**</span></a>kwargs parsed out of the
string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A function factory.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.tuples.mk_str_of_obj">
<code class="sig-prename descclassname">py2store.key_mappers.tuples.</code><code class="sig-name descname">mk_str_of_obj</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">attrs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/tuples.html#mk_str_of_obj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.tuples.mk_str_of_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a function that transforms objects to strings, using specific attributes of object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>attrs</strong> – Attributes that should be read off of the object to make the parameters of the string</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A transformation function</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@dataclass</span>
<span class="gp">... </span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">foo</span><span class="p">:</span> <span class="nb">int</span>
<span class="gp">... </span>    <span class="n">bar</span><span class="p">:</span> <span class="nb">str</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">A</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s1">&#39;rin&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">A(foo=0, bar=&#39;rin&#39;)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str_from_obj</span> <span class="o">=</span> <span class="n">mk_str_of_obj</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">str_from_obj</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;ST</span><span class="si">{foo}</span><span class="s1">/</span><span class="si">{bar}</span><span class="s1">/G&#39;</span><span class="p">)</span>
<span class="go">&#39;ST0/rin/G&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.key_mappers.tuples.str_of_tuple">
<code class="sig-prename descclassname">py2store.key_mappers.tuples.</code><code class="sig-name descname">str_of_tuple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">d</span></em>, <em class="sig-param"><span class="n">str_format</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/key_mappers/tuples.html#str_of_tuple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.key_mappers.tuples.str_of_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert tuple to str.
It’s just str_format.format(<a href="#id23"><span class="problematic" id="id24">*</span></a>d). Why even write such a function?
(1) To have a consistent interface for key conversions
(2) We want a KeyValidationError to occur here
:param d: tuple if params to str_format
:param str_format: Auto fields format string. If you have manual fields, consider auto_field_format_str to convert.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>parametrized string</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">str_of_tuple</span><span class="p">((</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;world&#39;</span><span class="p">),</span> <span class="s2">&quot;Well, </span><span class="si">{}</span><span class="s2"> dear </span><span class="si">{}</span><span class="s2">!&quot;</span><span class="p">)</span>
<span class="go">&#39;Well, hello dear world!&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="module-py2store.key_mappers.paths">
<span id="py2store-key-mappers-paths"></span><h1>py2store.key_mappers.paths<a class="headerlink" href="#module-py2store.key_mappers.paths" title="Permalink to this headline">¶</a></h1>
<p>Module that forwards to py2store.paths, kept for back-compatibility</p>
</section>
<section id="module-py2store.key_mappers.naming">
<span id="py2store-key-mappers-naming"></span><h1>py2store.key_mappers.naming<a class="headerlink" href="#module-py2store.key_mappers.naming" title="Permalink to this headline">¶</a></h1>
<p>This module only forwards to py2store.naming, and is deprecated.</p>
</section>
<section id="module-py2store.key_mappers">
<span id="py2store-key-mappers"></span><h1>py2store.key_mappers<a class="headerlink" href="#module-py2store.key_mappers" title="Permalink to this headline">¶</a></h1>
<p>key mapping</p>
</section>
<section id="module-py2store.errors">
<span id="py2store-errors"></span><h1>py2store.errors<a class="headerlink" href="#module-py2store.errors" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.errors:</p>
<p>Error objects and utils</p>
</section>
<section id="module-py2store.slib.s_configparser">
<span id="py2store-slib-s-configparser"></span><h1>py2store.slib.s_configparser<a class="headerlink" href="#module-py2store.slib.s_configparser" title="Permalink to this headline">¶</a></h1>
<p>Data Object Layer for configparser standard lib.</p>
</section>
<section id="module-py2store.slib">
<span id="py2store-slib"></span><h1>py2store.slib<a class="headerlink" href="#module-py2store.slib" title="Permalink to this headline">¶</a></h1>
<p>modules for standard libs</p>
</section>
<section id="module-py2store.slib.s_zipfile">
<span id="py2store-slib-s-zipfile"></span><h1>py2store.slib.s_zipfile<a class="headerlink" href="#module-py2store.slib.s_zipfile" title="Permalink to this headline">¶</a></h1>
<p>a data object layer for zipfile</p>
<dl class="py exception">
<dt id="py2store.slib.s_zipfile.EmptyZipError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">EmptyZipError</code><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#EmptyZipError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.EmptyZipError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.FileStreamsOfZip">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">FileStreamsOfZip</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">zip_file</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">open_kws</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#FileStreamsOfZip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.FileStreamsOfZip" title="Permalink to this definition">¶</a></dt>
<dd><p>Like FilesOfZip, but object returns are file streams instead.
So you use it like this:</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a>`
z = FileStreamsOfZip(rootdir)
with z[relpath] as fp:</p>
<blockquote>
<div><p>…  # do stuff with fp, like fp.readlines() or such…</p>
</div></blockquote>
<p><a href="#id27"><span class="problematic" id="id28">``</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a></p>
</dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.FilesOfZip">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">FilesOfZip</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">zip_file</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">open_kws</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#FilesOfZip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.FilesOfZip" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.FlatZipFilesReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">FlatZipFilesReader</code><span class="sig-paren">(</span><em class="sig-param">rootdir</em>, <em class="sig-param">subpath='.+\\.zip'</em>, <em class="sig-param">pattern_for_field=None</em>, <em class="sig-param">max_levels=0</em>, <em class="sig-param">zip_reader=&lt;class 'py2store.slib.s_zipfile.ZipReader'&gt;</em>, <em class="sig-param">**zip_reader_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#FlatZipFilesReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.FlatZipFilesReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the union of the contents of multiple zip files.
A local file reader whose keys are the zip filepaths of the rootdir and values are corresponding ZipReaders.</p>
</dd></dl>

<dl class="py exception">
<dt id="py2store.slib.s_zipfile.OverwriteNotAllowed">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">OverwriteNotAllowed</code><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#OverwriteNotAllowed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.OverwriteNotAllowed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="py2store.slib.s_zipfile.ZipFileReader">
<code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">ZipFileReader</code><a class="headerlink" href="#py2store.slib.s_zipfile.ZipFileReader" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#py2store.slib.s_zipfile.ZipFilesReader" title="py2store.slib.s_zipfile.ZipFilesReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">py2store.slib.s_zipfile.ZipFilesReader</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.ZipFileStreamsReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">ZipFileStreamsReader</code><span class="sig-paren">(</span><em class="sig-param">rootdir</em>, <em class="sig-param">subpath='.+\\.zip'</em>, <em class="sig-param">pattern_for_field=None</em>, <em class="sig-param">max_levels=0</em>, <em class="sig-param">*</em>, <em class="sig-param">zip_reader=&lt;class 'py2store.slib.s_zipfile.FileStreamsOfZip'&gt;</em>, <em class="sig-param">**zip_reader_kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#py2store.slib.s_zipfile.ZipFileStreamsReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Like ZipFilesReader, but objects returned are file streams instead.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.ZipFilesReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">ZipFilesReader</code><span class="sig-paren">(</span><em class="sig-param">rootdir</em>, <em class="sig-param">subpath='.+\\.zip'</em>, <em class="sig-param">pattern_for_field=None</em>, <em class="sig-param">max_levels=0</em>, <em class="sig-param">zip_reader=&lt;class 'py2store.slib.s_zipfile.ZipReader'&gt;</em>, <em class="sig-param">**zip_reader_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#ZipFilesReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.ZipFilesReader" title="Permalink to this definition">¶</a></dt>
<dd><p>A local file reader whose keys are the zip filepaths of the rootdir and values are corresponding ZipReaders.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.ZipFilesReaderAndBytesWriter">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">ZipFilesReaderAndBytesWriter</code><span class="sig-paren">(</span><em class="sig-param">rootdir</em>, <em class="sig-param">subpath='.+\\.zip'</em>, <em class="sig-param">pattern_for_field=None</em>, <em class="sig-param">max_levels=0</em>, <em class="sig-param">zip_reader=&lt;class 'py2store.slib.s_zipfile.ZipReader'&gt;</em>, <em class="sig-param">**zip_reader_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#ZipFilesReaderAndBytesWriter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.ZipFilesReaderAndBytesWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Like ZipFilesReader, but the ability to write bytes (assumed to be valid bytes of the zip format) to a key</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.ZipReader">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">ZipReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">zip_file</span></em>, <em class="sig-param"><span class="n">prefix</span><span class="o">=</span><span class="default_value">''</span></em>, <em class="sig-param"><span class="n">open_kws</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">file_info_filt</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#ZipReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.ZipReader" title="Permalink to this definition">¶</a></dt>
<dd><p>A KvReader to read the contents of a zip file.
Provides a KV perspective of <a class="reference external" href="https://docs.python.org/3/library/zipfile.html">https://docs.python.org/3/library/zipfile.html</a></p>
<p><code class="docutils literal notranslate"><span class="pre">ZipReader</span></code> has two value categories: Directories and Files.
Both categories are distinguishable by the keys, through the “ends with slash” convention.</p>
<p>When a file, the value return is bytes, as usual.</p>
<dl class="simple">
<dt>When a directory, the value returned is a <code class="docutils literal notranslate"><span class="pre">ZipReader</span></code> itself, with all params the same, except for the <code class="docutils literal notranslate"><span class="pre">prefix</span></code></dt><dd><p>which serves <cite>to specify the subfolder (that is, ``prefix`</cite> acts as a filter).</p>
</dd>
</dl>
<p>Note: If you get data zipped by a mac, you might get some junk along with it.
Namely <cite>__MACOSX</cite> folders <cite>.DS_Store</cite> files. I won’t rant about it, since others have.
But you might find it useful to remove them from view. One choice is to use <cite>py2store.trans.filt_iter</cite>
to get a filtered view of the zips contents. In most cases, this should do the job:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">#</span> <span class="pre">applied</span> <span class="pre">to</span> <span class="pre">store</span> <span class="pre">instance</span> <span class="pre">or</span> <span class="pre">class:</span>
<span class="pre">store</span> <span class="pre">=</span> <span class="pre">filt_iter(filt=lambda</span> <span class="pre">x:</span> <span class="pre">not</span> <span class="pre">x.startswith('__MACOSX')</span> <span class="pre">and</span> <span class="pre">'.DS_Store'</span> <span class="pre">not</span> <span class="pre">in</span> <span class="pre">x)(store)</span>
<span class="pre">`</span></code></p>
<p>Another option is just to remove these from the zip file once and for all. In unix-like systems:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">zip</span> <span class="pre">-d</span> <span class="pre">filename.zip</span> <span class="pre">__MACOSX/\*</span>
<span class="pre">zip</span> <span class="pre">-d</span> <span class="pre">filename.zip</span> <span class="pre">\*/.DS_Store</span>
<span class="pre">`</span></code></p>
<p class="rubric">Examples</p>
<p># &gt;&gt;&gt; s = ZipReader(‘/path/to/some_zip_file.zip’)
# &gt;&gt;&gt; len(s)
# 53432
# &gt;&gt;&gt; list(s)[:3]  # the first 3 elements (well… their keys)
# [‘odir/’, ‘odir/app/’, ‘odir/app/data/’]
# &gt;&gt;&gt; list(s)[-3:]  # the last 3 elements (well… their keys)
# [‘odir/app/data/audio/d/1574287049078391/m/Ctor.json’,
#  ‘odir/app/data/audio/d/1574287049078391/m/intensity.json’,
#  ‘odir/app/data/run/status.json’]
# &gt;&gt;&gt; # getting a file (note that by default, you get bytes, so need to decode)
# &gt;&gt;&gt; s[‘odir/app/data/run/status.json’].decode()
# b’{“test_phase_number”: 9, “test_phase”: “TestActions.IGNORE_TEST”, “session_id”: 0}’
# &gt;&gt;&gt; # when you ask for the contents for a key that’s a directory,
# &gt;&gt;&gt; # you get a ZipReader filtered for that prefix:
# &gt;&gt;&gt; s[‘odir/app/data/audio/’]
# ZipReader(‘/path/to/some_zip_file.zip’, ‘odir/app/data/audio/’, {}, &lt;function take_everything at 0x1538999e0&gt;)
# &gt;&gt;&gt; # Often, you only want files (not directories)
# &gt;&gt;&gt; # You can filter directories out using the file_info_filt argument
# &gt;&gt;&gt; s = ZipReader(‘/path/to/some_zip_file.zip’, file_info_filt=ZipReader.FILES_ONLY)
# &gt;&gt;&gt; len(s)  # compare to the 53432 above, that contained dirs too
# 53280
# &gt;&gt;&gt; list(s)[:3]  # first 3 keys are all files now
# [‘odir/app/data/plc/d/1574304926795633/d/1574305026895702’,
#  ‘odir/app/data/plc/d/1574304926795633/d/1574305276853053’,
#  ‘odir/app/data/plc/d/1574304926795633/d/1574305159343326’]
# &gt;&gt;&gt;
# &gt;&gt;&gt; # ZipReader.FILES_ONLY and ZipReader.DIRS_ONLY are just convenience filt functions
# &gt;&gt;&gt; # Really, you can provide any custom one yourself.
# &gt;&gt;&gt; # This filter function should take a ZipInfo object, and return True or False.
# &gt;&gt;&gt; # (<a class="reference external" href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipInfo">https://docs.python.org/3/library/zipfile.html#zipfile.ZipInfo</a>)
# &gt;&gt;&gt;
# &gt;&gt;&gt; import re
# &gt;&gt;&gt; p = re.compile(‘audio.*.json$’)
# &gt;&gt;&gt; my_filt_func = lambda fileinfo: bool(p.search(fileinfo.filename))
# &gt;&gt;&gt; s = ZipReader(‘/Users/twhalen/Downloads/2019_11_21.zip’, file_info_filt=my_filt_func)
# &gt;&gt;&gt; len(s)
# 48
# &gt;&gt;&gt; list(s)[:3]
# [‘odir/app/data/audio/d/1574333557263758/m/Ctor.json’,
#  ‘odir/app/data/audio/d/1574333557263758/m/intensity.json’,
#  ‘odir/app/data/audio/d/1574288084739961/m/Ctor.json’]</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.slib.s_zipfile.ZipStore">
<em class="property">class </em><code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">ZipStore</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">zip_filepath</span></em>, <em class="sig-param"><span class="n">compression</span><span class="o">=</span><span class="default_value">8</span></em>, <em class="sig-param"><span class="n">allow_overwrites</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">pwd</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#ZipStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.ZipStore" title="Permalink to this definition">¶</a></dt>
<dd><p>Zip read and writing.
When you want to read zips, there’s the <cite>FilesOfZip</cite>, <cite>ZipReader</cite>, or <cite>ZipFilesReader</cite> we know and love.</p>
<p>Sometimes though, you want to write to zips too. For this, we have <cite>ZipStore</cite>.</p>
<p>Since ZipStore can write to a zip, it’s read functionality is not going to assume static data,
and cache things, as your favorite zip readers did.
This, and the acrobatics need to disguise the weird zipfile into something more… key-value natural,
makes for a not so efficient store, out of the box.</p>
<dl class="simple">
<dt>I advise using one of the zip readers if all you need to do is read, or subclassing or</dt><dd><p>wrapping ZipStore with caching layers if it is appropriate to you.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py2store.slib.s_zipfile.func_conjunction">
<code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">func_conjunction</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func1</span></em>, <em class="sig-param"><span class="n">func2</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#func_conjunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.func_conjunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a function that is equivalent to lambda x: func1(x) and func2(x)</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.slib.s_zipfile.mk_flatzips_store">
<code class="sig-prename descclassname">py2store.slib.s_zipfile.</code><code class="sig-name descname">mk_flatzips_store</code><span class="sig-paren">(</span><em class="sig-param">dir_of_zips</em>, <em class="sig-param">zip_pair_path_preproc=&lt;built-in function sorted&gt;</em>, <em class="sig-param">mk_store=&lt;class 'py2store.slib.s_zipfile.FlatZipFilesReader'&gt;</em>, <em class="sig-param">**extra_mk_store_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/slib/s_zipfile.html#mk_flatzips_store"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.slib.s_zipfile.mk_flatzips_store" title="Permalink to this definition">¶</a></dt>
<dd><p>A store so that you can work with a folder that has a bunch of zip files,
as if they’ve all been extracted in the same folder.
Note that <cite>zip_pair_path_preproc</cite> can be used to control how to resolve key conflicts
(i.e. when you get two different zip files that have a same path in their contents).
The last path encountered by <cite>zip_pair_path_preproc(zip_path_pairs)</cite> is the one that will be used, so
one should make <cite>zip_pair_path_preproc</cite> act accordingly.</p>
</dd></dl>

</section>
<section id="module-py2store.base">
<span id="py2store-base"></span><h1>py2store.base<a class="headerlink" href="#module-py2store.base" title="Permalink to this headline">¶</a></h1>
<p>Forwards to dol.base:</p>
<p>Base classes for making stores.
In the language of the collections.abc module, a store is a MutableMapping that is configured to work with a specific
representation of keys, serialization of objects (python values), and persistence of the serialized data.</p>
<p>That is, stores offer the same interface as a dict, but where the actual implementation of writes, reads, and listing
are configurable.</p>
<p>Consider the following example. You’re store is meant to store waveforms as wav files on a remote server.
Say waveforms are represented in python as a tuple (wf, sr), where wf is a list of numbers and sr is the sample
rate, an int). The __setitem__ method will specify how to store bytes on a remote server, but you’ll need to specify
how to SERIALIZE (wf, sr) to the bytes that constitute that wav file: _data_of_obj specifies that.
You might also want to read those wav files back into a python (wf, sr) tuple. The __getitem__ method will get
you those bytes from the server, but the store will need to know how to DESERIALIZE those bytes back into a python
object: _obj_of_data specifies that</p>
<p>Further, say you’re storing these .wav files in /some/folder/on/the/server/, but you don’t want the store to use
these as the keys. For one, it’s annoying to type and harder to read. But more importantly, it’s an irrelevant
implementation detail that shouldn’t be exposed. THe _id_of_key and _key_of_id pair are what allow you to
add this key interface layer.</p>
<p>These key converters object serialization methods default to the identity (i.e. they return the input as is).
This means that you don’t have to implement these as all, and can choose to implement these concerns within
the storage methods themselves.</p>
</section>
<section id="py2store-selectors-mg-selectors">
<h1>py2store.selectors.mg_selectors<a class="headerlink" href="#py2store-selectors-mg-selectors" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-selectors-mongoquery">
<h1>py2store.selectors.mongoquery<a class="headerlink" href="#py2store-selectors-mongoquery" title="Permalink to this headline">¶</a></h1>
</section>
<section id="py2store-selectors">
<h1>py2store.selectors<a class="headerlink" href="#py2store-selectors" title="Permalink to this headline">¶</a></h1>
</section>
<section id="module-py2store.parse_format">
<span id="py2store-parse-format"></span><h1>py2store.parse_format<a class="headerlink" href="#module-py2store.parse_format" title="Permalink to this headline">¶</a></h1>
<p>Modified from <a class="reference external" href="https://github.com/r1chardj0n3s/parse">https://github.com/r1chardj0n3s/parse</a></p>
<p>Parse strings using a specification based on the Python format() syntax.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">parse()</span></code> is the opposite of <code class="docutils literal notranslate"><span class="pre">format()</span></code></p>
</div></blockquote>
<p>From there it’s a simple thing to parse a string:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;It&#39;s </span><span class="si">{}</span><span class="s2">, I love it!&quot;</span><span class="p">,</span> <span class="s2">&quot;It&#39;s spam, I love it!&quot;</span><span class="p">)</span>
<span class="go">&lt;Result (&#39;spam&#39;,) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;spam&#39;</span>
</pre></div>
</div>
<p>Or to search a string for some pattern:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;Age: </span><span class="si">{:d}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;Name: Rufus</span><span class="se">\n</span><span class="s1">Age: 42</span><span class="se">\n</span><span class="s1">Color: red</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">&lt;Result (42,) {}&gt;</span>
</pre></div>
</div>
<p>Or find all the occurrences of some pattern in a string:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">fixed</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">findall</span><span class="p">(</span><span class="s2">&quot;&gt;</span><span class="si">{}</span><span class="s2">&lt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;p&gt;the &lt;b&gt;bold&lt;/b&gt; text&lt;/p&gt;&quot;</span><span class="p">))</span>
<span class="go">&#39;the bold text&#39;</span>
</pre></div>
</div>
<p>If you’re going to use the same pattern to match lots of strings you can
compile it once:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="s2">&quot;It&#39;s </span><span class="si">{}</span><span class="s2">, I love it!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="go">&lt;Parser &quot;It&#39;s {}, I love it!&quot;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;It&#39;s spam, I love it!&quot;</span><span class="p">)</span>
<span class="go">&lt;Result (&#39;spam&#39;,) {}&gt;</span>
</pre></div>
</div>
<p>(“compile” is not exported for <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">*</span></code> usage as it would override the
built-in <code class="docutils literal notranslate"><span class="pre">compile()</span></code> function)</p>
<p>The default behaviour is to match strings case insensitively. You may match with
case by specifying <cite>case_sensitive=True</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;SPAM&#39;</span><span class="p">,</span> <span class="s1">&#39;spam&#39;</span><span class="p">,</span> <span class="n">case_sensitive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
<section id="format-syntax">
<h2>Format Syntax<a class="headerlink" href="#format-syntax" title="Permalink to this headline">¶</a></h2>
<p>A basic version of the <a class="reference external" href="http://docs.python.org/library/string.html#format-string-syntax">Format String Syntax</a> is supported with anonymous
(fixed-position), named and formatted fields:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{[</span><span class="n">field</span> <span class="n">name</span><span class="p">]:[</span><span class="nb">format</span> <span class="n">spec</span><span class="p">]}</span>
</pre></div>
</div>
<p>Field names must be a valid Python identifiers, including dotted names;
element indexes imply dictionaries (see below for example).</p>
<p>Numbered fields are also not supported: the result of parsing will include
the parsed fields in the order they are parsed.</p>
<p>The conversion of fields to types other than strings is done based on the
type in the format specification, which mirrors the <code class="docutils literal notranslate"><span class="pre">format()</span></code> behaviour.
There are no “!” field conversions like <code class="docutils literal notranslate"><span class="pre">format()</span></code> has.</p>
<p>Some simple parse() format string examples:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Bring me a </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;Bring me a shrubbery&quot;</span><span class="p">)</span>
<span class="go">&lt;Result (&#39;shrubbery&#39;,) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s2">&quot;The </span><span class="si">{}</span><span class="s2"> who say </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;The knights who say Ni!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">&lt;Result (&#39;knights&#39;, &#39;Ni!&#39;) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">fixed</span><span class="p">)</span>
<span class="go">(&#39;knights&#39;, &#39;Ni!&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Bring out the holy </span><span class="si">{item}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;Bring out the holy hand grenade&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">&lt;Result () {&#39;item&#39;: &#39;hand grenade&#39;}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">named</span><span class="p">)</span>
<span class="go">{&#39;item&#39;: &#39;hand grenade&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;item&#39;</span><span class="p">])</span>
<span class="go">hand grenade</span>
</pre></div>
</div>
<p>Dotted names and indexes are possible though the application must make
additional sense of the result:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s2">&quot;Mmm, </span><span class="si">{food.type}</span><span class="s2">, I love it!&quot;</span><span class="p">,</span> <span class="s2">&quot;Mmm, spam, I love it!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">&lt;Result () {&#39;food.type&#39;: &#39;spam&#39;}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">named</span><span class="p">)</span>
<span class="go">{&#39;food.type&#39;: &#39;spam&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;food.type&#39;</span><span class="p">])</span>
<span class="go">spam</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s2">&quot;My quest is </span><span class="si">{quest[name]}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;My quest is to seek the holy grail!&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="go">&lt;Result () {&#39;quest&#39;: {&#39;name&#39;: &#39;to seek the holy grail!&#39;}}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;quest&#39;</span><span class="p">])</span>
<span class="go">{&#39;name&#39;: &#39;to seek the holy grail!&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;quest&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
<span class="go">to seek the holy grail!</span>
</pre></div>
</div>
<p>If the text you’re matching has braces in it you can match those by including
a double-brace <code class="docutils literal notranslate"><span class="pre">{{</span></code> or <code class="docutils literal notranslate"><span class="pre">}}</span></code> in your format string, just like format() does.</p>
</section>
<section id="format-specification">
<h2>Format Specification<a class="headerlink" href="#format-specification" title="Permalink to this headline">¶</a></h2>
<p>Most often a straight format-less <code class="docutils literal notranslate"><span class="pre">{}</span></code> will suffice where a more complex
format specification might have been used.</p>
<p>Most of <cite>format()</cite>’s <a class="reference external" href="http://docs.python.org/library/string.html#format-specification-mini-language">Format Specification Mini-Language</a> is supported:</p>
<blockquote>
<div><p>[[fill]align][0][width][.precision][type]</p>
</div></blockquote>
<p>The differences between <cite>parse()</cite> and <cite>format()</cite> are:</p>
<ul class="simple">
<li><p>The align operators will cause spaces (or specified fill character) to be
stripped from the parsed value. The width is not enforced; it just indicates
there may be whitespace or “0”s to strip.</p></li>
<li><p>Numeric parsing will automatically handle a “0b”, “0o” or “0x” prefix.
That is, the “#” format character is handled automatically by d, b, o
and x formats. For “d” any will be accepted, but for the others the correct
prefix must be present if at all.</p></li>
<li><p>Numeric sign is handled automatically.</p></li>
<li><p>The thousands separator is handled automatically if the “n” type is used.</p></li>
<li><p>The types supported are a slightly different mix to the format() types.  Some
format() types come directly over: “d”, “n”, “%”, “f”, “e”, “b”, “o” and “x”.
In addition some regular expression character group types “D”, “w”, “W”, “s”
and “S” are also available.</p></li>
<li><p>The “e” and “g” types are case-insensitive so there is not need for
the “E” or “G” types.</p></li>
</ul>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 77%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Type</p></th>
<th class="head"><p>Characters Matched</p></th>
<th class="head"><p>Output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>w</p></td>
<td><p>Letters and underscore</p></td>
<td><p>str</p></td>
</tr>
<tr class="row-odd"><td><p>W</p></td>
<td><p>Non-letter and underscore</p></td>
<td><p>str</p></td>
</tr>
<tr class="row-even"><td><p>s</p></td>
<td><p>Whitespace</p></td>
<td><p>str</p></td>
</tr>
<tr class="row-odd"><td><p>S</p></td>
<td><p>Non-whitespace</p></td>
<td><p>str</p></td>
</tr>
<tr class="row-even"><td><p>d</p></td>
<td><p>Digits (effectively integer numbers)</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-odd"><td><p>D</p></td>
<td><p>Non-digit</p></td>
<td><p>str</p></td>
</tr>
<tr class="row-even"><td><p>n</p></td>
<td><p>Numbers with thousands separators (, or .)</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-odd"><td><p>%</p></td>
<td><p>Percentage (converted to value/100.0)</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>f</p></td>
<td><p>Fixed-point numbers</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>F</p></td>
<td><p>Decimal numbers</p></td>
<td><p>Decimal</p></td>
</tr>
<tr class="row-even"><td><p>e</p></td>
<td><p>Floating-point numbers with exponent
e.g. 1.1e-10, NAN (all case insensitive)</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-odd"><td><p>g</p></td>
<td><p>General number format (either d, f or e)</p></td>
<td><p>float</p></td>
</tr>
<tr class="row-even"><td><p>b</p></td>
<td><p>Binary numbers</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-odd"><td><p>o</p></td>
<td><p>Octal numbers</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-even"><td><p>x</p></td>
<td><p>Hexadecimal numbers (lower and upper case)</p></td>
<td><p>int</p></td>
</tr>
<tr class="row-odd"><td><p>ti</p></td>
<td><p>ISO 8601 format date/time
e.g. 1972-01-20T10:21:36Z (“T” and “Z”
optional)</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-even"><td><p>te</p></td>
<td><p>RFC2822 e-mail format date/time
e.g. Mon, 20 Jan 1972 10:21:36 +1000</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-odd"><td><p>tg</p></td>
<td><p>Global (day/month) format date/time
e.g. 20/1/1972 10:21:36 AM +1:00</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-even"><td><p>ta</p></td>
<td><p>US (month/day) format date/time
e.g. 1/20/1972 10:21:36 PM +10:30</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-odd"><td><p>tc</p></td>
<td><p>ctime() format date/time
e.g. Sun Sep 16 01:03:52 1973</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-even"><td><p>th</p></td>
<td><p>HTTP log format date/time
e.g. 21/Nov/2011:00:07:11 +0000</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-odd"><td><p>ts</p></td>
<td><p>Linux system log format date/time
e.g. Nov  9 03:37:44</p></td>
<td><p>datetime</p></td>
</tr>
<tr class="row-even"><td><p>tt</p></td>
<td><p>Time
e.g. 10:21:36 PM -5:30</p></td>
<td><p>time</p></td>
</tr>
</tbody>
</table>
<p>Some examples of typed parsing with <code class="docutils literal notranslate"><span class="pre">None</span></code> returned if the typing
does not match:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Our </span><span class="si">{:d}</span><span class="s1"> {:w} are...&#39;</span><span class="p">,</span> <span class="s1">&#39;Our 3 weapons are...&#39;</span><span class="p">)</span>
<span class="go">&lt;Result (3, &#39;weapons&#39;) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Our </span><span class="si">{:d}</span><span class="s1"> {:w} are...&#39;</span><span class="p">,</span> <span class="s1">&#39;Our three weapons are...&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Meet at {:tg}&#39;</span><span class="p">,</span> <span class="s1">&#39;Meet at 1/2/2011 11:00 PM&#39;</span><span class="p">)</span>
<span class="go">&lt;Result (datetime.datetime(2011, 2, 1, 23, 0),) {}&gt;</span>
</pre></div>
</div>
<p>And messing about with alignment:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;with </span><span class="si">{:&gt;}</span><span class="s1"> herring&#39;</span><span class="p">,</span> <span class="s1">&#39;with     a herring&#39;</span><span class="p">)</span>
<span class="go">&lt;Result (&#39;a&#39;,) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;spam </span><span class="si">{:^}</span><span class="s1"> spam&#39;</span><span class="p">,</span> <span class="s1">&#39;spam    lovely     spam&#39;</span><span class="p">)</span>
<span class="go">&lt;Result (&#39;lovely&#39;,) {}&gt;</span>
</pre></div>
</div>
<p>Note that the “center” alignment does not test to make sure the value is
centered - it just strips leading and trailing whitespace.</p>
<p>Width and precision may be used to restrict the size of matched text
from the input. Width specifies a minimum size and precision specifies
a maximum. For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2}{:.2}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;look&#39;</span><span class="p">)</span>           <span class="c1"># specifying precision</span>
<span class="go">&lt;Result (&#39;lo&#39;, &#39;ok&#39;) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:4}{:4}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;look at that&#39;</span><span class="p">)</span>     <span class="c1"># specifying width</span>
<span class="go">&lt;Result (&#39;look&#39;, &#39;at that&#39;) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:4}{:.4}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;look at that&#39;</span><span class="p">)</span>    <span class="c1"># specifying both</span>
<span class="go">&lt;Result (&#39;look at &#39;, &#39;that&#39;) {}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:2d}{:2d}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;0440&#39;</span><span class="p">)</span>           <span class="c1"># parsing two contiguous numbers</span>
<span class="go">&lt;Result (4, 40) {}&gt;</span>
</pre></div>
</div>
<p>Some notes for the date and time types:</p>
<ul class="simple">
<li><p>the presence of the time part is optional (including ISO 8601, starting
at the “T”). A full datetime object will always be returned; the time
will be set to 00:00:00. You may also specify a time without seconds.</p></li>
<li><p>when a seconds amount is present in the input fractions will be parsed
to give microseconds.</p></li>
<li><p>except in ISO 8601 the day and month digits may be 0-padded.</p></li>
<li><p>the date separator for the tg and ta formats may be “-” or “/”.</p></li>
<li><p>named months (abbreviations or full names) may be used in the ta and tg
formats in place of numeric months.</p></li>
<li><p>as per RFC 2822 the e-mail format may omit the day (and comma), and the
seconds but nothing else.</p></li>
<li><p>hours greater than 12 will be happily accepted.</p></li>
<li><p>the AM/PM are optional, and if PM is found then 12 hours will be added
to the datetime object’s hours amount - even if the hour is greater
than 12 (for consistency.)</p></li>
<li><p>in ISO 8601 the “Z” (UTC) timezone part may be a numeric offset</p></li>
<li><p>timezones are specified as “+HH:MM” or “-HH:MM”. The hour may be one or two
digits (0-padded is OK.) Also, the “:” is optional.</p></li>
<li><p>the timezone is optional in all except the e-mail format (it defaults to
UTC.)</p></li>
<li><p>named timezones are not handled yet.</p></li>
</ul>
<p>Note: attempting to match too many datetime fields in a single parse() will
currently result in a resource allocation issue. A TooManyFields exception
will be raised in this instance. The current limit is about 15. It is hoped
that this limit will be removed one day.</p>
</section>
<section id="result-and-match-objects">
<h2>Result and Match Objects<a class="headerlink" href="#result-and-match-objects" title="Permalink to this headline">¶</a></h2>
<p>The result of a <code class="docutils literal notranslate"><span class="pre">parse()</span></code> and <code class="docutils literal notranslate"><span class="pre">search()</span></code> operation is either <code class="docutils literal notranslate"><span class="pre">None</span></code> (no match), a
<code class="docutils literal notranslate"><span class="pre">Result</span></code> instance or a <code class="docutils literal notranslate"><span class="pre">Match</span></code> instance if <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> is False.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Result</span></code> instance has three attributes:</p>
<dl class="simple">
<dt>fixed</dt><dd><p>A tuple of the fixed-position, anonymous fields extracted from the input.</p>
</dd>
<dt>named</dt><dd><p>A dictionary of the named fields extracted from the input.</p>
</dd>
<dt>spans</dt><dd><p>A dictionary mapping the names and fixed position indices matched to a
2-tuple slice range of where the match occurred in the input.
The span does not include any stripped padding (alignment or width).</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">Match</span></code> instance has one method:</p>
<dl class="simple">
<dt>evaluate_result()</dt><dd><p>Generates and returns a <code class="docutils literal notranslate"><span class="pre">Result</span></code> instance for this <code class="docutils literal notranslate"><span class="pre">Match</span></code> object.</p>
</dd>
</dl>
</section>
<section id="custom-type-conversions">
<h2>Custom Type Conversions<a class="headerlink" href="#custom-type-conversions" title="Permalink to this headline">¶</a></h2>
<p>If you wish to have matched fields automatically converted to your own type you
may pass in a dictionary of type conversion information to <code class="docutils literal notranslate"><span class="pre">parse()</span></code> and
<code class="docutils literal notranslate"><span class="pre">compile()</span></code>.</p>
<p>The converter will be passed the field string matched. Whatever it returns
will be substituted in the <code class="docutils literal notranslate"><span class="pre">Result</span></code> instance for that field.</p>
<p>Your custom type conversions may override the builtin types if you supply one
with the same identifier.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">shouty</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="n">string</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;{:shouty} world&#39;</span><span class="p">,</span> <span class="s1">&#39;hello world&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">shouty</span><span class="o">=</span><span class="n">shouty</span><span class="p">))</span>
<span class="go">&lt;Result (&#39;HELLO&#39;,) {}&gt;</span>
</pre></div>
</div>
<p>If the type converter has the optional <code class="docutils literal notranslate"><span class="pre">pattern</span></code> attribute, it is used as
regular expression for better pattern matching (instead of the default one).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">parse_number</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_number</span><span class="o">.</span><span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\d+&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Answer: {number:Number}&#39;</span><span class="p">,</span> <span class="s1">&#39;Answer: 42&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Number</span><span class="o">=</span><span class="n">parse_number</span><span class="p">))</span>
<span class="go">&lt;Result () {&#39;number&#39;: 42}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Answer: {:Number}&#39;</span><span class="p">,</span> <span class="s1">&#39;Answer: Alice&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Number</span><span class="o">=</span><span class="n">parse_number</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">_</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;MISMATCH&quot;</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">with_pattern(pattern)</span></code> decorator to add this
information to a type converter function:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@with_pattern</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\d+&#39;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">parse_number</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Answer: {number:Number}&#39;</span><span class="p">,</span> <span class="s1">&#39;Answer: 42&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Number</span><span class="o">=</span><span class="n">parse_number</span><span class="p">))</span>
<span class="go">&lt;Result () {&#39;number&#39;: 42}&gt;</span>
</pre></div>
</div>
<p>A more complete example of a custom type might be:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">yesno_mapping</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;yes&quot;</span><span class="p">:</span>  <span class="kc">True</span><span class="p">,</span>   <span class="s2">&quot;no&quot;</span><span class="p">:</span>    <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;on&quot;</span><span class="p">:</span>   <span class="kc">True</span><span class="p">,</span>   <span class="s2">&quot;off&quot;</span><span class="p">:</span>   <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;true&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>   <span class="s2">&quot;false&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@with_pattern</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">yesno_mapping</span><span class="p">))</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">parse_yesno</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">yesno_mapping</span><span class="p">[</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
</pre></div>
</div>
<p>If the type converter <code class="docutils literal notranslate"><span class="pre">pattern</span></code> uses regex-grouping (with parenthesis),
you should indicate this by using the optional <code class="docutils literal notranslate"><span class="pre">regex_group_count</span></code> parameter
in the <code class="docutils literal notranslate"><span class="pre">with_pattern()</span></code> decorator:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@with_pattern</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;((\d+))&#39;</span><span class="p">,</span> <span class="n">regex_group_count</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">parse_number2</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse</span><span class="p">(</span><span class="s1">&#39;Answer: {:Number2} {:Number2}&#39;</span><span class="p">,</span> <span class="s1">&#39;Answer: 42 43&#39;</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Number2</span><span class="o">=</span><span class="n">parse_number2</span><span class="p">))</span>
<span class="go">&lt;Result (42, 43) {}&gt;</span>
</pre></div>
</div>
<p>Otherwise, this may cause parsing problems with unnamed/fixed parameters.</p>
</section>
<section id="potential-gotchas">
<h2>Potential Gotchas<a class="headerlink" href="#potential-gotchas" title="Permalink to this headline">¶</a></h2>
<p><cite>parse()</cite> will always match the shortest text necessary (from left to right)
to fulfil the parse pattern, so for example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pattern</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{dir1}</span><span class="s1">/</span><span class="si">{dir2}</span><span class="s1">&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;root/parent/subdir&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">parse</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">named</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;dir1&#39;, &#39;root&#39;), (&#39;dir2&#39;, &#39;parent/subdir&#39;)]</span>
</pre></div>
</div>
<p>So, even though <cite>{‘dir1’: ‘root/parent’, ‘dir2’: ‘subdir’}</cite> would also fit
the pattern, the actual match represents the shortest successful match for
<cite>dir1</cite>.</p>
<hr class="docutils" />
<p><strong>Version history (in brief)</strong>:</p>
<ul class="simple">
<li><p>1.9.0 We now honor precision and width specifiers when parsing numbers
and strings, allowing parsing of concatenated elements of fixed width
(thanks Julia Signell)</p></li>
<li><p>1.8.4 Add LICENSE file at request of packagers.
Correct handling of AM/PM to follow most common interpretation.
Correct parsing of hexadecimal that looks like a binary prefix.
Add ability to parse case sensitively.
Add parsing of numbers to Decimal with “F” (thanks John Vandenberg)</p></li>
<li><p>1.8.3 Add regex_group_count to with_pattern() decorator to support
user-defined types that contain brackets/parenthesis (thanks Jens Engel)</p></li>
<li><p>1.8.2 add documentation for including braces in format string</p></li>
<li><p>1.8.1 ensure bare hexadecimal digits are not matched</p></li>
<li><p>1.8.0 support manual control over result evaluation (thanks Timo Furrer)</p></li>
<li><p>1.7.0 parse dict fields (thanks Mark Visser) and adapted to allow
more than 100 re groups in Python 3.5+ (thanks David King)</p></li>
<li><p>1.6.6 parse Linux system log dates (thanks Alex Cowan)</p></li>
<li><p>1.6.5 handle precision in float format (thanks Levi Kilcher)</p></li>
<li><p>1.6.4 handle pipe “|” characters in parse string (thanks Martijn Pieters)</p></li>
<li><p>1.6.3 handle repeated instances of named fields, fix bug in PM time
overflow</p></li>
<li><p>1.6.2 fix logging to use local, not root logger (thanks Necku)</p></li>
<li><p>1.6.1 be more flexible regarding matched ISO datetimes and timezones in
general, fix bug in timezones without “:” and improve docs</p></li>
<li><p>1.6.0 add support for optional <code class="docutils literal notranslate"><span class="pre">pattern</span></code> attribute in user-defined types
(thanks Jens Engel)</p></li>
<li><p>1.5.3 fix handling of question marks</p></li>
<li><p>1.5.2 fix type conversion error with dotted names (thanks Sebastian Thiel)</p></li>
<li><p>1.5.1 implement handling of named datetime fields</p></li>
<li><p>1.5 add handling of dotted field names (thanks Sebastian Thiel)</p></li>
<li><p>1.4.1 fix parsing of “0” in int conversion (thanks James Rowe)</p></li>
<li><p>1.4 add __getitem__ convenience access on Result.</p></li>
<li><p>1.3.3 fix Python 2.5 setup.py issue.</p></li>
<li><p>1.3.2 fix Python 3.2 setup.py issue.</p></li>
<li><p>1.3.1 fix a couple of Python 3.2 compatibility issues.</p></li>
<li><p>1.3 added search() and findall(); removed compile() from <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">*</span></code>
export as it overwrites builtin.</p></li>
<li><p>1.2 added ability for custom and override type conversions to be
provided; some cleanup</p></li>
<li><p>1.1.9 to keep things simpler number sign is handled automatically;
significant robustification in the face of edge-case input.</p></li>
<li><p>1.1.8 allow “d” fields to have number base “0x” etc. prefixes;
fix up some field type interactions after stress-testing the parser;
implement “%” type.</p></li>
<li><p>1.1.7 Python 3 compatibility tweaks (2.5 to 2.7 and 3.2 are supported).</p></li>
<li><p>1.1.6 add “e” and “g” field types; removed redundant “h” and “X”;
removed need for explicit “#”.</p></li>
<li><p>1.1.5 accept textual dates in more places; Result now holds match span
positions.</p></li>
<li><p>1.1.4 fixes to some int type conversion; implemented “=” alignment; added
date/time parsing with a variety of formats handled.</p></li>
<li><p>1.1.3 type conversion is automatic based on specified field types. Also added
“f” and “n” types.</p></li>
<li><p>1.1.2 refactored, added compile() and limited <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">parse</span> <span class="pre">import</span> <span class="pre">*</span></code></p></li>
<li><p>1.1.1 documentation improvements</p></li>
<li><p>1.1.0 implemented more of the <a class="reference external" href="http://docs.python.org/library/string.html#format-specification-mini-language">Format Specification Mini-Language</a>
and removed the restriction on mixing fixed-position and named fields</p></li>
<li><p>1.0.0 initial release</p></li>
</ul>
<p>This code is copyright 2012-2017 Richard Jones &lt;<a class="reference external" href="mailto:richard&#37;&#52;&#48;python&#46;org">richard<span>&#64;</span>python<span>&#46;</span>org</a>&gt;
See the end of the source file for the license of use.</p>
<dl class="py function">
<dt id="py2store.parse_format.findall">
<code class="sig-prename descclassname">py2store.parse_format.</code><code class="sig-name descname">findall</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">pos</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">endpos</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra_types</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">evaluate_result</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">case_sensitive</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/parse_format.html#findall"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.parse_format.findall" title="Permalink to this definition">¶</a></dt>
<dd><p>Search “string” for all occurrences of “format”.</p>
<p>You will be returned an iterator that holds Result instances
for each format match found.</p>
<p>Optionally start the search at “pos” character index and limit the search
to a maximum index of endpos - equivalent to search(string[:endpos]).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> is True each returned Result instance has two attributes:</p>
<blockquote>
<div><p>.fixed - tuple of fixed-position values from the string
.named - dict of named values from the string</p>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> is False each returned value is a Match instance with one method:</p>
<blockquote>
<div><dl class="simple">
<dt>.evaluate_result() - This will return a Result instance like you would get</dt><dd><p>with <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> set to True</p>
</dd>
</dl>
</div></blockquote>
<p>The default behaviour is to match strings case insensitively. You may match with
case by specifying case_sensitive=True.</p>
<p>If the format is invalid a ValueError will be raised.</p>
<p>See the module documentation for the use of “extra_types”.</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.parse_format.parse">
<code class="sig-prename descclassname">py2store.parse_format.</code><code class="sig-name descname">parse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">extra_types</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">evaluate_result</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">case_sensitive</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/parse_format.html#parse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.parse_format.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Using “format” attempt to pull values from “string”.</p>
<p>The format must match the string contents exactly. If the value
you’re looking for is instead just a part of the string use
search().</p>
<p>If <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> is True the return value will be an Result instance with two attributes:</p>
<blockquote>
<div><p>.fixed - tuple of fixed-position values from the string
.named - dict of named values from the string</p>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> is False the return value will be a Match instance with one method:</p>
<blockquote>
<div><dl class="simple">
<dt>.evaluate_result() - This will return a Result instance like you would get</dt><dd><p>with <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> set to True</p>
</dd>
</dl>
</div></blockquote>
<p>The default behaviour is to match strings case insensitively. You may match with
case by specifying case_sensitive=True.</p>
<p>If the format is invalid a ValueError will be raised.</p>
<p>See the module documentation for the use of “extra_types”.</p>
<p>In the case there is no match parse() will return None.</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.parse_format.search">
<code class="sig-prename descclassname">py2store.parse_format.</code><code class="sig-name descname">search</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">format</span></em>, <em class="sig-param"><span class="n">string</span></em>, <em class="sig-param"><span class="n">pos</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">endpos</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">extra_types</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">evaluate_result</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">case_sensitive</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/parse_format.html#search"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.parse_format.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search “string” for the first occurrence of “format”.</p>
<p>The format may occur anywhere within the string. If
instead you wish for the format to exactly match the string
use parse().</p>
<p>Optionally start the search at “pos” character index and limit the search
to a maximum index of endpos - equivalent to search(string[:endpos]).</p>
<p>If <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> is True the return value will be an Result instance with two attributes:</p>
<blockquote>
<div><p>.fixed - tuple of fixed-position values from the string
.named - dict of named values from the string</p>
</div></blockquote>
<p>If <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> is False the return value will be a Match instance with one method:</p>
<blockquote>
<div><dl class="simple">
<dt>.evaluate_result() - This will return a Result instance like you would get</dt><dd><p>with <code class="docutils literal notranslate"><span class="pre">evaluate_result</span></code> set to True</p>
</dd>
</dl>
</div></blockquote>
<p>The default behaviour is to match strings case insensitively. You may match with
case by specifying case_sensitive=True.</p>
<p>If the format is invalid a ValueError will be raised.</p>
<p>See the module documentation for the use of “extra_types”.</p>
<p>In the case there is no match parse() will return None.</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.parse_format.with_pattern">
<code class="sig-prename descclassname">py2store.parse_format.</code><code class="sig-name descname">with_pattern</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">pattern</span></em>, <em class="sig-param"><span class="n">regex_group_count</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/py2store/parse_format.html#with_pattern"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.parse_format.with_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach a regular expression pattern matcher to a custom type converter
function.</p>
<p>This annotates the type converter with the <code class="xref py py-attr docutils literal notranslate"><span class="pre">pattern</span></code> attribute.</p>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@with_pattern</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">parse_number</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<p>is equivalent to:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">parse_number</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parse_number</span><span class="o">.</span><span class="n">pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\d+&quot;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pattern</strong> – regular expression pattern (as text)</p></li>
<li><p><strong>regex_group_count</strong> – Indicates how many regex-groups are in pattern.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>wrapped function</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">py2store</a></h1>








<h3>Navigation</h3>
<p><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store.html">py2store</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/access.html">py2store.access</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/appendable.html">py2store.appendable</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/base.html">py2store.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/caching.html">py2store.caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/core.html">py2store.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/dig.html">py2store.dig</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/errors.html">py2store.errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/examples.html">py2store.examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/examples/dropbox_w_urllib.html">py2store.examples.dropbox_w_urllib</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/examples/kv_walking.html">py2store.examples.kv_walking</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/examples/last_key_inserted.html">py2store.examples.last_key_inserted</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/examples/python_code_stats.html">py2store.examples.python_code_stats</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/examples/write_caches.html">py2store.examples.write_caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext.html">py2store.ext</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext/dataframes.html">py2store.ext.dataframes</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext/docx.html">py2store.ext.docx</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext/github.html">py2store.ext.github</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext/gitlab.html">py2store.ext.gitlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext/hdf.html">py2store.ext.hdf</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext/matlab.html">py2store.ext.matlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/ext/wordnet.html">py2store.ext.wordnet</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/filesys.html">py2store.filesys</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/key_mappers.html">py2store.key_mappers</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/key_mappers/naming.html">py2store.key_mappers.naming</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/key_mappers/paths.html">py2store.key_mappers.paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/key_mappers/str_utils.html">py2store.key_mappers.str_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/key_mappers/tuples.html">py2store.key_mappers.tuples</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/misc.html">py2store.misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/mixins.html">py2store.mixins</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/my.html">py2store.my</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/my/grabbers.html">py2store.my.grabbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/naming.html">py2store.naming</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/parse_format.html">py2store.parse_format</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/paths.html">py2store.paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters.html">py2store.persisters</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/dropbox_w_dropbox.html">py2store.persisters.dropbox_w_dropbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/googledrive_w_pydrive.html">py2store.persisters.googledrive_w_pydrive</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/local_files.html">py2store.persisters.local_files</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/new_s3.html">py2store.persisters.new_s3</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/redis_w_redis.html">py2store.persisters.redis_w_redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/s3_w_boto3.html">py2store.persisters.s3_w_boto3</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/sql_w_sqlalchemy.html">py2store.persisters.sql_w_sqlalchemy</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/persisters/w_aiofile.html">py2store.persisters.w_aiofile</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/serializers.html">py2store.serializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/serializers/pickled.html">py2store.serializers.pickled</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/signatures.html">py2store.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/slib.html">py2store.slib</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/slib/s_configparser.html">py2store.slib.s_configparser</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/slib/s_zipfile.html">py2store.slib.s_zipfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/sources.html">py2store.sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/stores.html">py2store.stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/stores/dropbox_store.html">py2store.stores.dropbox_store</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/stores/local_store.html">py2store.stores.local_store</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/stores/s3_store.html">py2store.stores.s3_store</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/stores/sql_w_sqlalchemy.html">py2store.stores.sql_w_sqlalchemy</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/test.html">py2store.test</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/test/local_files_test.html">py2store.test.local_files_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/test/quick_test.html">py2store.test.quick_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/test/scrap.html">py2store.test.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/test/util.html">py2store.test.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/trans.html">py2store.trans</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/util.html">py2store.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils.html">py2store.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/affine_conversion.html">py2store.utils.affine_conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/appendable.html">py2store.utils.appendable</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/attr_dict.html">py2store.utils.attr_dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/cache_descriptors.html">py2store.utils.cache_descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/cumul_aggreg_write.html">py2store.utils.cumul_aggreg_write</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/explicit.html">py2store.utils.explicit</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/glom.html">py2store.utils.glom</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/mappify.html">py2store.utils.mappify</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/mg_selectors.html">py2store.utils.mg_selectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/mongoquery.html">py2store.utils.mongoquery</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/signatures.html">py2store.utils.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/sliceable.html">py2store.utils.sliceable</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/timeseries_caching.html">py2store.utils.timeseries_caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="module_docs/py2store/utils/uri_utils.html">py2store.utils.uri_utils</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;NO COPYRIGHT.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/test.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>