
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>py2store.utils.glom &#8212; py2store 0.1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="py2store.utils.mappify" href="mappify.html" />
    <link rel="prev" title="py2store.utils.explicit" href="explicit.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-py2store.utils.glom">
<span id="py2store-utils-glom"></span><h1>py2store.utils.glom<a class="headerlink" href="#module-py2store.utils.glom" title="Permalink to this headline">¶</a></h1>
<p><em>glom is a util to extract stuff from nested structures.</em>
It’s one of those excellent utils that I’ve written many times, but never got quite right.
Mahmoud Hashemi got it right.</p>
<dl class="field-list simple">
<dt class="field-odd">BEGIN LICENSE</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>Copyright (c) 2018, Mahmoud Hashemi</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<blockquote>
<div><ul class="simple">
<li><p>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</p></li>
<li><p>Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials provided
with the distribution.</p></li>
<li><p>The names of the contributors may not be used to endorse or
promote products derived from this software without specific
prior written permission.</p></li>
</ul>
</div></blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
“AS IS” AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<dl class="field-list simple">
<dt class="field-odd">END LICENSE</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>Now, at the time of writing this, I’ve already transformed it to bend it to my liking.
At some point it may become something else, but I wanted there to be a trace of what my seed was.
Though I can’t promise I’ll maintain the same functionality as I transform this module, here’s
a tutorial on how to use it in it’s original form:</p>
<blockquote>
<div><p><a class="reference external" href="https://glom.readthedocs.io/en/latest/">https://glom.readthedocs.io/en/latest/</a></p>
</div></blockquote>
<p>I only took the main (core) module from the glom project.
Here’s the original docs of this glom module.</p>
<p>If there was ever a Python example of “big things come in small
packages”, <code class="docutils literal notranslate"><span class="pre">glom</span></code> might be it.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">glom</span></code> package has one central entrypoint,
<code class="xref py py-func docutils literal notranslate"><span class="pre">glom.glom()</span></code>. Everything else in the package revolves around that
one function.</p>
<p>A couple of conventional terms you’ll see repeated many times below:</p>
<ul class="simple">
<li><p><strong>target</strong> - glom is built to work on any data, so we simply
refer to the object being accessed as the <em>“target”</em></p></li>
<li><p><strong>spec</strong> - <em>(aka “glomspec”, short for specification)</em> The
accompanying template used to specify the structure of the return
value.</p></li>
</ul>
<p>Now that you know the terms, let’s take a look around glom’s powerful
semantics.</p>
<dl class="py class">
<dt id="py2store.utils.glom.Auto">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Auto</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Auto"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Auto" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch to Auto mode (the default)</p>
<p>TODO: this seems like it should be a sub-class of class Spec() –
if Spec() could help define the interface for new “modes” or dialects
that would also help make match mode feel less duct-taped on</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Call">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Call</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Call"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Call" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="../../../test.html#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> specifies when a target should be passed to a function,
<em>func</em>.</p>
<p><a class="reference internal" href="../../../test.html#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> is similar to <code class="xref py py-func docutils literal notranslate"><span class="pre">partial()</span></code> in that
it is no more powerful than <code class="docutils literal notranslate"><span class="pre">lambda</span></code> or other functions, but
it is designed to be more readable, with a better <code class="docutils literal notranslate"><span class="pre">repr</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>callable</em>) – a function or other callable to be called with
the target</p>
</dd>
</dl>
<p><a class="reference internal" href="../../../test.html#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> combines well with <code class="xref py py-attr docutils literal notranslate"><span class="pre">T</span></code> to construct objects. For
instance, to generate a dict and then pass it to a constructor:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
<span class="gp">... </span>       <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="n">attr</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;attr&#39;</span><span class="p">:</span> <span class="mf">3.14</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Call</span><span class="p">(</span><span class="n">ExampleClass</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">T</span><span class="p">))</span><span class="o">.</span><span class="n">attr</span>
<span class="go">3.14</span>
</pre></div>
</div>
<p>This does the same as <code class="docutils literal notranslate"><span class="pre">glom(target,</span> <span class="pre">lambda</span> <span class="pre">target:</span>
<span class="pre">ExampleClass(**target))</span></code>, but it’s easy to see which one reads
better.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Call</span></code> is mostly for functions. Use a <code class="xref py py-attr docutils literal notranslate"><span class="pre">T</span></code> object
if you need to call a method.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><a class="reference internal" href="../../../test.html#py2store.utils.glom.Call" title="py2store.utils.glom.Call"><code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code></a> has a successor with a fuller-featured API, new
in 19.3.0: the <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> specifier type.</p>
</div>
<dl class="py method">
<dt id="py2store.utils.glom.Call.glomit">
<code class="sig-name descname">glomit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span></em>, <em class="sig-param"><span class="n">scope</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Call.glomit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Call.glomit" title="Permalink to this definition">¶</a></dt>
<dd><p>run against the current target</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Check">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Check</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span><span class="o">=</span><span class="default_value">T</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Check"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check objects are used to make assertions about the target data,
and either pass through the data or raise exceptions if there is a
problem.</p>
<p>If any check condition fails, a <code class="xref py py-class docutils literal notranslate"><span class="pre">CheckError</span></code> is raised.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – a sub-spec to extract the data to which other assertions will
be checked (defaults to applying checks to the target itself)</p></li>
<li><p><strong>type</strong> – a type or sequence of types to be checked for exact match</p></li>
<li><p><strong>equal_to</strong> – a value to be checked for equality match (“==”)</p></li>
<li><p><strong>validate</strong> – a callable or list of callables, each representing a
check condition. If one or more return False or raise an
exception, the Check will fail.</p></li>
<li><p><strong>instance_of</strong> – a type or sequence of types to be checked with isinstance()</p></li>
<li><p><strong>one_of</strong> – an iterable of values, any of which can match the target (“in”)</p></li>
<li><p><strong>default</strong> – an optional default value to replace the value when the check fails
(if default is not specified, GlomCheckError will be raised)</p></li>
</ul>
</dd>
</dl>
<p>Aside from <em>spec</em>, all arguments are keyword arguments. Each
argument, except for <em>default</em>, represent a check
condition. Multiple checks can be passed, and if all check
conditions are left unset, Check defaults to performing a basic
truthy check on the value.</p>
</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.CheckError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">CheckError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">msgs</span></em>, <em class="sig-param"><span class="n">check</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#CheckError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.CheckError" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="../../../test.html#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype is raised when target data fails to
pass a <a class="reference internal" href="../../../test.html#py2store.utils.glom.Check" title="py2store.utils.glom.Check"><code class="xref py py-class docutils literal notranslate"><span class="pre">Check</span></code></a>’s specified validation.</p>
<p>An uncaught <code class="docutils literal notranslate"><span class="pre">CheckError</span></code> looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="n">Check</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">))})</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.CheckError</span>: <span class="n">target at path [&#39;a.b&#39;] failed check, got error: &quot;expected type to be &#39;int&#39;, found type &#39;str&#39;&quot;</span>
</pre></div>
</div>
<p>If the <code class="docutils literal notranslate"><span class="pre">Check</span></code> contains more than one condition, there may be
more than one error message. The string rendition of the
<code class="docutils literal notranslate"><span class="pre">CheckError</span></code> will include all messages.</p>
<p>You can also catch the <code class="docutils literal notranslate"><span class="pre">CheckError</span></code> and programmatically access
messages through the <code class="docutils literal notranslate"><span class="pre">msgs</span></code> attribute on the <code class="docutils literal notranslate"><span class="pre">CheckError</span></code>
instance.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of 2018-07-05 (glom v18.2.0), the validation subsystem is
still very new. Exact error message formatting may be enhanced
in future releases.</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Coalesce">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Coalesce</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">subspecs</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Coalesce"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Coalesce" title="Permalink to this definition">¶</a></dt>
<dd><p>Coalesce objects specify fallback behavior for a list of
subspecs.</p>
<p>Subspecs are passed as positional arguments, and keyword arguments
control defaults. Each subspec is evaluated in turn, and if none
match, a <a class="reference internal" href="../../../test.html#py2store.utils.glom.CoalesceError" title="py2store.utils.glom.CoalesceError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CoalesceError</span></code></a> is raised, or a default is returned,
depending on the options used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operation may seem very familar if you have experience with
<a class="reference external" href="https://en.wikipedia.org/w/index.php?title=Null_(SQL)&amp;oldid=833093792#COALESCE">SQL</a> or even <a class="reference external" href="https://en.wikipedia.org/w/index.php?title=Null_coalescing_operator&amp;oldid=839493322#C#">C# and others</a>.</p>
</div>
<p>In practice, this fallback behavior’s simplicity is only surpassed
by its utility:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">))</span>
<span class="go">&#39;d&#39;</span>
</pre></div>
</div>
<p>glom tries to get <code class="docutils literal notranslate"><span class="pre">'a'</span></code> from <code class="docutils literal notranslate"><span class="pre">target</span></code>, but gets a
KeyError. Rather than raise a <code class="xref py py-exc docutils literal notranslate"><span class="pre">PathAccessError</span></code> as usual,
glom <em>coalesces</em> into the next subspec, <code class="docutils literal notranslate"><span class="pre">'b'</span></code>. The process
repeats until it gets to <code class="docutils literal notranslate"><span class="pre">'c'</span></code>, which returns our value,
<code class="docutils literal notranslate"><span class="pre">'d'</span></code>. If our value weren’t present, we’d see:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">))</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.CoalesceError</span>: <span class="n">no valid values found. Tried (&#39;a&#39;, &#39;b&#39;) and got (PathAccessError, PathAccessError) (at path [])</span>
</pre></div>
</div>
<p>Same process, but because <code class="docutils literal notranslate"><span class="pre">target</span></code> is empty, we get a
<a class="reference internal" href="../../../test.html#py2store.utils.glom.CoalesceError" title="py2store.utils.glom.CoalesceError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CoalesceError</span></code></a>. If we want to avoid an exception, and we
know which value we want by default, we can set <em>default</em>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;d-fault&#39;</span><span class="p">)</span>
<span class="go">&#39;d-fault&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">'a'</span></code>, <code class="docutils literal notranslate"><span class="pre">'b'</span></code>, and <code class="docutils literal notranslate"><span class="pre">'c'</span></code> weren’t present so we got <code class="docutils literal notranslate"><span class="pre">'d-fault'</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subspecs</strong> – One or more glommable subspecs</p></li>
<li><p><strong>default</strong> – A value to return if no subspec results in a valid value</p></li>
<li><p><strong>default_factory</strong> – A callable whose result will be returned as a default</p></li>
<li><p><strong>skip</strong> – A value, tuple of values, or predicate function
representing values to ignore</p></li>
<li><p><strong>skip_exc</strong> – An exception or tuple of exception types to catch and
move on to the next subspec. Defaults to <a class="reference internal" href="../../../test.html#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a>, the
parent type of all glom runtime exceptions.</p></li>
</ul>
</dd>
</dl>
<p>If all subspecs produce skipped values or exceptions, a
<a class="reference internal" href="../../../test.html#py2store.utils.glom.CoalesceError" title="py2store.utils.glom.CoalesceError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">CoalesceError</span></code></a> will be raised. For more examples, check out
the <span class="xref std std-doc">tutorial</span>, which makes extensive use of Coalesce.</p>
</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.CoalesceError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">CoalesceError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">coal_obj</span></em>, <em class="sig-param"><span class="n">skipped</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#CoalesceError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.CoalesceError" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="../../../test.html#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype is raised from within a
<a class="reference internal" href="../../../test.html#py2store.utils.glom.Coalesce" title="py2store.utils.glom.Coalesce"><code class="xref py py-class docutils literal notranslate"><span class="pre">Coalesce</span></code></a> spec’s processing, when none of the subspecs
match and no default is provided.</p>
<p>The exception object itself keeps track of several values which
may be useful for processing:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coal_obj</strong> (<a class="reference internal" href="../../../test.html#py2store.utils.glom.Coalesce" title="py2store.utils.glom.Coalesce"><em>Coalesce</em></a>) – The original failing spec, see
<a class="reference internal" href="../../../test.html#py2store.utils.glom.Coalesce" title="py2store.utils.glom.Coalesce"><code class="xref py py-class docutils literal notranslate"><span class="pre">Coalesce</span></code></a>’s docs for details.</p></li>
<li><p><strong>skipped</strong> (<em>list</em>) – A list of ignored values and exceptions, in the
order that their respective subspecs appear in the original
<em>coal_obj</em>.</p></li>
<li><p><strong>path</strong> – Like many GlomErrors, this exception knows the path at
which it occurred.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Coalesce</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">))</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.CoalesceError</span>: <span class="n">no valid values found. Tried (&#39;a&#39;, &#39;b&#39;) and got (PathAccessError, PathAccessError) ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Fill">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Fill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Fill"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Fill" title="Permalink to this definition">¶</a></dt>
<dd><p>A specifier type which switches to glom into “fill-mode”. For the
spec contained within the Fill, glom will only interpret explicit
specifier types (including T objects). Whereas the default mode
has special interpretations for each of these builtins, fill-mode
takes a lighter touch, making Fill great for “filling out” Python
literals, like tuples, dicts, sets, and lists.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Fill</span><span class="p">((</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="mi">2</span><span class="p">],</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">(4, 0)</span>
</pre></div>
</div>
<p>As you can see, glom’s usual built-in tuple item chaining behavior
has switched into a simple tuple constructor.</p>
<p>(Sidenote for Lisp fans: Fill is like glom’s quasi-quoting.)</p>
</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.GlomError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">GlomError</code><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#GlomError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.GlomError" title="Permalink to this definition">¶</a></dt>
<dd><p>The base exception for all the errors that might be raised from
<a class="reference internal" href="../../../test.html#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> processing logic.</p>
<p>By default, exceptions raised from within functions passed to glom
(e.g., <code class="docutils literal notranslate"><span class="pre">len</span></code>, <code class="docutils literal notranslate"><span class="pre">sum</span></code>, any <code class="docutils literal notranslate"><span class="pre">lambda</span></code>) will not be wrapped in a
GlomError.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Glommer">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Glommer</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Glommer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Glommer" title="Permalink to this definition">¶</a></dt>
<dd><p>All the wholesome goodness that it takes to make glom work. This
type mostly serves to encapsulate the type registration context so
that advanced uses of glom don’t need to worry about stepping on
each other’s toes.</p>
<p>Glommer objects are lightweight and, once instantiated, provide
the <a class="reference internal" href="../../../test.html#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> method we know and love:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glommer</span> <span class="o">=</span> <span class="n">Glommer</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glommer</span><span class="o">.</span><span class="n">glom</span><span class="p">({},</span> <span class="s1">&#39;a.b.c&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="go">&#39;d&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Glommer</span><span class="p">()</span><span class="o">.</span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;vals&#39;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">))},</span> <span class="p">(</span><span class="s1">&#39;vals&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">))</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Instances also provide <a class="reference internal" href="../../../test.html#py2store.utils.glom.Glommer.register" title="py2store.utils.glom.Glommer.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> method for
localized control over type handling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>register_default_types</strong> (<em>bool</em>) – Whether or not to enable the
handling behaviors of the default <a class="reference internal" href="../../../test.html#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a>. These
default actions include dict access, list and iterable
iteration, and generic object attribute access. Defaults to
True.</p>
</dd>
</dl>
<dl class="py method">
<dt id="py2store.utils.glom.Glommer.register">
<code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_type</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Glommer.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Glommer.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register <em>target_type</em> so <code class="xref py py-meth docutils literal notranslate"><span class="pre">glom()</span></code> will
know how to handle instances of that type as targets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_type</strong> (<em>type</em>) – A type expected to appear in a glom()
call target</p></li>
<li><p><strong>get</strong> (<em>callable</em>) – A function which takes a target object and
a name, acting as a default accessor. Defaults to
<code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code>.</p></li>
<li><p><strong>iterate</strong> (<em>callable</em>) – A function which takes a target object
and returns an iterator. Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">iter()</span></code> if
<em>target_type</em> appears to be iterable.</p></li>
<li><p><strong>exact</strong> (<em>bool</em>) – Whether or not to match instances of subtypes
of <em>target_type</em>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The module-level <a class="reference internal" href="../../../test.html#py2store.utils.glom.register" title="py2store.utils.glom.register"><code class="xref py py-func docutils literal notranslate"><span class="pre">register()</span></code></a> function affects the
module-level <a class="reference internal" href="../../../test.html#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> function’s behavior. If this
global effect is undesirable for your application, or
you’re implementing a library, consider instantiating a
<a class="reference internal" href="../../../test.html#py2store.utils.glom.Glommer" title="py2store.utils.glom.Glommer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Glommer</span></code></a> instance, and using the
<a class="reference internal" href="../../../test.html#py2store.utils.glom.Glommer.register" title="py2store.utils.glom.Glommer.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Glommer.glom()</span></code>
methods instead.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Inspect">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Inspect</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Inspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Inspect" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> specifier type provides a way to get
visibility into glom’s evaluation of a specification, enabling
debugging of those tricky problems that may arise with unexpected
data.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> can be inserted into an existing spec in one of two
ways. First, as a wrapper around the spec in question, or second,
as an argument-less placeholder wherever a spec could be.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> supports several modes, controlled by
keyword arguments. Its default, no-argument mode, simply echos the
state of the glom at the point where it appears:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">val</span> <span class="o">=</span> <span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Inspect</span><span class="p">(</span><span class="s1">&#39;a.b&#39;</span><span class="p">))</span>  <span class="c1"># wrapping a spec</span>
<span class="go">---</span>
<span class="go">path:   [&#39;a.b&#39;]</span>
<span class="go">target: {&#39;a&#39;: {&#39;b&#39;: {}}}</span>
<span class="go">output: {}</span>
<span class="go">---</span>
</pre></div>
</div>
<p>Debugging behavior aside, <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code> has no effect on
values in the target, spec, or result.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>echo</strong> (<em>bool</em>) – Whether to print the path, target, and output of
each inspected glom. Defaults to True.</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – Whether or not the Inspect should be applied
at every level, at or below the spec that it wraps. Defaults
to False.</p></li>
<li><p><strong>breakpoint</strong> (<em>bool</em>) – This flag controls whether a debugging prompt
should appear before evaluating each inspected spec. Can also
take a callable. Defaults to False.</p></li>
<li><p><strong>post_mortem</strong> (<em>bool</em>) – This flag controls whether exceptions
should be caught and interactively debugged with <code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code> on
inspected specs.</p></li>
</ul>
</dd>
</dl>
<p>All arguments above are keyword-only to avoid overlap with a
wrapped spec.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just like <code class="docutils literal notranslate"><span class="pre">pdb.set_trace()</span></code>, be careful about leaving stray
<code class="docutils literal notranslate"><span class="pre">Inspect()</span></code> instances in production glom specs.</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Invoke">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Invoke</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">func</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Invoke"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifier type designed for easy invocation of callables from glom.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>func</strong> (<em>callable</em>) – A function or other callable object.</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">Invoke</span></code> is similar to <code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code>, but with the
ability to set up a “templated” call which interleaves constants and
glom specs.</p>
<p>For example, the following creates a spec which can be used to
check if targets are integers:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">is_int</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">is_int</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>And this composes like any other glom spec:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="nb">object</span><span class="p">(),</span> <span class="mi">9</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="p">[</span><span class="n">is_int</span><span class="p">])</span>
<span class="go">[True, False, True]</span>
</pre></div>
</div>
<p>Another example, mixing positional and keyword arguments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">sorted</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;10&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;20&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">[&#39;20&#39;, &#39;10&#39;, &#39;5&#39;, &#39;1&#39;]</span>
</pre></div>
</div>
<p>Invoke also helps with evaluating zero-argument functions:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="p">{},</span> <span class="n">spec</span><span class="o">=</span><span class="n">Invoke</span><span class="p">(</span><span class="nb">int</span><span class="p">))</span>
<span class="go">0</span>
</pre></div>
</div>
<p>(A trivial example, but from timestamps to UUIDs, zero-arg calls do come up!)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Invoke</span></code> is mostly for functions, object construction, and callable
objects. For calling methods, consider the <code class="xref py py-attr docutils literal notranslate"><span class="pre">T</span></code> object.</p>
</div>
<dl class="py method">
<dt id="py2store.utils.glom.Invoke.constants">
<code class="sig-name descname">constants</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Invoke.constants"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.constants" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> spec, with the provided positional
and keyword argument values stored for passing to the
underlying function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="nb">range</span><span class="p">,</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
<p>Subsequent positional arguments are appended:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="nb">range</span><span class="p">,</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[2, 4, 6, 8]</span>
</pre></div>
</div>
<p>Keyword arguments also work as one might expect:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">round_2</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">round</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="n">ndigits</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="mf">3.14159</span><span class="p">,</span> <span class="n">round_2</span><span class="p">)</span>
<span class="go">3.14</span>
</pre></div>
</div>
<p><a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke.constants" title="py2store.utils.glom.Invoke.constants"><code class="xref py py-meth docutils literal notranslate"><span class="pre">constants()</span></code></a> and other <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a>
methods may be called multiple times, just remember that every
call returns a new spec.</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Invoke.specfunc">
<em class="property">classmethod </em><code class="sig-name descname">specfunc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Invoke.specfunc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.specfunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> instance where the function is
indicated by a spec.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="o">.</span><span class="n">specfunc</span><span class="p">(</span><span class="s1">&#39;func&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;func&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">},</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Invoke.specs">
<code class="sig-name descname">specs</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">a</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Invoke.specs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.specs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> spec, with the provided positional
and keyword arguments stored to be interpreted as specs, with
the results passed to the underlying function.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
<p>Subsequent positional arguments are appended:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="nb">range</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;step&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="p">(</span><span class="n">spec</span><span class="p">,</span> <span class="nb">list</span><span class="p">))</span>
<span class="go">[2, 4, 6, 8]</span>
</pre></div>
</div>
<p>Keyword arguments also work as one might expect:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">multiply</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times_3</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">multiply</span><span class="p">)</span><span class="o">.</span><span class="n">constants</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">specs</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span> <span class="n">times_3</span><span class="p">)</span>
<span class="go">15</span>
</pre></div>
</div>
<p><a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke.specs" title="py2store.utils.glom.Invoke.specs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">specs()</span></code></a> and other <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a>
methods may be called multiple times, just remember that every
call returns a new spec.</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Invoke.star">
<code class="sig-name descname">star</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Invoke.star"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Invoke.star" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a> spec, with <em>args</em> and/or <em>kwargs</em>
specs set to be “starred” or “star-starred” (respectively)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os.path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">Invoke</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">)</span><span class="o">.</span><span class="n">star</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;path&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">,</span> <span class="s1">&#39;dir&#39;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">&#39;path/to/dir&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>spec</em>) – A spec to be evaluated and “starred” into the
underlying function.</p></li>
<li><p><strong>kwargs</strong> (<em>spec</em>) – A spec to be evaluated and “star-starred” into
the underlying function.</p></li>
</ul>
</dd>
</dl>
<p>One or both of the above arguments should be set.</p>
<p>The <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke.star" title="py2store.utils.glom.Invoke.star"><code class="xref py py-meth docutils literal notranslate"><span class="pre">star()</span></code></a>, like other <a class="reference internal" href="../../../test.html#py2store.utils.glom.Invoke" title="py2store.utils.glom.Invoke"><code class="xref py py-class docutils literal notranslate"><span class="pre">Invoke</span></code></a>
methods, may be called multiple times. The <em>args</em> and <em>kwargs</em>
will be stacked in the order in which they are provided.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Let">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Let</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kw</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Let"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Let" title="Permalink to this definition">¶</a></dt>
<dd><p>This specifier type assigns variables to the scope.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="mi">9</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">(</span><span class="n">Let</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;val&#39;</span><span class="p">]),</span> <span class="p">{</span><span class="s1">&#39;val&#39;</span><span class="p">:</span> <span class="n">S</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">{&#39;val&#39;: 9}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Literal">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Literal</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Literal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Literal" title="Permalink to this definition">¶</a></dt>
<dd><p>Literal objects specify literal values in rare cases when part of
the spec should not be interpreted as a glommable
subspec. Wherever a Literal object is encountered in a spec, it is
replaced with its wrapped <em>value</em> in the output.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="s1">&#39;readability&#39;</span><span class="p">:</span> <span class="n">Literal</span><span class="p">(</span><span class="s1">&#39;counts&#39;</span><span class="p">)}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">))</span>
<span class="go">{&#39;a&#39;: &#39;c&#39;, &#39;readability&#39;: &#39;counts&#39;}</span>
</pre></div>
</div>
<p>Instead of accessing <code class="docutils literal notranslate"><span class="pre">'counts'</span></code> as a key like it did with
<code class="docutils literal notranslate"><span class="pre">'a.b'</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code> just unwrapped the literal and
included the value.</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code> takes one argument, the literal value that should appear
in the glom output.</p>
<p>This could also be achieved with a callable, e.g., <code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">x:</span>
<span class="pre">'literal_string'</span></code> in the spec, but using a <code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code>
object adds explicitness, code clarity, and a clean <code class="xref py py-func docutils literal notranslate"><span class="pre">repr()</span></code>.</p>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Path">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Path</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">path_parts</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path objects specify explicit paths when the default
<code class="docutils literal notranslate"><span class="pre">'a.b.c'</span></code>-style general access syntax won’t work or isn’t
desirable. Use this to wrap ints, datetimes, and other valid
keys, as well as strings with dots that shouldn’t be expanded.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d.e&#39;</span><span class="p">:</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mi">3</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d.e&#39;</span><span class="p">))</span>
<span class="go">&#39;f&#39;</span>
</pre></div>
</div>
<p>Paths can be used to join together other Path objects, as
well as <code class="xref py py-data docutils literal notranslate"><span class="pre">T</span></code> objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="go">T[&#39;a&#39;][&#39;b&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">))</span>
<span class="go">Path(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;)</span>
</pre></div>
</div>
<p>Paths also support indexing and slicing, with each access
returning a new Path object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">Path(&#39;a&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
<span class="go">Path(1, 2)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="py2store.utils.glom.Path.from_t">
<code class="sig-name descname">from_t</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Path.from_t"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.from_t" title="Permalink to this definition">¶</a></dt>
<dd><p>return the same path but starting from T</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Path.from_text">
<em class="property">classmethod </em><code class="sig-name descname">from_text</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Path.from_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.from_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a Path from .-delimited text:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="o">.</span><span class="n">from_text</span><span class="p">(</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">)</span>
<span class="go">Path(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Path.items">
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Path.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.items" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of (operation, value) pairs.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">T</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">((&#39;.&#39;, &#39;a&#39;), (&#39;.&#39;, &#39;b&#39;), (&#39;P&#39;, &#39;c&#39;), (&#39;[&#39;, &#39;d&#39;))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.Path.values">
<code class="sig-name descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Path.values"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Path.values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of values referenced in this path.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Path</span><span class="p">(</span><span class="n">T</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">b</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;d&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="go">(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.PathAccessError">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">PathAccessError</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">exc</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">part_idx</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#PathAccessError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.PathAccessError" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="../../../test.html#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype represents a failure to access an
attribute as dictated by the spec. The most commonly-seen error
when using glom, it maintains a copy of the original exception and
produces a readable error message for easy debugging.</p>
<p>If you see this error, you may want to:</p>
<blockquote>
<div><ul class="simple">
<li><p>Check the target data is accurate using <code class="xref py py-class docutils literal notranslate"><span class="pre">Inspect</span></code></p></li>
<li><p>Catch the exception and return a semantically meaningful error message</p></li>
<li><p>Use <code class="xref py py-class docutils literal notranslate"><span class="pre">glom.Coalesce</span></code> to specify a default</p></li>
<li><p>Use the top-level <code class="docutils literal notranslate"><span class="pre">default</span></code> kwarg on <code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></p></li>
</ul>
</div></blockquote>
<p>In any case, be glad you got this error and not the one it was
wrapping!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exc</strong> (<em>Exception</em>) – The error that arose when we tried to access
<em>path</em>. Typically an instance of KeyError, AttributeError,
IndexError, or TypeError, and sometimes others.</p></li>
<li><p><strong>path</strong> (<a class="reference internal" href="../../../test.html#py2store.utils.glom.Path" title="py2store.utils.glom.Path"><em>Path</em></a>) – The full Path glom was in the middle of accessing
when the error occurred.</p></li>
<li><p><strong>part_idx</strong> (<em>int</em>) – The index of the part of the <em>path</em> that caused
the error.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.b.c&#39;</span><span class="p">)</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.PathAccessError</span>: <span class="n">could not access &#39;c&#39;, part 2 of Path(&#39;a&#39;, &#39;b&#39;, &#39;c&#39;), got error: ...</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.Spec">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">Spec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spec</span></em>, <em class="sig-param"><span class="n">scope</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#Spec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.Spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Spec objects serve three purposes, here they are, roughly ordered
by utility:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>As a form of compiled or “curried” glom call, similar to
Python’s built-in <code class="xref py py-func docutils literal notranslate"><span class="pre">re.compile()</span></code>.</p></li>
<li><p>A marker as an object as representing a spec rather than a
literal value in certain cases where that might be ambiguous.</p></li>
<li><p>A way to update the scope within another Spec.</p></li>
</ol>
</div></blockquote>
<p>In the second usage, Spec objects are the complement to
<code class="xref py py-class docutils literal notranslate"><span class="pre">Literal</span></code>, wrapping a value and marking that it
should be interpreted as a glom spec, rather than a literal value.
This is useful in places where it would be interpreted as a value
by default. (Such as T[key], Call(func) where key and func are
assumed to be literal values and not specs.)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>spec</strong> – The glom spec.</p></li>
<li><p><strong>scope</strong> (<em>dict</em>) – additional values to add to the scope when
evaluating this Spec</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.TType">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">TType</code><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#TType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TType" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">T</span></code>, short for “target”. A singleton object that enables
object-oriented expression of a glom specification.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">T</span></code> is a singleton, and does not need to be constructed.</p>
</div>
<p>Basically, think of <code class="docutils literal notranslate"><span class="pre">T</span></code> as your data’s stunt double. Everything
that you do to <code class="docutils literal notranslate"><span class="pre">T</span></code> will be recorded and executed during the
<a class="reference internal" href="../../../test.html#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> call. Take this example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="n">T</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;b&#39;</span><span class="p">][</span><span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">}}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">&#39;d&#39;</span>
</pre></div>
</div>
<p>So far, we’ve relied on the <code class="docutils literal notranslate"><span class="pre">'a.b.c'</span></code>-style shorthand for
access, or used the <code class="xref py py-class docutils literal notranslate"><span class="pre">Path</span></code> objects, but if you want
to explicitly do attribute and key lookups, look no further than
<code class="docutils literal notranslate"><span class="pre">T</span></code>.</p>
<p>But T doesn’t stop with unambiguous access. You can also call
methods and perform almost any action you would with a normal
object:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="nb">list</span><span class="p">))</span>  <span class="c1"># reviewed below</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="go">[(&#39;c&#39;, &#39;d&#39;)]</span>
</pre></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">T</span></code> object can go anywhere in the spec. As seen in the example
above, we access <code class="docutils literal notranslate"><span class="pre">'a'</span></code>, use a <code class="docutils literal notranslate"><span class="pre">T</span></code> to get <code class="docutils literal notranslate"><span class="pre">'b'</span></code> and iterate
over its <code class="docutils literal notranslate"><span class="pre">items</span></code>, turning them into a <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<p>You can even use <code class="docutils literal notranslate"><span class="pre">T</span></code> with <code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code> to construct objects:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">):</span>
<span class="gp">... </span>       <span class="bp">self</span><span class="o">.</span><span class="n">attr</span> <span class="o">=</span> <span class="n">attr</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;attr&#39;</span><span class="p">:</span> <span class="mf">3.14</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">Call</span><span class="p">(</span><span class="n">ExampleClass</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="n">T</span><span class="p">))</span><span class="o">.</span><span class="n">attr</span>
<span class="go">3.14</span>
</pre></div>
</div>
<p>On a further note, while <code class="docutils literal notranslate"><span class="pre">lambda</span></code> works great in glom specs, and
can be very handy at times, <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Call</span></code>
eliminate the need for the vast majority of <code class="docutils literal notranslate"><span class="pre">lambda</span></code> usage with
glom.</p>
<p>Unlike <code class="docutils literal notranslate"><span class="pre">lambda</span></code> and other functions, <code class="docutils literal notranslate"><span class="pre">T</span></code> roundtrips
beautifully and transparently:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;c&#39;</span><span class="p">](</span><span class="s1">&#39;success&#39;</span><span class="p">)</span>
<span class="go">T[&#39;a&#39;].b[&#39;c&#39;](&#39;success&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">T</span></code>-related access errors raise a <code class="xref py py-exc docutils literal notranslate"><span class="pre">PathAccessError</span></code>
during the <code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code> call.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While <code class="docutils literal notranslate"><span class="pre">T</span></code> is clearly useful, powerful, and here to stay, its
semantics are still being refined. Currently, operations beyond
method calls and attribute/item access are considered
experimental and should not be relied upon.</p>
</div>
</dd></dl>

<dl class="py class">
<dt id="py2store.utils.glom.TargetRegistry">
<em class="property">class </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">TargetRegistry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">register_default_types</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#TargetRegistry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TargetRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>responsible for registration of target types for iteration
and attribute walking</p>
<dl class="py method">
<dt id="py2store.utils.glom.TargetRegistry.get_handler">
<code class="sig-name descname">get_handler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op</span></em>, <em class="sig-param"><span class="n">obj</span></em>, <em class="sig-param"><span class="n">path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">raise_exc</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#TargetRegistry.get_handler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TargetRegistry.get_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>for an operation and object <strong>instance</strong>, obj, return the
closest-matching handler function, raising UnregisteredTarget
if no handler can be found for <em>obj</em> (or False if
raise_exc=False)</p>
</dd></dl>

<dl class="py method">
<dt id="py2store.utils.glom.TargetRegistry.register_op">
<code class="sig-name descname">register_op</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op_name</span></em>, <em class="sig-param"><span class="n">auto_func</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">exact</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#TargetRegistry.register_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.TargetRegistry.register_op" title="Permalink to this definition">¶</a></dt>
<dd><p>add operations beyond the builtins (‘get’ and ‘iterate’ at the time
of writing).</p>
<p>auto_func is a function that when passed a type, returns a
handler associated with op_name if it’s supported, or False if
it’s not.</p>
<p>See glom.core.register_op() for the global version used by
extensions.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt id="py2store.utils.glom.UnregisteredTarget">
<em class="property">exception </em><code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">UnregisteredTarget</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op</span></em>, <em class="sig-param"><span class="n">target_type</span></em>, <em class="sig-param"><span class="n">type_map</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#UnregisteredTarget"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.UnregisteredTarget" title="Permalink to this definition">¶</a></dt>
<dd><p>This <a class="reference internal" href="../../../test.html#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-class docutils literal notranslate"><span class="pre">GlomError</span></code></a> subtype is raised when a spec calls for an
unsupported action on a target type. For instance, trying to
iterate on an non-iterable target:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="nb">object</span><span class="p">(),</span> <span class="p">[</span><span class="s1">&#39;a.b.c&#39;</span><span class="p">])</span>  
<span class="gt">Traceback (most recent call last):</span>
<span class="c">...</span>
<span class="gr">glom.UnregisteredTarget</span>: <span class="n">target type &#39;object&#39; not registered for &#39;iterate&#39;, expected one of registered types: (...)</span>
</pre></div>
</div>
<p>It should be noted that this is a pretty uncommon occurrence in
production glom usage. See the <span class="xref std std-ref">setup-and-registration</span>
section for details on how to avoid this error.</p>
<p>An UnregisteredTarget takes and tracks a few values:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>op</strong> (<em>str</em>) – The name of the operation being performed (‘get’ or ‘iterate’)</p></li>
<li><p><strong>target_type</strong> (<em>type</em>) – The type of the target being processed.</p></li>
<li><p><strong>type_map</strong> (<em>dict</em>) – A mapping of target types that do support this operation</p></li>
<li><p><strong>path</strong> – The path at which the error occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.glom">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">glom</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target</span></em>, <em class="sig-param"><span class="n">spec</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#glom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.glom" title="Permalink to this definition">¶</a></dt>
<dd><p>Access or construct a value from a given <em>target</em> based on the
specification declared by <em>spec</em>.</p>
<p>Accessing nested data, aka deep-get:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.b&#39;</span><span class="p">)</span>
<span class="go">&#39;c&#39;</span>
</pre></div>
</div>
<p>Here the <em>spec</em> was just a string denoting a path,
<code class="docutils literal notranslate"><span class="pre">'a.b.</span></code>. As simple as it should be. The next example shows
how to use nested data to access many fields at once, and make
a new nested structure.</p>
<p>Constructing, or restructuring more-complicated nested data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">target</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;e&#39;</span><span class="p">},</span> <span class="s1">&#39;f&#39;</span><span class="p">:</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;a.b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="s1">&#39;a.d&#39;</span><span class="p">,</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="p">[</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">spec</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
<span class="go">{&#39;a&#39;: &#39;c&#39;, &#39;d&#39;: &#39;e&#39;, &#39;h&#39;: [0, 2, 4]}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">glom</span></code> also takes a keyword-argument, <em>default</em>. When set,
if a <code class="docutils literal notranslate"><span class="pre">glom</span></code> operation fails with a <a class="reference internal" href="../../../test.html#py2store.utils.glom.GlomError" title="py2store.utils.glom.GlomError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">GlomError</span></code></a>, the
<em>default</em> will be returned, very much like
<code class="xref py py-meth docutils literal notranslate"><span class="pre">dict.get()</span></code>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="s1">&#39;a.xx&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;nada&#39;</span><span class="p">)</span>
<span class="go">&#39;nada&#39;</span>
</pre></div>
</div>
<p>The <em>skip_exc</em> keyword argument controls which errors should
be ignored.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">glom</span><span class="p">({},</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mf">100.0</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">skip_exc</span><span class="o">=</span><span class="ne">ZeroDivisionError</span><span class="p">)</span>
<span class="go">0.0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>object</em>) – the object on which the glom will operate.</p></li>
<li><p><strong>spec</strong> (<em>object</em>) – Specification of the output object in the form
of a dict, list, tuple, string, other glom construct, or
any composition of these.</p></li>
<li><p><strong>default</strong> (<em>object</em>) – An optional default to return in the case
an exception, specified by <em>skip_exc</em>, is raised.</p></li>
<li><p><strong>skip_exc</strong> (<em>Exception</em>) – An optional exception or tuple of
exceptions to ignore and return <em>default</em> (None if
omitted). If <em>skip_exc</em> and <em>default</em> are both not set,
glom raises errors through.</p></li>
<li><p><strong>scope</strong> (<em>dict</em>) – Additional data that can be accessed
via S inside the glom-spec.</p></li>
</ul>
</dd>
</dl>
<p>It’s a small API with big functionality, and glom’s power is
only surpassed by its intuitiveness. Give it a whirl!</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.is_iterable">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">is_iterable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#is_iterable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.is_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar in nature to <code class="xref py py-func docutils literal notranslate"><span class="pre">callable()</span></code>, <code class="docutils literal notranslate"><span class="pre">is_iterable</span></code> returns
<code class="docutils literal notranslate"><span class="pre">True</span></code> if an object is <a href="#id1"><span class="problematic" id="id2">`iterable`_</span></a>, <code class="docutils literal notranslate"><span class="pre">False</span></code> if not.
&gt;&gt;&gt; is_iterable([])
True
&gt;&gt;&gt; is_iterable(1)
False</p>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.make_sentinel">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">make_sentinel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'_MISSING'</span></em>, <em class="sig-param"><span class="n">var_name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#make_sentinel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.make_sentinel" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and returns a new <strong>instance</strong> of a new class, suitable for
usage as a “sentinel”, a kind of singleton often used to indicate
a value is missing when <code class="docutils literal notranslate"><span class="pre">None</span></code> is a valid input.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – Name of the Sentinel</p></li>
<li><p><strong>var_name</strong> (<em>str</em>) – Set this name to the name of the variable in
its respective module enable pickleability.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_sentinel</span><span class="p">(</span><span class="n">var_name</span><span class="o">=</span><span class="s1">&#39;_MISSING&#39;</span><span class="p">)</span>
<span class="go">_MISSING</span>
</pre></div>
</div>
<p>The most common use cases here in boltons are as default values
for optional function arguments, partly because of its
less-confusing appearance in automatically generated
documentation. Sentinels also function well as placeholders in queues
and linked lists.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By design, additional calls to <code class="docutils literal notranslate"><span class="pre">make_sentinel</span></code> with the same
values will not produce equivalent objects.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="nb">type</span><span class="p">(</span><span class="n">make_sentinel</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">))</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.register">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">register</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">target_type</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register <em>target_type</em> so <code class="xref py py-meth docutils literal notranslate"><span class="pre">glom()</span></code> will
know how to handle instances of that type as targets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_type</strong> (<em>type</em>) – A type expected to appear in a glom()
call target</p></li>
<li><p><strong>get</strong> (<em>callable</em>) – A function which takes a target object and
a name, acting as a default accessor. Defaults to
<code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code>.</p></li>
<li><p><strong>iterate</strong> (<em>callable</em>) – A function which takes a target object
and returns an iterator. Defaults to <code class="xref py py-func docutils literal notranslate"><span class="pre">iter()</span></code> if
<em>target_type</em> appears to be iterable.</p></li>
<li><p><strong>exact</strong> (<em>bool</em>) – Whether or not to match instances of subtypes
of <em>target_type</em>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The module-level <a class="reference internal" href="../../../test.html#py2store.utils.glom.register" title="py2store.utils.glom.register"><code class="xref py py-func docutils literal notranslate"><span class="pre">register()</span></code></a> function affects the
module-level <a class="reference internal" href="../../../test.html#py2store.utils.glom.glom" title="py2store.utils.glom.glom"><code class="xref py py-func docutils literal notranslate"><span class="pre">glom()</span></code></a> function’s behavior. If this
global effect is undesirable for your application, or
you’re implementing a library, consider instantiating a
<a class="reference internal" href="../../../test.html#py2store.utils.glom.Glommer" title="py2store.utils.glom.Glommer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Glommer</span></code></a> instance, and using the
<a class="reference internal" href="../../../test.html#py2store.utils.glom.Glommer.register" title="py2store.utils.glom.Glommer.register"><code class="xref py py-meth docutils literal notranslate"><span class="pre">register()</span></code></a> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Glommer.glom()</span></code>
methods instead.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="py2store.utils.glom.register_op">
<code class="sig-prename descclassname">py2store.utils.glom.</code><code class="sig-name descname">register_op</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">op_name</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/py2store/utils/glom.html#register_op"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#py2store.utils.glom.register_op" title="Permalink to this definition">¶</a></dt>
<dd><p>For extension authors needing to add operations beyond the builtin
‘get’ and ‘iterate’ to the default scope. See TargetRegistry for more details.</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">py2store</a></h1>








<h3>Navigation</h3>
<p><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../py2store.html">py2store</a></li>
<li class="toctree-l1"><a class="reference internal" href="../access.html">py2store.access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendable.html">py2store.appendable</a></li>
<li class="toctree-l1"><a class="reference internal" href="../base.html">py2store.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../caching.html">py2store.caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core.html">py2store.core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dig.html">py2store.dig</a></li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">py2store.errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">py2store.examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/dropbox_w_urllib.html">py2store.examples.dropbox_w_urllib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/kv_walking.html">py2store.examples.kv_walking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/last_key_inserted.html">py2store.examples.last_key_inserted</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/python_code_stats.html">py2store.examples.python_code_stats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/write_caches.html">py2store.examples.write_caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext.html">py2store.ext</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/dataframes.html">py2store.ext.dataframes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/docx.html">py2store.ext.docx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/github.html">py2store.ext.github</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/gitlab.html">py2store.ext.gitlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/hdf.html">py2store.ext.hdf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/matlab.html">py2store.ext.matlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ext/wordnet.html">py2store.ext.wordnet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesys.html">py2store.filesys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_mappers.html">py2store.key_mappers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_mappers/naming.html">py2store.key_mappers.naming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_mappers/paths.html">py2store.key_mappers.paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_mappers/str_utils.html">py2store.key_mappers.str_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_mappers/tuples.html">py2store.key_mappers.tuples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc.html">py2store.misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mixins.html">py2store.mixins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../my.html">py2store.my</a></li>
<li class="toctree-l1"><a class="reference internal" href="../my/grabbers.html">py2store.my.grabbers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../naming.html">py2store.naming</a></li>
<li class="toctree-l1"><a class="reference internal" href="../parse_format.html">py2store.parse_format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../paths.html">py2store.paths</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters.html">py2store.persisters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/dropbox_w_dropbox.html">py2store.persisters.dropbox_w_dropbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/googledrive_w_pydrive.html">py2store.persisters.googledrive_w_pydrive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/local_files.html">py2store.persisters.local_files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/new_s3.html">py2store.persisters.new_s3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/redis_w_redis.html">py2store.persisters.redis_w_redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/s3_w_boto3.html">py2store.persisters.s3_w_boto3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/sql_w_sqlalchemy.html">py2store.persisters.sql_w_sqlalchemy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../persisters/w_aiofile.html">py2store.persisters.w_aiofile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serializers.html">py2store.serializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../serializers/pickled.html">py2store.serializers.pickled</a></li>
<li class="toctree-l1"><a class="reference internal" href="../signatures.html">py2store.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slib.html">py2store.slib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slib/s_configparser.html">py2store.slib.s_configparser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slib/s_zipfile.html">py2store.slib.s_zipfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sources.html">py2store.sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stores.html">py2store.stores</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stores/dropbox_store.html">py2store.stores.dropbox_store</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stores/local_store.html">py2store.stores.local_store</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stores/s3_store.html">py2store.stores.s3_store</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stores/sql_w_sqlalchemy.html">py2store.stores.sql_w_sqlalchemy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test.html">py2store.test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test/local_files_test.html">py2store.test.local_files_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test/quick_test.html">py2store.test.quick_test</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test/scrap.html">py2store.test.scrap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test/util.html">py2store.test.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trans.html">py2store.trans</a></li>
<li class="toctree-l1"><a class="reference internal" href="../util.html">py2store.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utils.html">py2store.utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="affine_conversion.html">py2store.utils.affine_conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendable.html">py2store.utils.appendable</a></li>
<li class="toctree-l1"><a class="reference internal" href="attr_dict.html">py2store.utils.attr_dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache_descriptors.html">py2store.utils.cache_descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="cumul_aggreg_write.html">py2store.utils.cumul_aggreg_write</a></li>
<li class="toctree-l1"><a class="reference internal" href="explicit.html">py2store.utils.explicit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">py2store.utils.glom</a></li>
<li class="toctree-l1"><a class="reference internal" href="mappify.html">py2store.utils.mappify</a></li>
<li class="toctree-l1"><a class="reference internal" href="mg_selectors.html">py2store.utils.mg_selectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="mongoquery.html">py2store.utils.mongoquery</a></li>
<li class="toctree-l1"><a class="reference internal" href="signatures.html">py2store.utils.signatures</a></li>
<li class="toctree-l1"><a class="reference internal" href="sliceable.html">py2store.utils.sliceable</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries_caching.html">py2store.utils.timeseries_caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="uri_utils.html">py2store.utils.uri_utils</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="explicit.html" title="previous chapter">py2store.utils.explicit</a></li>
      <li>Next: <a href="mappify.html" title="next chapter">py2store.utils.mappify</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;NO COPYRIGHT.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/module_docs/py2store/utils/glom.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>